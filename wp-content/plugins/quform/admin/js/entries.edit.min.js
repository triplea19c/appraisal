var quform=function(e,s,r){"use strict";var a,o=e.core,t=o.cache,i=!1,n=null,f=[];return a={init:function(){t.get("#qfb-save-entry").add(t.get("#qfb-fixed-save-button")).click(function(){a.saveEntry()}),t.get("#qfb-entry-form").on("click",".qfb-edit-file-upload-remove",function(){var e=s(this).closest(".qfb-edit-file-upload"),r=e.data("quform-upload-uid");r&&f.push(r),e.qfbSlideHide()}),s(document).on("click",function(e){if(e&&e.target&&e.ctrlKey){var r=s(e.target);r.is(".quform-field-radio:checked")&&r.prop("checked",!1)}})},saveEntry:function(){i||(i=!0,"number"==typeof n&&(clearTimeout(n),n=null),t.get("#qfb-fixed-save-button").removeClass("qfb-saving qfb-saved qfb-save-error").addClass("qfb-saving"),t.get("#qfb-entry-form").ajaxSubmit({type:"POST",dataType:"json",data:{quform_removed_upload_uids:f.join(",")},iframe:!0,url:"",success:function(e){switch((e=o.sanitiseResponse(e)).type){case"success":a.responseSuccess(e);break;case"error":a.responseError(e);break;case"invalid":a.responseInvalid(e)}}}))},allowResubmission:function(){s(".qfb-has-validation-error").removeClass("qfb-has-validation-error"),s(".qfb-validation-error").remove(),i=!1},responseSuccess:function(e){a.allowResubmission(),f=[],o.showFixedMessage(e.message,"success"),t.get("#qfb-fixed-save-button").removeClass("qfb-saving").addClass("qfb-saved"),n=setTimeout(function(){t.get("#qfb-fixed-save-button").removeClass("qfb-saved")},2e3)},responseError:function(e){var r=null;a.allowResubmission(),t.get("#qfb-fixed-save-button").removeClass("qfb-saving").addClass("qfb-save-error"),n=setTimeout(function(){t.get("#qfb-fixed-save-button").removeClass("qfb-save-error")},2e3),o.isNonEmptyString(e.message)&&o.showFixedMessage(e.message,"error"),s.each(e.errors,function(e,o){var t=s(".qfb-edit-element-"+e);t.length&&(a.addElementError(e,o),r||(r=t))}),s(".qfb-validation-error").qfbSlideShow(),r&&o.scrollTo(r)},addElementError:function(e,r){var a=s('<div class="qfb-validation-error qfb-cf">');return s('<div class="qfb-validation-error-inner">').appendTo(a).append(s('<span class="qfb-validation-error-text">').html(r)),s(".qfb-edit-element-"+e).addClass("qfb-has-validation-error"),s(".qfb-edit-input-"+e).after(a),a},responseInvalid:function(e){a.allowResubmission(),o.showFixedMessage(e.message,"error"),t.get("#qfb-fixed-save-button").removeClass("qfb-saving").addClass("qfb-save-error"),n=setTimeout(function(){t.get("#qfb-fixed-save-button").removeClass("qfb-save-error")},2e3)}},s(document).ready(a.init),e.entries=e.entries||{},e.entries.edit=a,e}(quform,jQuery,quformCoreL10n);