var quform=function(e,t,n,a){"use strict";function l(e){s.get("#qfb-entry-label-set").find(".qfb-entry-label").removeClass("qfb-label-selected").each(function(){var n=t(this);e.find(".qfb-entry-label-indicator").each(function(){t(this).data("id")==n.data("label").id&&n.addClass("qfb-label-selected")})}),s.get("#qfb-entry-label-set").show()}var r,i=e.core,s=i.cache,b=t(document);return r={init:function(){s.get(".qfb-entry-label-indicators").click(function(e){e.stopPropagation();var n=t(this),a=n.parent();s.get("#qfb-entry-label-set").parent()[0]===a[0]?s.get("#qfb-entry-label-set").is(":visible")?s.get("#qfb-entry-label-set").hide():l(n):(a.append(s.get("#qfb-entry-label-set").hide()),l(n))}),b.on("click",function(){s.get("#qfb-entry-label-set").hide()}),s.get("#qfb-entry-label-set").click(function(e){e.stopPropagation()}),s.get("#qfb-entry-label-set").find(".qfb-entry-label").click(function(){r.setEntryLabel(t(this))})},setEntryLabel:function(e){e.toggleClass("qfb-label-selected");var l=e.data("label"),r=e.hasClass("qfb-label-selected"),s=e.closest("th, td"),b=s.find(".qfb-entry-label-indicators");if(r){if(l.color){var o=t('<span class="qfb-entry-label-indicator">').data("id",l.id).css("background-color",l.color);i.isColorTransparent(l.color)&&o.addClass("qfb-entry-label-indicator-transparent"),i.isNonEmptyString(l.name)&&o.attr("title",l.name),b.append(o),b.find(".qfb-entry-label-indicator:not(.qfb-entry-label-indicator-transparent)").length&&b.find(".qfb-entry-no-labels").hide()}}else b.find(".qfb-entry-label-indicator").filter(function(){return t(this).data("id")==l.id}).remove(),b.find(".qfb-entry-label-indicator:not(.qfb-entry-label-indicator-transparent)").length||b.find(".qfb-entry-no-labels").show();t.ajax({url:a.ajaxUrl,type:"POST",dataType:"json",data:{action:"quform_set_entry_labels",_ajax_nonce:n.setEntryLabelsNonce,entry_id:s.data("entry-id"),entry_label_id:l.id,adding:r}})}},t(document).ready(r.init),e.entries=r,e}(quform,jQuery,quformEntriesL10n,quformCoreL10n);