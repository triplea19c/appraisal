var quformInsertForm=function(o){"use strict";var e,t,r=o(document);return e={activatedFancybox:!1,init:function(r){t=o(r).data("l10n"),e.loadPopup()},loadPopup:function(){o.ajax({url:t.ajaxUrl+"?action=quform_insert_form",dataType:"html"}).done(function(n){var i=o(n),f=function(){i.remove(),o("body").css("overflow",""),r.off("keydown.quform-close-popup")};i.on("change","#qfb-insert-form-id",e.updateShortcodePreview),i.on("click","#qfb-insert-form-popup, #qfb-insert-form-show-title, #qfb-insert-form-show-description",e.updateShortcodePreview),i.on("keyup blur","#qfb-insert-form-content, #qfb-insert-form-width, #qfb-insert-form-options",e.updateShortcodePreview),i.on("click","#qfb-insert-form-preview",function(){o(this).focus().select()}),i.on("click",".qfb-insert-form-go",function(){var o=e.generateShortcode();return o?window.send_to_editor?(window.send_to_editor(o),f()):alert(t.couldNotSendToEditor):alert(t.selectForm),!1}),i.on("click",".qfb-insert-form-cancel, .qfb-insert-form-overlay",f),i.on("click","#qfb-insert-form-popup",function(){o("#qfb-insert-form-content, #qfb-insert-form-width, #qfb-insert-form-options").closest(".qfb-sub-setting")[o(this).is(":checked")?"slideDown":"slideUp"]()}),o("body").css("overflow","hidden"),i.appendTo(o("body")).show(),r.on("keydown.quform-close-popup",function(o){27==o.keyCode&&f()}),i.find(".qfb-popup-overlay").click(f),o("#qfb-insert-form-content, #qfb-insert-form-width, #qfb-insert-form-options").closest(".qfb-sub-setting").hide()})},generateShortcode:function(){var r=o("#qfb-insert-form-id").val(),n="";if(r){var i=o("#qfb-insert-form-id option:selected").text(),f=o("#qfb-insert-form-popup").is(":checked"),s=o("#qfb-insert-form-show-title").is(":checked"),c=o("#qfb-insert-form-show-description").is(":checked"),d="";if(s||(d+=' show_title="0"'),c||(d+=' show_description="0"'),f){var a=o("#qfb-insert-form-content").val(),p=o("#qfb-insert-form-width").val(),u=o("#qfb-insert-form-options").val();p.length&&(d+=' width="'+p+'"'),u.length&&(d+=" options='"+u+"'"),n='[quform_popup id="'+r+'" name="'+i+'"'+d+"]"+a+"[/quform_popup]",e.activatedFancybox||(e.activatedFancybox=!0,o.ajax({url:t.ajaxUrl,type:"POST",dataType:"json",data:{action:"quform_set_popup_enabled"}}))}else n='[quform id="'+r+'" name="'+i+'"'+d+"]"}return n},updateShortcodePreview:function(){var t=e.generateShortcode(),r=o("#qfb-insert-form-preview");t?r.val(t).parent().show():r.val("").parent().hide()}}}(jQuery);