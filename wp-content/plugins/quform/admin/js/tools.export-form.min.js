var quform=function(o,r,t,e){"use strict";var a,n=o.core,f=n.cache,i=!1;return a={init:function(){f.get("#qfb-export-form-button").click(a["export"]),f.get("#qfb-export-form-data").click(function(){f.get("#qfb-export-form-data").focus().select()})},validate:function(){if(f.get(".qfb-tools-export-form").find(".qfb-validation-error").remove(),""===f.get("#qfb-export-form").val()){var o=f.get("#qfb-export-form").closest(n.settingWrap);return n.addValidationError(o,t.noFormSelected),n.scrollTo(o),!1}return!0},"export":function(){if(!i){if(f.get("#qfb-export-form-data").val(""),f.get("#qfb-export-form-data-wrap").hide(),!a.validate())return!1;i=!0,r.ajax({type:"POST",url:e.ajaxUrl,data:{action:"quform_export_form",_ajax_nonce:t.exportFormNonce,id:f.get("#qfb-export-form").val()},dataType:"json"}).done(function(o){o=n.sanitiseResponse(o),f.get(".qfb-tools-export-form").find(".qfb-validation-error").remove(),i=!1,"success"==o.type?a.onExportSuccess(o.data):"error"!=o.type&&"invalid"!=o.type||a.onExportFail(o)}).fail(function(){f.get(".qfb-tools-export-form").find(".qfb-validation-error").remove(),i=!1,a.onExportFail({message:e.ajaxError})})}},onExportSuccess:function(o){f.get("#qfb-export-form-data").val(o),f.get("#qfb-export-form-data-wrap").slideDown()},onExportFail:function(o){var e;n.isNonEmptyString(o.message)&&n.showFixedMessage(t.errorExportingForm+"<br>"+o.message,"error"),o.errors&&r.each(o.errors,function(o,r){var t=f.get("#"+o).closest(n.settingWrap);e||(e=t),n.addValidationError(t,r)}),e&&n.scrollTo(e)}},r(document).ready(a.init),o.tools=o.tools||{},o.tools.exportForm=a,o}(quform,jQuery,quformToolsExportFormL10n,quformCoreL10n);