var quform=function(e,t,i,o){"use strict";var a,l=e.core,n=e.builder,s=l.cache;return a={editing:null,init:function(){t("#qfb-add-confirmation").on("click",function(){a.showSettings()}),s.get("#qfb-confirmations").on("click",".qfb-confirmation-action-toggle",function(){var e=t(this).closest(".qfb-confirmation"),i=a.getConfirmationById(e.data("id"));i&&1!=i.id&&(i.enabled=e.find(".qfb-confirmation-toggle").is(":checked"))}),s.get("#qfb-confirmations").on("click",".qfb-confirmation-action-settings",function(){a.showSettings(t(this).closest(".qfb-confirmation").data("id"))}),s.get("#qfb-confirmations").on("click",".qfb-confirmation-action-duplicate",function(){a.duplicate(t(this).closest(".qfb-confirmation").data("id"))}),s.get("#qfb-confirmations").on("click",".qfb-confirmation-action-remove",function(){var e=t(this).closest(".qfb-confirmation");1!=e.data("id")?confirm(i.confirmationConfirmRemove)&&e.qfbSlideHide(function(){for(var t=e.data("id"),i=n.form.confirmations.length;i--;)n.form.confirmations[i].id==t&&n.form.confirmations.splice(i,1);e.remove()}):alert(i.cannotRemoveDefaultConfirmation)}),s.get("#qfb-confirmation-settings").on("click",".qfb-popup-save-button",function(){a.saveSettings()&&a.hideSettings()}),s.get("#qfb-confirmation-settings").on("click",".qfb-popup-close-button",a.hideSettings),s.get("#qfb_confirmation_type").change(function(){var e=s.get("#qfb_confirmation_type").val();s.get("#qfb_confirmation_message").add(s.get("#qfb_confirmation_message_auto_format")).add(s.get("#qfb_confirmation_message_icon")).add(s.get("#qfb_confirmation_message_position")).add(s.get("#qfb_confirmation_message_timeout")).add(s.get("#qfb_confirmation_hide_form")).closest(l.settingWrap)["message"==e||"message-redirect-page"==e||"message-redirect-url"==e?"qfbSlideShow":"qfbSlideHide"](),s.get("#qfb_confirmation_redirect_page").closest(l.settingWrap)["message-redirect-page"==e||"redirect-page"==e?"qfbSlideShow":"qfbSlideHide"](),s.get("#qfb_confirmation_redirect_url").closest(l.settingWrap)["message-redirect-url"==e||"redirect-url"==e?"qfbSlideShow":"qfbSlideHide"](),s.get("#qfb_confirmation_redirect_query").closest(l.settingWrap)["message-redirect-page"==e||"message-redirect-url"==e||"redirect-page"==e||"redirect-url"==e?"qfbSlideShow":"qfbSlideHide"](),s.get("#qfb_confirmation_redirect_delay").closest(l.settingWrap)["message-redirect-page"==e||"message-redirect-url"==e?"qfbSlideShow":"qfbSlideHide"](),s.get("#qfb_notification_reset_form").closest(l.settingWrap)["message"==e?"qfbSlideShow":"qfbSlideHide"]()}),t("#qfb-add-confirmation-logic-rule").click(function(){s.get("#qfb-confirmation-logic").find(".qfb-no-logic-rules").remove(),s.get("#qfb-confirmation-logic").find(".qfb-logic-rules").append(n.logic.buildLogicRule(n.logic.getNewLogicRule()))}),t.fn.select2&&s.get("#qfb_confirmation_redirect_page").select2({theme:"qfb",language:{noResults:function(){return o.noResultsFound}}}),n.setupContainerTooltips(s.get("#qfb-confirmation-settings-inner"))},showSettings:function(e){var o=a.getConfirmationById(e);null===o&&(o=t.extend(!0,{},i.confirmation)),a.editing=o,a.loadSettings(),t("body").css({overflow:"hidden"}),s.get("#qfb-confirmation-settings").show(),s.get("#qfb-confirmation-settings-inner").scrollTop(0)},loadSettings:function(){var e=a.editing;if(s.get("#qfb-confirmation-settings").find(".qfb-setting").hide(),s.get("#qfb_confirmation_name").val(a.getValue(e,"name")).closest(l.settingWrap).show(),s.get("#qfb_confirmation_enabled").prop("checked",a.getValue(e,"enabled")),l.setSelectVal(s.get("#qfb_confirmation_type"),a.getValue(e,"type")).closest(l.settingWrap).show(),s.get("#qfb_confirmation_message").val(a.getValue(e,"message")),window.tinymce){var t=window.tinymce.get("qfb_confirmation_message");t&&!t.isHidden()&&t.load(),window.switchEditors&&window.getUserSetting&&window.switchEditors.go("qfb_confirmation_message",window.getUserSetting("editor")||"tmce")}s.get("#qfb_confirmation_message_auto_format").prop("checked",a.getValue(e,"messageAutoFormat")),n.loadIconOption(s.get("#qfb_confirmation_message_icon"),a.getValue(e,"messageIcon")),l.setSelectVal(s.get("#qfb_confirmation_message_position"),a.getValue(e,"messagePosition")),s.get("#qfb_confirmation_message_timeout").val(a.getValue(e,"messageTimeout")),l.setSelectVal(s.get("#qfb_confirmation_redirect_page"),a.getValue(e,"redirectPage")).trigger("change.select2"),s.get("#qfb_confirmation_redirect_url").val(a.getValue(e,"redirectUrl")),s.get("#qfb_confirmation_redirect_query").val(a.getValue(e,"redirectQuery")),s.get("#qfb_confirmation_redirect_delay").val(a.getValue(e,"redirectDelay")),1!==e.id&&(s.get("#qfb_confirmation_enabled").closest(l.settingWrap).show(),n.logic.buildLogic([],[{text:i.useThisConfirmationIfAll,value:"all",selected:"all"==a.getValue(e,"logicMatch")},{text:i.useThisConfirmationIfAny,value:"any",selected:"any"==a.getValue(e,"logicMatch")}],a.getValue(e,"logicRules"),s.get("#qfb-confirmation-logic")),s.get("#qfb-confirmation-logic").closest(l.settingWrap).show()),s.get("#qfb_confirmation_hide_form").prop("checked",a.getValue(e,"hideForm")),l.setSelectVal(s.get("#qfb_notification_reset_form"),a.getValue(e,"resetForm")),"undefined"!=typeof e.id?s.get("#qfb-confirmation-unique-id").val(n.form.id+"_"+e.id).closest(l.settingWrap).show():s.get("#qfb-confirmation-unique-id").val(""),"message"!=e.type&&"message-redirect-page"!=e.type&&"message-redirect-url"!=e.type||s.get("#qfb_confirmation_message").add(s.get("#qfb_confirmation_message_auto_format")).add(s.get("#qfb_confirmation_message_icon")).add(s.get("#qfb_confirmation_message_position")).add(s.get("#qfb_confirmation_message_timeout")).add(s.get("#qfb_confirmation_hide_form")).closest(l.settingWrap).show(),"message-redirect-page"!=e.type&&"redirect-page"!=e.type||s.get("#qfb_confirmation_redirect_page").closest(l.settingWrap).show(),"message-redirect-url"!=e.type&&"redirect-url"!=e.type||s.get("#qfb_confirmation_redirect_url").closest(l.settingWrap).show(),"message-redirect-page"!=e.type&&"message-redirect-url"!=e.type&&"redirect-page"!=e.type&&"redirect-url"!=e.type||s.get("#qfb_confirmation_redirect_query").closest(l.settingWrap).show(),"message-redirect-page"!=e.type&&"message-redirect-url"!=e.type||s.get("#qfb_confirmation_redirect_delay").closest(l.settingWrap).show(),"message"==e.type&&s.get("#qfb_notification_reset_form").closest(l.settingWrap).show()},updateConfirmationListing:function(e,t){e.find(".qfb-confirmation-name").text(t.name),a.setConfirmationDescription(e,t),e.find(".qfb-confirmation-toggle").prop("checked",t.enabled)},setConfirmationDescription:function(e,o){var l=t('<div class="qfb-settings-row">'),n=t('<div class="qfb-settings-column">').appendTo(l);switch(o.type){case"message":n.append(t('<i class="mdi mdi-message">').attr("title",i.displayAMessage),t('<span class="qfb-confirmation-description-message">').text(t("<div>").html(o.message).text().substr(0,64)));break;case"message-redirect-page":l.addClass("qfb-settings-row-2"),n.append(t('<i class="mdi mdi-message">').attr("title",i.displayAMessage),t('<span class="qfb-confirmation-description-message">').text(t("<div>").html(o.message).text().substr(0,64))),l.append(t('<div class="qfb-settings-column">').append(t('<i class="mdi mdi-arrow_forward">').attr("title",i.redirectTo),t('<span class="qfb-confirmation-description-redirect-page">').text(a.getPostTitle(o.redirectPage))));break;case"message-redirect-url":l.addClass("qfb-settings-row-2"),n.append(t('<i class="mdi mdi-message">').attr("title",i.displayAMessage),t('<span class="qfb-confirmation-description-message">').text(t("<div>").html(o.message).text().substr(0,64))),l.append(t('<div class="qfb-settings-column">').append(t('<i class="mdi mdi-arrow_forward">').attr("title",i.redirectTo),t('<span class="qfb-confirmation-description-redirect-url">').text(o.redirectUrl)));break;case"redirect-page":n.append(t('<i class="mdi mdi-arrow_forward">').attr("title",i.redirectTo),t('<span class="qfb-confirmation-description-redirect-page">').text(a.getPostTitle(o.redirectPage)));break;case"redirect-url":n.append(t('<i class="mdi mdi-arrow_forward">').attr("title",i.redirectTo),t('<span class="qfb-confirmation-description-redirect-url">').text(o.redirectUrl));break;case"reload":n.append(t('<i class="mdi mdi-refresh">').attr("title",i.reloadThePage))}e.find(".qfb-confirmation-description").html(l)},getPostTitle:function(e){var t,o;for(t=0,o=i.posts.length;t<o;t++)if(i.posts[t].id==e)return i.posts[t].title;return""},getConfirmationMessageHtml:function(){if(window.tinymce){var e=window.tinymce.get("qfb_confirmation_message");e&&!e.isHidden()&&e.isDirty()&&e.save()}return s.get("#qfb_confirmation_message").val()},saveSettings:function(){if(!a.validateSettings())return!1;var e,o=a.editing;return o.name=s.get("#qfb_confirmation_name").val(),o.enabled=s.get("#qfb_confirmation_enabled").is(":checked"),o.type=s.get("#qfb_confirmation_type").val(),o.message=a.getConfirmationMessageHtml(),o.messageAutoFormat=s.get("#qfb_confirmation_message_auto_format").is(":checked"),o.messageIcon=s.get("#qfb_confirmation_message_icon").val(),o.messagePosition=s.get("#qfb_confirmation_message_position").val(),o.messageTimeout=s.get("#qfb_confirmation_message_timeout").val(),o.redirectPage=s.get("#qfb_confirmation_redirect_page").val(),o.redirectUrl=s.get("#qfb_confirmation_redirect_url").val(),o.redirectQuery=s.get("#qfb_confirmation_redirect_query").val(),o.redirectDelay=s.get("#qfb_confirmation_redirect_delay").val(),1!==o.id&&(o.logicAction=!0,o.logicMatch=s.get("#qfb-confirmation-logic").find(".qfb-logic-match").val(),o.logicRules=n.logic.getLogicRules(s.get("#qfb-confirmation-logic"))),o.hideForm=s.get("#qfb_confirmation_hide_form").is(":checked"),o.resetForm=s.get("#qfb_notification_reset_form").val(),"undefined"==typeof o.id?(o.id=n.form.nextConfirmationId++,n.form.confirmations.push(o),(e=t(i.confirmationHtml)).data({id:o.id}),s.get("#qfb-confirmations").append(e.hide()),e.qfbSlideShow()):e=s.get("#qfb-confirmations").find(".qfb-confirmation").filter(function(){return t(this).data("id")===o.id}),a.updateConfirmationListing(e,o),!0},hideSettings:function(){a.editing=null,t(".qtip").hide(),t("body").css({overflow:""}),s.get("#qfb-confirmation-settings-inner").find(".qfb-validation-error").remove(),s.get("#qfb-confirmation-settings").hide()},validateSettings:function(){s.get("#qfb-confirmation-settings-inner").find(".qfb-validation-error").remove();var e=a.editing,n=[];l.isNonEmptyString(s.get("#qfb_confirmation_name").val())||n.push({scrollTarget:s.get("#qfb_confirmation_name").closest(l.settingWrap),show:function(){l.addValidationError(s.get("#qfb_confirmation_name").closest(l.settingInputWrap),o.thisFieldIsRequired)}});var c=s.get("#qfb_confirmation_type").val();if("message"==c||"message-redirect-page"==c||"message-redirect-url"==c){l.isNonEmptyString(a.getConfirmationMessageHtml())||n.push({scrollTarget:s.get("#qfb_confirmation_message").closest(l.settingWrap),show:function(){l.addValidationError(s.get("#qfb_confirmation_message").closest(l.settingInputWrap),o.thisFieldIsRequired)}});var r=s.get("#qfb_confirmation_message_timeout").val();(!l.isNonEmptyString(r)||!t.isNumeric(r)||r<0)&&n.push({scrollTarget:s.get("#qfb_confirmation_message_timeout").closest(l.settingWrap),show:function(){l.addValidationError(s.get("#qfb_confirmation_message_timeout").closest(l.settingInputWrap),i.thisFieldMustBePositiveNumberOrZero)}})}if("message-redirect-page"==c||"message-redirect-url"==c){var f=s.get("#qfb_confirmation_redirect_delay").val();(!l.isNonEmptyString(f)||!t.isNumeric(f)||f<0)&&n.push({scrollTarget:s.get("#qfb_confirmation_redirect_delay").closest(l.settingWrap),show:function(){l.addValidationError(s.get("#qfb_confirmation_redirect_delay").closest(l.settingInputWrap),i.thisFieldMustBePositiveNumberOrZero)}})}"redirect-page"!=c&&"message-redirect-page"!=c||l.isNonEmptyString(s.get("#qfb_confirmation_redirect_page").val())||n.push({scrollTarget:s.get("#qfb_confirmation_redirect_page").closest(l.settingWrap),show:function(){l.addValidationError(s.get("#qfb_confirmation_redirect_page").closest(l.settingInputWrap),o.thisFieldIsRequired)}}),"redirect-url"!=c&&"message-redirect-url"!=c||l.isNonEmptyString(s.get("#qfb_confirmation_redirect_url").val())||n.push({scrollTarget:s.get("#qfb_confirmation_redirect_url").closest(l.settingWrap),show:function(){l.addValidationError(s.get("#qfb_confirmation_redirect_url").closest(l.settingInputWrap),o.thisFieldIsRequired)}}),1===e.id||s.get("#qfb-confirmation-logic").find(".qfb-logic-rule").length||n.push({scrollTarget:s.get("#qfb-confirmation-logic").closest(l.settingWrap),show:function(){l.addValidationError(s.get("#qfb-confirmation-logic").closest(l.settingInputWrap),i.atLeastOneLogicRuleRequired)}});var g=0,b=n.length;if(b>0){for(;g<b;g++)n[g].show();l.scrollTo(n[0].scrollTarget,s.get("#qfb-confirmation-settings-inner"))}return 0===b},duplicate:function(e){var o=a.getConfirmationById(e);if(null!==o){var l=t.extend(!0,{},o,{id:n.form.nextConfirmationId++});n.form.confirmations.push(l);var c=t(i.confirmationHtml);c.data({id:l.id}),a.updateConfirmationListing(c,l),s.get("#qfb-confirmations").append(c.hide()),c.qfbSlideShow()}},getConfirmationById:function(e){if(!e)return null;for(var t=0;t<n.form.confirmations.length;t++)if(e==n.form.confirmations[t].id)return n.form.confirmations[t];return null},checkInvalidLogic:function(){for(var e=0;e<n.form.confirmations.length;e++)n.form.confirmations[e].logicRules=n.logic.removeInvalidLogicRules(n.form.confirmations[e].logicRules)},getValue:function(e,t){return l.getProperty(e,t,l.getProperty(i.confirmation,t))}},e.builder.confirmations=a,e}(quform=function(e,t,i,o){"use strict";var a,l=e.core,n=e.builder,s=l.cache;return a={editing:null,attachmentSources:[],init:function(){t("#qfb-add-notification").on("click",function(){a.showSettings()}),s.get("#qfb-notifications").on("click",".qfb-notification-action-toggle",function(){var e=t(this).closest(".qfb-notification"),i=a.getNotificationById(e.data("id"));i&&(i.enabled=e.find(".qfb-notification-toggle").is(":checked"))}),s.get("#qfb-notifications").on("click",".qfb-notification-action-settings",function(){a.showSettings(t(this).closest(".qfb-notification").data("id"))}),s.get("#qfb-notifications").on("click",".qfb-notification-action-duplicate",function(){a.duplicate(t(this).closest(".qfb-notification").data("id"))}),s.get("#qfb-notifications").on("click",".qfb-notification-action-remove",function(){if(confirm(i.notificationConfirmRemove)){var e=t(this).closest(".qfb-notification");e.qfbSlideHide(function(){for(var i=e.data("id"),o=n.form.notifications.length;o--;)n.form.notifications[o].id==i&&n.form.notifications.splice(o,1);e.remove(),0===s.get("#qfb-notifications").find(".qfb-notification").length&&t("#qfb-no-notifications").qfbSlideShow()})}}),s.get("#qfb-notification-settings").on("click",".qfb-popup-save-button",function(){a.saveSettings()&&a.hideSettings()}),s.get("#qfb-notification-settings").on("click",".qfb-popup-close-button",a.hideSettings),s.get("#qfb_notification_format").change(function(){var e=s.get("#qfb_notification_format").val();s.get("#qfb_notification_html").closest(l.settingWrap)["html"==e?"qfbSlideShow":"qfbSlideHide"](),s.get("#qfb_notification_auto_format").closest(l.settingWrap)["html"==e?"qfbSlideShow":"qfbSlideHide"](),s.get("#qfb_notification_padding").closest(l.settingWrap)["html"==e?"qfbSlideShow":"qfbSlideHide"](),s.get("#qfb_notification_text").closest(l.settingWrap)["html"==e?"qfbSlideHide":"qfbSlideShow"]()}),t("#qfb-add-recipient").click(function(){s.get("#qfb-notification-recipients").append(a.getRecipientHtml()).find("> .qfb-validation-error").remove()}),s.get("#qfb-notification-settings").on("click",".qfb-recipient .qfb-small-remove-button",function(){a.deleteRecipient(t(this))}),s.get("#qfb-notification-settings").on("click",".qfb-recipient .qfb-small-add-button",function(){t(this).closest(".qfb-recipient").after(a.getRecipientHtml())}),t("#qfb_notification_logic_enabled").click(function(){s.get("#qfb-notification-logic").closest(l.settingWrap)[t(this).is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),t("#qfb-add-notification-logic-rule").click(function(){s.get("#qfb-notification-logic").find(".qfb-no-logic-rules").remove(),s.get("#qfb-notification-logic").find(".qfb-logic-rules").append(n.logic.buildLogicRule(n.logic.getNewLogicRule()))}),t("#qfb_notification_conditionals").click(function(){s.get("#qfb-notification-conditionals-wrap").closest(l.settingWrap)[t(this).is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),t("#qfb-add-conditional").click(function(){s.get("#qfb-notification-conditionals-wrap").find(".qfb-no-conditionals").remove(),s.get("#qfb-notification-conditionals-wrap").append(a.buildConditional(a.getNewConditional()))}),s.get("#qfb-notification-conditionals-wrap").on("click",".qfb-conditional-duplicate",function(){a.duplicateConditional(t(this).closest(".qfb-conditional"))}),s.get("#qfb-notification-conditionals-wrap").on("click",".qfb-conditional-delete",function(){confirm(i.areYouSure)&&(t(this).closest(".qfb-conditional").remove(),0===s.get("#qfb-notification-conditionals-wrap").find(".qfb-conditional").length&&n.buildMessageBox(i.noConditionals,"info","qfb-no-conditionals").hide().appendTo(s.get("#qfb-notification-conditionals-wrap")).fadeIn())}),s.get("#qfb-notification-conditionals-wrap").on("click",".qfb-conditional-add-recipient",function(){t(this).closest(".qfb-conditional").find(".qfb-conditional-recipients").append(a.getRecipientHtml()).find("> .qfb-validation-error").remove()}),s.get("#qfb-notification-conditionals-wrap").on("click",".qfb-conditional-add-logic-rule",function(){t(this).closest(".qfb-conditional").find(".qfb-no-logic-rules").remove(),t(this).closest(".qfb-conditional").find(".qfb-logic-rules").append(n.logic.buildLogicRule(n.logic.getNewLogicRule()))}),t("#qfb-add-notification-attachment").click(function(){s.get("#qfb-notification-attachments-wrap").find(".qfb-no-attachments").remove(),a.addAttachment(a.getNewAttachment())}),s.get("#qfb-notification-attachments-wrap").on("click",".qfb-attachment-remove",function(){t(this).closest(".qfb-attachment").remove(),0===s.get("#qfb-notification-attachments-wrap").find(".qfb-attachment").length&&n.buildMessageBox(i.noAttachments,"info","qfb-no-attachments").hide().appendTo(s.get("#qfb-notification-attachments-wrap")).fadeIn()}),s.get("#qfb-notification-attachments-wrap").on("change",".qfb-attachment-source",function(){var e=t(this),i=e.closest(".qfb-attachment"),o=i.find(".qfb-attachment-element").closest(l.subSettingWrap),a=i.find(".qfb-attachment-browse").closest(l.subSettingWrap);switch(e.val()){default:case"media":a.qfbSlideShow(),o.qfbSlideHide();break;case"element":a.qfbSlideHide(),o.qfbSlideShow()}}),s.get("#qfb-notification-attachments-wrap").on("click",".qfb-attachment-medium-remove",function(){t(this).closest(".qfb-attachment-medium").remove()}),n.setupContainerTooltips(s.get("#qfb-notification-settings-inner"))},showSettings:function(e){var o=a.getNotificationById(e);null===o&&(o=t.extend(!0,{},i.notification)),a.editing=o,a.loadSettings(),t("body").css({overflow:"hidden"}),s.get("#qfb-notification-settings").show(),s.get("#qfb-notification-settings-inner").scrollTop(0)},loadSettings:function(){var e,o,c=a.editing;if(s.get("#qfb-notification-settings").find(".qfb-setting").hide(),s.get("#qfb_notification_name").val(a.getValue(c,"name")).closest(l.settingWrap).show(),s.get("#qfb_notification_enabled").prop("checked",a.getValue(c,"enabled")).closest(l.settingWrap).show(),s.get("#qfb_notification_subject").val(a.getValue(c,"subject")).closest(l.settingWrap).show(),l.setSelectVal(s.get("#qfb_notification_format"),a.getValue(c,"format")).closest(l.settingWrap).show(),s.get("#qfb_notification_html").val(a.getValue(c,"html")),s.get("#qfb_notification_auto_format").prop("checked",a.getValue(c,"autoFormat")),s.get("#qfb_notification_padding").val(a.getValue(c,"padding")),s.get("#qfb_notification_text").val(a.getValue(c,"text")),window.tinymce){var r=window.tinymce.get("qfb_notification_html");r&&!r.isHidden()&&r.load(),window.switchEditors&&window.getUserSetting&&window.switchEditors.go("qfb_notification_html",window.getUserSetting("editor")||"tmce")}var f=s.get("#qfb-notification-recipients").empty(),g=a.getValue(c,"recipients");for(e=0,o=g.length;e<o;e++)f.append(a.getRecipientHtml(g[e]));f.closest(l.settingWrap).show(),t("#qfb_notification_conditionals").prop("checked",a.getValue(c,"conditional")).closest(l.settingWrap).show(),s.get("#qfb-notification-conditionals-wrap").empty(),a.buildConditionals(a.getValue(c,"conditionals")),s.get("#qfb-notification-from").find(".qfb-recipient-address").val(a.getValue(c,"from.address")).closest(l.settingWrap).show(),s.get("#qfb-notification-from").find(".qfb-recipient-name").val(a.getValue(c,"from.name")),s.get("#qfb_notification_logic_enabled").prop("checked",a.getValue(c,"logicEnabled")).closest(l.settingWrap).show(),n.logic.buildLogic([{text:i.sendThisNotification,value:"1",selected:a.getValue(c,"logicAction")},{text:i.doNotSendThisNotification,value:"0",selected:!a.getValue(c,"logicAction")}],[{text:i.ifAllOfTheseRulesMatch,value:"all",selected:"all"==a.getValue(c,"logicMatch")},{text:i.ifAnyOfTheseRulesMatch,value:"any",selected:"any"==a.getValue(c,"logicMatch")}],a.getValue(c,"logicRules"),s.get("#qfb-notification-logic")),s.get("#qfb-notification-attachments-wrap").empty(),a.loadAttachments(a.getValue(c,"attachments")),s.get("#qfb-notification-attachments-wrap").closest(l.settingWrap).show(),"undefined"!=typeof c.id?t("#qfb-notification-unique-id").val(n.form.id+"_"+c.id).closest(l.settingWrap).show():t("#qfb-notification-unique-id").val(""),"html"==a.getValue(c,"format")?s.get("#qfb_notification_html").add(s.get("#qfb_notification_auto_format")).add(s.get("#qfb_notification_padding")).closest(l.settingWrap).show():s.get("#qfb_notification_text").closest(l.settingWrap).show(),a.getValue(c,"conditional")&&s.get("#qfb-notification-conditionals-wrap").closest(l.settingWrap).show(),a.getValue(c,"logicEnabled")&&s.get("#qfb-notification-logic").closest(l.settingWrap).show()},updateNotificationListing:function(e,t){e.find(".qfb-notification-name").text(t.name),e.find(".qfb-notification-subject-text").text(t.subject),e.find(".qfb-notification-toggle").prop("checked",t.enabled)},getNotificationHtml:function(){if(window.tinymce){var e=window.tinymce.get("qfb_notification_html");e&&!e.isHidden()&&e.isDirty()&&e.save()}return s.get("#qfb_notification_html").val()},saveSettings:function(){if(!a.validateSettings())return!1;var e,o=a.editing;return o.name=s.get("#qfb_notification_name").val(),o.enabled=s.get("#qfb_notification_enabled").is(":checked"),o.subject=s.get("#qfb_notification_subject").val(),o.format=s.get("#qfb_notification_format").val(),o.html=a.getNotificationHtml(),o.autoFormat=s.get("#qfb_notification_auto_format").is(":checked"),o.padding=s.get("#qfb_notification_padding").val(),o.text=s.get("#qfb_notification_text").val(),o.recipients=[],s.get("#qfb-notification-recipients").find(".qfb-recipient").each(function(){o.recipients.push(a.getRecipientObjectFromValues(t(this)))}),o.conditional=t("#qfb_notification_conditionals").is(":checked"),o.conditionals=[],s.get("#qfb-notification-conditionals-wrap").find(".qfb-conditional").each(function(){o.conditionals.push(a.getConditionalObjectFromValues(t(this)))}),0===o.conditionals.length&&(o.conditional=!1),o.from={address:s.get("#qfb-notification-from").find(".qfb-recipient-address").val(),name:s.get("#qfb-notification-from").find(".qfb-recipient-name").val()},o.logicEnabled=s.get("#qfb_notification_logic_enabled").is(":checked"),o.logicAction="0"!==s.get("#qfb-notification-logic").find(".qfb-logic-action").val(),o.logicMatch=s.get("#qfb-notification-logic").find(".qfb-logic-match").val(),o.logicRules=n.logic.getLogicRules(s.get("#qfb-notification-logic")),o.attachments=[],s.get("#qfb-notification-attachments-wrap").find(".qfb-attachment").each(function(){var e=t(this),i=a.getNewAttachment();i.source=e.find(".qfb-attachment-source").val(),"media"==i.source?e.find(".qfb-attachment-media .qfb-attachment-medium").each(function(){i.media.push(t(this).data("medium"))}):"element"==i.source&&(i.element=e.find(".qfb-attachment-element").val()),o.attachments.push(i)}),"undefined"==typeof o.id?(o.id=n.form.nextNotificationId++,n.form.notifications.push(o),(e=t(i.notificationHtml)).data({id:o.id}),s.get("#qfb-notifications").append(e.hide()),e.qfbSlideShow()):e=s.get("#qfb-notifications").find(".qfb-notification").filter(function(){return t(this).data("id")===o.id}),a.updateNotificationListing(e,o),!0},hideSettings:function(){s.get("#qfb-notifications").find(".qfb-notification").length>0&&t("#qfb-no-notifications").hide(),a.editing=null,t(".qtip").hide(),t("body").css({overflow:""}),s.get("#qfb-notification-settings-inner").find(".qfb-validation-error").remove(),s.get("#qfb-notification-settings").hide()},validateRecipient:function(e,t){var a=e.find(".qfb-recipient-address"),n=a.val(),s="";""===n?s=o.thisFieldIsRequired:l.isValidEmail(n)||"{"==n.charAt(0)&&"}"==n.charAt(n.length-1)?"{"==n.charAt(0)&&"}"==n.charAt(n.length-1)&&l.isValidEmail(n.slice(1,-1))&&(s=i.emailRemoveBrackets):s=o.invalidEmailAddress,s.length&&t.push({scrollTarget:a.closest(".qfb-recipient"),show:function(){l.addValidationError(a.closest(".qfb-settings-column"),s)}})},validateOneValidRecipient:function(e,o){var a=!1;e.find(".qfb-recipient").each(function(){var e=t(this).find(".qfb-recipient-type").val();"to"!=e&&"cc"!=e&&"bcc"!=e||(a=!0)}),a||o.push({scrollTarget:e,show:function(){l.addValidationError(e,i.atLeastOneToCcBccRequired)}})},validateSettings:function(){s.get("#qfb-notification-settings-inner").find(".qfb-validation-error").remove();var e=[];""===s.get("#qfb_notification_name").val()&&e.push({scrollTarget:s.get("#qfb_notification_name").closest(l.settingWrap),show:function(){l.addValidationError(s.get("#qfb_notification_name").closest(l.settingInputWrap),o.thisFieldIsRequired)}}),""===s.get("#qfb_notification_subject").val()&&e.push({scrollTarget:s.get("#qfb_notification_subject").closest(l.settingWrap),show:function(){l.addValidationError(s.get("#qfb_notification_subject").closest(l.settingInputWrap),o.thisFieldIsRequired)}}),"html"==s.get("#qfb_notification_format").val()&&""===a.getNotificationHtml()&&e.push({scrollTarget:t("#wp-qfb_notification_html-wrap").closest(l.settingWrap),show:function(){l.addValidationError(s.get("#qfb_notification_html").closest(l.settingInputWrap),o.thisFieldIsRequired)}}),"text"==s.get("#qfb_notification_format").val()&&""===s.get("#qfb_notification_text").val()&&e.push({scrollTarget:s.get("#qfb_notification_text").closest(l.settingWrap),show:function(){l.addValidationError(s.get("#qfb_notification_text").closest(l.settingInputWrap),o.thisFieldIsRequired)}}),s.get("#qfb-notification-recipients").find(".qfb-recipient").each(function(){a.validateRecipient(t(this),e)}),a.validateOneValidRecipient(s.get("#qfb-notification-recipients"),e),s.get("#qfb-notification-conditionals-wrap").find(".qfb-conditional").each(function(){var i=t(this);i.find(".qfb-recipient").each(function(){a.validateRecipient(t(this),e)}),a.validateOneValidRecipient(i.find(".qfb-conditional-recipients"),e)}),a.validateRecipient(s.get("#qfb-notification-from").find(".qfb-recipient"),e),s.get("#qfb-notification-attachments-wrap").find(".qfb-attachment").each(function(){var a=t(this),n=a.find(".qfb-attachment-source").val();if("media"==n){var c=a.find(".qfb-attachment-media");0===c.find(".qfb-attachment-medium").length&&e.push({scrollTarget:s.get("#qfb-notification-attachments-wrap"),show:function(){l.addValidationError(c.closest(l.subSettingInputWrap),i.selectOneFile)}})}else if("element"==n){var r=a.find(".qfb-attachment-element");""===r.val()&&e.push({scrollTarget:s.get("#qfb-notification-attachments-wrap"),show:function(){l.addValidationError(r.closest(l.subSettingInputWrap),o.thisFieldIsRequired)}})}});var n=0,c=e.length;if(c>0){for(;n<c;n++)e[n].show();l.scrollTo(e[0].scrollTarget,s.get("#qfb-notification-settings-inner"))}return 0===c},duplicate:function(e){var o=a.getNotificationById(e);if(null!==o){var l=t.extend(!0,{},o,{id:n.form.nextNotificationId++});n.form.notifications.push(l);var c=t(i.notificationHtml);c.data({id:l.id}),a.updateNotificationListing(c,l),s.get("#qfb-notifications").append(c.hide()),c.qfbSlideShow()}},getNotificationById:function(e){if(!e)return null;for(var t=0;t<n.form.notifications.length;t++)if(e==n.form.notifications[t].id)return n.form.notifications[t];return null},getRecipientHtml:function(e){void 0===e&&(e={type:"to",address:"",name:""});var o=t(i.recipientHtml),a=n.uniqid("qfb-"),s=n.uniqid("qfb-");return l.setSelectVal(o.find(".qfb-recipient-type"),e.type),o.find(".qfb-recipient-address").val(e.address).attr("id",a).siblings(".qfb-insert-variable").data("target-id",a),o.find(".qfb-recipient-name").val(e.name).attr("id",s).siblings(".qfb-insert-variable").data("target-id",s),o},deleteRecipient:function(e){e.closest(".qfb-recipient").remove()},checkInvalidLogic:function(){for(var e=0;e<n.form.notifications.length;e++){for(var t=n.form.notifications[e],i=0;i<t.conditionals.length;i++)t.conditionals[i].logicRules=n.logic.removeInvalidLogicRules(t.conditionals[i].logicRules);t.logicRules=n.logic.removeInvalidLogicRules(t.logicRules)}},buildConditionals:function(e){var t=0,o=e.length;if(o>0)for(;t<o;t++)s.get("#qfb-notification-conditionals-wrap").append(a.buildConditional(e[t]));else s.get("#qfb-notification-conditionals-wrap").html(n.buildMessageBox(i.noConditionals,"info","qfb-no-conditionals"))},buildConditional:function(e){if("object"!=typeof e)return null;var o=t('<div class="qfb-conditional qfb-box">');o.append(t('<div class="qfb-conditional-top">').append(t('<span class="qfb-mini-button qfb-button-green qfb-conditional-add-recipient">').text(i.addRecipient).prepend('<i class="mdi mdi-add_circle_outline">'),t('<span class="qfb-conditional-duplicate">').append('<i class="mdi mdi-content_copy">'),t('<span class="qfb-conditional-delete fa fa-trash">')));for(var s=t('<div class="qfb-conditional-recipients qfb-cf">'),c=0;c<e.recipients.length;c++)s.append(a.getRecipientHtml(e.recipients[c]));o.append(s);var r=t('<div class="qfb-logic qfb-cf">');if(o.append(r),n.logic.sources.length>0){var f=t('<div class="qfb-logic-top qfb-cf">'),g=t('<select class="qfb-logic-match">');g.append(t("<option>",{text:i.sendToTheseRecipientsIfAll,value:"all"})),g.append(t("<option>",{text:i.sendToTheseRecipientsIfAny,value:"any"})),f.append(g,t('<span class="qfb-button-green qfb-conditional-add-logic-rule">').text(i.addLogicRule).prepend('<i class="mdi mdi-add_circle_outline">')),r.append(f),l.setSelectVal(g,e.logicMatch);var b=t('<div class="qfb-logic-rules qfb-cf">');if(e.logicRules.length)for(var d=0;d<e.logicRules.length;d++)b.append(n.logic.buildLogicRule(e.logicRules[d]));else b.append(n.logic.getNoLogicRulesMessage());r.append(b)}else r.html(n.buildMessageBox(i.noLogicElements,"warning"));return o},getNewConditional:function(){return{recipients:[{type:"to",address:"",name:""}],logicAction:!0,logicMatch:"all",logicRules:[]}},getConditionalObjectFromValues:function(e){var i={};return i.recipients=[],e.find(".qfb-conditional-recipients").find(".qfb-recipient").each(function(){i.recipients.push(a.getRecipientObjectFromValues(t(this)))}),i.logicAction=!0,i.logicMatch=e.find(".qfb-logic-match").val(),i.logicRules=[],e.find(".qfb-logic-rule").each(function(){i.logicRules.push(n.logic.getLogicRuleObjectFromValues(t(this)))}),i},getRecipientObjectFromValues:function(e){return{type:e.find(".qfb-recipient-type").val(),address:e.find(".qfb-recipient-address").val(),name:e.find(".qfb-recipient-name").val()}},duplicateConditional:function(e){e.after(a.buildConditional(a.getConditionalObjectFromValues(e)))},getNewAttachment:function(){return{source:"media",element:"",media:[]}},getAttachmentMediumHtml:function(e){var o=t('<div class="qfb-attachment-medium qfb-box">').data("medium",e);return e.icon&&o.append(t('<span class="qfb-attachment-medium-icon">').append(t("<img>").attr("src",e.icon))),o.append(t('<span class="qfb-attachment-medium-name">').text(e.filename)),o.append(t('<span class="qfb-attachment-medium-filesize">').text(e.filesizeHumanReadable)),o.append(t('<span class="qfb-attachment-medium-remove fa fa-trash"></span>').attr("title",i.remove)),o},addAttachment:function(e){var o=t(i.attachmentHtml),c=o.find(".qfb-attachment-source"),r=o.find(".qfb-attachment-browse").closest(l.subSettingWrap),f=o.find(".qfb-attachment-element"),g=f.closest(l.subSettingWrap),b=o.find(".qfb-attachment-media");if(f.append(t("<option>",{text:i.selectElement,value:""})),a.attachmentSources.length)for(var d=0,_=a.attachmentSources.length;d<_;d++)f.append(t("<option>",{text:n.elements.getShortenedAdminLabel(a.attachmentSources[d]),value:a.attachmentSources[d].id}));else f.append(t("<option>",{text:i.noAttachmentSourcesFound,value:"",disabled:!0}));switch(t.each(e.media,function(e,t){b.append(a.getAttachmentMediumHtml(t))}),e.source){default:case"media":r.show(),g.hide();break;case"element":r.hide(),g.show()}l.setSelectVal(c,e.source),l.setSelectVal(f,e.element),o.find(".qfb-attachment-browse").qfbMediaBrowser({mediaOptions:{title:i.selectFiles,multiple:!0},callback:function(e){var i=e.toJSON(),o=[];t.each(i,function(e,t){var i={id:t.id,filename:t.filename,filesizeHumanReadable:t.filesizeHumanReadable,icon:t.icon};o.push(a.getAttachmentMediumHtml(i))}),o.length&&b.append(o)}}),s.get("#qfb-notification-attachments-wrap").append(o)},addAttachmentSource:function(e){-1!==t.inArray(e.type,i.attachmentSourceTypes)&&a.attachmentSources.push(e)},removeAttachmentSource:function(e){for(var t=a.attachmentSources.length;t--;)a.attachmentSources[t].id==e.id&&a.attachmentSources.splice(t,1)},loadAttachments:function(e){var t=0,o=e.length;if(o>0)for(;t<o;t++)a.addAttachment(e[t]);else s.get("#qfb-notification-attachments-wrap").html(n.buildMessageBox(i.noAttachments,"info","qfb-no-attachments"))},checkInvalidAttachments:function(){for(var e=0;e<n.form.notifications.length;e++)for(var t=n.form.notifications[e].attachments,i=t.length;i--;){var o=t[i];if("element"==o.source){null===n.elements.getElementById(o.element)&&t.splice(i,1)}}},getValue:function(e,t){return l.getProperty(e,t,l.getProperty(i.notification,t))}},e.builder.notifications=a,e}(quform=function(e,t,i,o){"use strict";var a,l=e.core,n=e.builder,s=l.cache;return a={onWindowLoad:function(){s.get("#qfb-add-style").click(function(){a.addStyle({type:"",css:""})}),s.get("#qfb-styles").on("click",".qfb-style-action-settings",function(){var e=t(this).closest(".qfb-style"),i=s.get("#qfb-style-settings").closest(".qfb-style");i.length?i[0]===e[0]?(a.saveStyleSettings(e),a.hideStyleSettings(e)):(a.saveStyleSettings(i),a.hideStyleSettings(i,!0,function(){a.showStyleSettings(e)})):a.showStyleSettings(e)}),s.get("#qfb-styles").on("click",".qfb-style-action-remove",function(){var e=t(this).closest(".qfb-style");s.get("#qfb-style-settings").closest(".qfb-style")[0]===e[0]?a.hideStyleSettings(e,!0,function(){a.removeStyle(e)}):a.removeStyle(e)}),s.get("#qfb_style_type").on("change",function(){var e="",t=s.get("#qfb_style_type").val();l.isNonEmptyString(t)&&i.styles[t]&&(e=i.styles[t].name),s.get("#qfb_style_type").closest(".qfb-style").find(".qfb-style-title").text(e)}),s.get("#qfb-add-global-style").click(function(){a.addGlobalStyle({type:"",css:""})}),s.get("#qfb-global-styles").on("click",".qfb-global-style-action-settings",function(){var e=t(this).closest(".qfb-global-style"),i=s.get("#qfb-global-style-settings").closest(".qfb-global-style");i.length?i[0]===e[0]?(a.saveGlobalStyleSettings(e),a.hideGlobalStyleSettings(e)):(a.saveGlobalStyleSettings(i),a.hideGlobalStyleSettings(i,function(){a.showGlobalStyleSettings(e)})):a.showGlobalStyleSettings(e)}),s.get("#qfb-global-styles").on("click",".qfb-global-style-action-remove",function(){var e=t(this).closest(".qfb-global-style");s.get("#qfb-global-style-settings").closest(".qfb-global-style")[0]===e[0]?a.hideGlobalStyleSettings(e,function(){a.removeGlobalStyle(e)}):a.removeGlobalStyle(e)}),s.get("#qfb_global_style_type").on("change",function(){var e="",t=s.get("#qfb_global_style_type").val();l.isNonEmptyString(t)&&i.globalStyles[t]&&(e=i.globalStyles[t].name),s.get("#qfb_global_style_type").closest(".qfb-global-style").find(".qfb-global-style-title").text(e)}),t.fn.select2&&s.get("#qfb_style_type").add(s.get("#qfb_global_style_type")).select2({theme:"qfb",language:{noResults:function(){return o.noResultsFound}}}),s.get(".qfb-css-helper").click(function(){var e=t(this),i=e.closest(l.settingWrap).find("textarea"),o=e.data("css");i.length&&l.isNonEmptyString(o)&&(l.isNonEmptyString(i.val())&&(o="\n"+o),n.insertAtCursor(i[0],o))})},getStyleHtml:function(e){var o=t(i.styleHtml);return o.data("style",e),l.isNonEmptyString(e.type)&&i.styles[e.type]&&o.find(".qfb-style-title").text(i.styles[e.type].name),o},loadStyles:function(){var e=n.elements.editing,o=0,c=(e.styles||[]).length,r=i.visibleStyles[e.type]||[];if(s.get("#qfb-styles").empty(),0===c)s.get("#qfb-styles-empty").show();else{s.get("#qfb-styles-empty").hide();for(var f=[];o<c;o++)f.push(a.getStyleHtml(e.styles[o]));s.get("#qfb-styles").append(f)}var g=[t("<option>",{value:"",text:i.pleaseSelect})];_.each(i.styles,function(e,i){-1!==t.inArray(i,r)&&g.push(t("<option>",{value:i,text:e.name}))}),s.get("#qfb_style_type").html(g).trigger("change.select2"),g.length&&s.get("#qfb-styles").add("#qfb_style_type").add("#qfb_style_css").closest(l.settingWrap).show()},addStyle:function(e){var t=a.getStyleHtml(e);s.get("#qfb-styles-empty").qfbSlideHide(function(){var e=s.get("#qfb-style-settings").closest(".qfb-style");e.length?(a.saveStyleSettings(e),a.hideStyleSettings(e,!0,function(){t.hide().appendTo(s.get("#qfb-styles")).qfbSlideShow(function(){a.showStyleSettings(t)})})):t.hide().appendTo(s.get("#qfb-styles")).qfbSlideShow(function(){a.showStyleSettings(t)})})},showStyleSettings:function(e){e.append(s.get("#qfb-style-settings").hide()),a.loadStyleSettings(e),s.get("#qfb-style-settings").qfbSlideShow()},hideStyleSettings:function(e,i,o){var l=function(){a.resetStyleSettings(),t.isFunction(o)&&o()};!1===i?l():s.get("#qfb-style-settings").qfbSlideHide(l)},loadStyleSettings:function(e){var t=e.data("style");l.setSelectVal(s.get("#qfb_style_type"),l.getProperty(t,"type","")).trigger("change.select2"),s.get("#qfb_style_css").val(l.getProperty(t,"css","")),l.doAction("loadStyleSettings",t,e)},saveStyleSettings:function(e){var t=e.data("style");t.type=s.get("#qfb_style_type").val(),t.css=s.get("#qfb_style_css").val(),l.doAction("saveStyleSettings",t,e)},removeStyle:function(e){e.qfbSlideHide(function(){e.remove(),0===s.get("#qfb-styles").find(".qfb-style").length&&s.get("#qfb-styles-empty").qfbSlideShow()})},saveStyles:function(){var e=n.elements.editing,i=s.get("#qfb-style-settings").closest(".qfb-style");i.length&&(a.saveStyleSettings(i),a.hideStyleSettings(i,!1)),e.styles=[],s.get("#qfb-styles").find(".qfb-style").each(function(){e.styles.push(t(this).data("style"))})},resetStyleSettings:function(){s.get("#qfb-style-settings").hide().prependTo(s.get("#qfb-styles").parent())},getGlobalStyleHtml:function(e){var o=t(i.globalStyleHtml);return o.data("style",e),l.isNonEmptyString(e.type)&&i.globalStyles[e.type]&&o.find(".qfb-global-style-title").text(i.globalStyles[e.type].name),o},addGlobalStyle:function(e){var t=a.getGlobalStyleHtml(e);s.get("#qfb-global-styles-empty").qfbSlideHide(function(){var e=s.get("#qfb-global-style-settings").closest(".qfb-global-style");e.length?(a.saveGlobalStyleSettings(e),a.hideGlobalStyleSettings(e,function(){t.hide().appendTo(s.get("#qfb-global-styles")).qfbSlideShow(function(){a.showGlobalStyleSettings(t)})})):t.hide().appendTo(s.get("#qfb-global-styles")).qfbSlideShow(function(){a.showGlobalStyleSettings(t)})})},showGlobalStyleSettings:function(e){e.append(s.get("#qfb-global-style-settings").hide()),a.loadGlobalStyleSettings(e),s.get("#qfb-global-style-settings").qfbSlideShow()},hideGlobalStyleSettings:function(e,i){s.get("#qfb-global-style-settings").qfbSlideHide(function(){s.get("#qfb-global-style-settings").hide().prependTo(s.get("#qfb-global-styles").parent()),t.isFunction(i)&&i()})},loadGlobalStyleSettings:function(e){var t=e.data("style");l.setSelectVal(s.get("#qfb_global_style_type"),l.getProperty(t,"type","")).trigger("change.select2"),s.get("#qfb_global_style_css").val(l.getProperty(t,"css","")),l.doAction("loadGlobalStyleSettings",t,e)},saveGlobalStyleSettings:function(e){var t=e.data("style");t.type=s.get("#qfb_global_style_type").val(),t.css=s.get("#qfb_global_style_css").val(),l.doAction("saveGlobalStyleSettings",t,e)},removeGlobalStyle:function(e){e.qfbSlideHide(function(){e.remove(),0===s.get("#qfb-global-styles").find(".qfb-global-style").length&&s.get("#qfb-global-styles-empty").qfbSlideShow()})},updateGlobalStyles:function(){var e=s.get("#qfb-global-style-settings").closest(".qfb-global-style");e.length&&a.saveGlobalStyleSettings(e),n.form.styles=[],s.get("#qfb-global-styles").find(".qfb-global-style").each(function(){n.form.styles.push(t(this).data("style"))})}},e.builder.styles=a,e}(quform=function(e,t,i){"use strict";var o,a=e.core,l=e.builder,n=a.cache;return o={init:function(){n.get("#qfb-validators").on("click",".qfb-validator-action-settings",function(){var e=t(this).closest(".qfb-validator"),i=n.get("#qfb-validator-settings").closest(".qfb-validator");i.length?i[0]===e[0]?(o.saveValidatorSettings(e),o.hideValidatorSettings(e)):(o.saveValidatorSettings(i),o.hideValidatorSettings(i,!0,function(){o.showValidatorSettings(e)})):o.showValidatorSettings(e)}),n.get("#qfb-validators").on("click",".qfb-validator-action-remove",function(){var e=t(this).closest(".qfb-validator");n.get("#qfb-validator-settings").closest(".qfb-validator")[0]===e[0]?o.hideValidatorSettings(e,!0,function(){o.removeValidator(e)}):o.removeValidator(e)}),n.get(".qfb-add-validator").click(function(){var e=t(this).data("type");a.isNonEmptyString(e)&&i.validators[e]&&i.validators[e].config&&(t(".qtip").hide(),o.addValidator(t.extend(!0,{},i.validators[e].config)))})},getValidatorHtml:function(e){var o=t(i.validatorHtml);return o.data("validator",e).find(".qfb-validator-title").text(i.validators[e.type].name),o},loadValidators:function(){var e=l.elements.editing,s=0,c=(l.elements.getValue(e,"validators")||[]).length,r=i.visibleValidators[e.type]||[];if(n.get(".qfb-add-validator").hide(),n.get("#qfb-validators").empty(),0===c)n.get("#qfb-validators-empty").show();else{n.get("#qfb-validators-empty").hide();for(var f=[];s<c;s++)f.push(o.getValidatorHtml(e.validators[s]));n.get("#qfb-validators").append(f)}n.get(".qfb-add-validator").filter(function(){return-1!==t.inArray(t(this).data("type"),r)}).show().length>0?n.get("#qfb-validators").closest(a.settingWrap).show():n.get("#qfb-validators").closest(a.settingWrap).hide()},addValidator:function(e){var t=o.getValidatorHtml(e);n.get("#qfb-validators-empty").qfbSlideHide(function(){t.hide().appendTo(n.get("#qfb-validators")).qfbSlideShow()})},showValidatorSettings:function(e){e.append(n.get("#qfb-validator-settings").hide()),o.loadValidatorSettings(e),n.get("#qfb-validator-settings").qfbSlideShow()},hideValidatorSettings:function(e,i,o){var a=function(){n.get("#qfb-validator-settings").prependTo(n.get("#qfb-validators").parent()),t.isFunction(o)&&o()};!1===i?(n.get("#qfb-validator-settings").hide(),a()):n.get("#qfb-validator-settings").qfbSlideHide(a)},loadValidatorSettings:function(e){var i=e.data("validator");switch(n.get("#qfb-validator-settings").find(".qfb-setting").hide(),i.type){case"alpha":t("#qfb_v_allow_white_space").prop("checked",o.getValue(i,"allowWhiteSpace")).closest(a.settingWrap).show(),t("#qfb_v_message_notAlpha").val(o.getValue(i,"messages.notAlpha")).closest(a.settingWrap).show();break;case"alphaNumeric":t("#qfb_v_allow_white_space").prop("checked",o.getValue(i,"allowWhiteSpace")).closest(a.settingWrap).show(),t("#qfb_v_message_notAlphaNumeric").val(o.getValue(i,"messages.notAlphaNumeric")).closest(a.settingWrap).show();break;case"digits":t("#qfb_v_allow_white_space").prop("checked",o.getValue(i,"allowWhiteSpace")).closest(a.settingWrap).show(),t("#qfb_v_message_notDigits").val(o.getValue(i,"messages.notDigits")).closest(a.settingWrap).show();break;case"duplicate":t("#qfb_v_message_isDuplicate").val(o.getValue(i,"messages.isDuplicate")).closest(a.settingWrap).show();break;case"email":t("#qfb_v_message_emailAddressInvalidFormat").val(o.getValue(i,"messages.emailAddressInvalidFormat")).closest(a.settingWrap).show();break;case"greaterThan":t("#qfb_v_greater_than_min").val(o.getValue(i,"min")).closest(a.settingWrap).show(),t("#qfb_v_greater_than_inclusive").prop("checked",o.getValue(i,"inclusive")).closest(a.settingWrap).show(),t("#qfb_v_message_notGreaterThan").val(o.getValue(i,"messages.notGreaterThan")).closest(a.settingWrap).show(),t("#qfb_v_message_notGreaterThanInclusive").val(o.getValue(i,"messages.notGreaterThanInclusive")).closest(a.settingWrap).show();break;case"identical":t("#qfb_v_token").val(o.getValue(i,"token")).closest(a.settingWrap).show(),t("#qfb_v_message_notSame").val(o.getValue(i,"messages.notSame")).closest(a.settingWrap).show();break;case"inArray":t("#qfb_v_haystack").val(o.getValue(i,"haystack").join("\n")).closest(a.settingWrap).show(),t("#qfb_v_in_array_invert").prop("checked",o.getValue(i,"invert")).closest(a.settingWrap).show(),t("#qfb_v_message_notInArray").val(o.getValue(i,"messages.notInArray")).closest(a.settingWrap).show();break;case"length":t("#qfb_v_length_min").val(o.getValue(i,"min")).closest(a.settingWrap).show(),t("#qfb_v_length_max").val(o.getValue(i,"max")).closest(a.settingWrap).show(),t("#qfb_v_message_lengthTooShort").val(o.getValue(i,"messages.lengthTooShort")).closest(a.settingWrap).show(),t("#qfb_v_message_lengthTooLong").val(o.getValue(i,"messages.lengthTooLong")).closest(a.settingWrap).show();break;case"lessThan":t("#qfb_v_less_than_max").val(o.getValue(i,"max")).closest(a.settingWrap).show(),t("#qfb_v_less_than_inclusive").prop("checked",o.getValue(i,"inclusive")).closest(a.settingWrap).show(),t("#qfb_v_message_notLessThan").val(o.getValue(i,"messages.notLessThan")).closest(a.settingWrap).show(),t("#qfb_v_message_notLessThanInclusive").val(o.getValue(i,"messages.notLessThanInclusive")).closest(a.settingWrap).show();break;case"regex":t("#qfb_v_pattern").val(o.getValue(i,"pattern")).closest(a.settingWrap).show(),t("#qfb_v_invert").prop("checked",o.getValue(i,"invert")).closest(a.settingWrap).show(),t("#qfb_v_message_regexNotMatch").val(o.getValue(i,"messages.regexNotMatch")).closest(a.settingWrap).show()}t("#qfb-v-error-message-headings").show(),a.doAction("loadValidatorSettings",i,e)},saveValidatorSettings:function(e){var i=e.data("validator");switch(i.type){case"alpha":i.allowWhiteSpace=t("#qfb_v_allow_white_space").is(":checked"),i.messages={notAlpha:t("#qfb_v_message_notAlpha").val()};break;case"alphaNumeric":i.allowWhiteSpace=t("#qfb_v_allow_white_space").is(":checked"),i.messages={notAlphaNumeric:t("#qfb_v_message_notAlphaNumeric").val()};break;case"digits":i.allowWhiteSpace=t("#qfb_v_allow_white_space").is(":checked"),i.messages={notDigits:t("#qfb_v_message_notDigits").val()};break;case"duplicate":i.messages={isDuplicate:t("#qfb_v_message_isDuplicate").val()};break;case"email":i.messages={emailAddressInvalidFormat:t("#qfb_v_message_emailAddressInvalidFormat").val()};break;case"greaterThan":i.min=t("#qfb_v_greater_than_min").val(),i.inclusive=t("#qfb_v_greater_than_inclusive").is(":checked"),i.messages={notGreaterThan:t("#qfb_v_message_notGreaterThan").val(),notGreaterThanInclusive:t("#qfb_v_message_notGreaterThanInclusive").val()};break;case"identical":i.token=t("#qfb_v_token").val(),i.messages={notSame:t("#qfb_v_message_notSame").val()};break;case"inArray":i.haystack=t("#qfb_v_haystack").val().split("\n"),i.invert=t("#qfb_v_in_array_invert").is(":checked"),i.messages={notInArray:t("#qfb_v_message_notInArray").val()};break;case"length":i.min=t("#qfb_v_length_min").val(),i.max=t("#qfb_v_length_max").val(),i.messages={lengthTooShort:t("#qfb_v_message_lengthTooShort").val(),lengthTooLong:t("#qfb_v_message_lengthTooLong").val()};break;case"lessThan":i.max=t("#qfb_v_less_than_max").val(),i.inclusive=t("#qfb_v_less_than_inclusive").is(":checked"),i.messages={notLessThan:t("#qfb_v_message_notLessThan").val(),notLessThanInclusive:t("#qfb_v_message_notLessThanInclusive").val()};break;case"regex":i.pattern=t("#qfb_v_pattern").val(),i.invert=t("#qfb_v_invert").is(":checked"),i.messages={regexNotMatch:t("#qfb_v_message_regexNotMatch").val()}}a.doAction("saveValidatorSettings",i,e)},removeValidator:function(e){e.qfbSlideHide(function(){e.remove(),0===n.get("#qfb-validators").find(".qfb-validator").length&&n.get("#qfb-validators-empty").qfbSlideShow()})},saveValidators:function(){var e=l.elements.editing,i=n.get("#qfb-validator-settings").closest(".qfb-validator");i.length&&(o.saveValidatorSettings(i),o.hideValidatorSettings(i,!1)),e.validators=[],n.get("#qfb-validators").find(".qfb-validator").each(function(){e.validators.push(t(this).data("validator"))})},resetValidatorSettings:function(){n.get("#qfb-validator-settings").hide().prependTo(n.get("#qfb-validators").parent())},getValue:function(e,t){return a.getProperty(e,t,a.getProperty(i.validators[e.type].config,t))}},e.builder.validators=o,e}(quform=function(e,t,i){"use strict";var o,a=e.core,l=e.builder,n=a.cache;return o={init:function(){n.get("#qfb-filters").on("click",".qfb-filter-action-settings",function(){var e=t(this).closest(".qfb-filter"),i=n.get("#qfb-filter-settings").closest(".qfb-filter");i.length?i[0]===e[0]?(o.saveFilterSettings(e),o.hideFilterSettings(e)):(o.saveFilterSettings(i),o.hideFilterSettings(i,!0,function(){o.showFilterSettings(e)})):o.showFilterSettings(e)}),n.get("#qfb-filters").on("click",".qfb-filter-action-remove",function(){var e=t(this).closest(".qfb-filter");n.get("#qfb-filter-settings").closest(".qfb-filter")[0]===e[0]?o.hideFilterSettings(e,!0,function(){o.removeFilter(e)}):o.removeFilter(e)}),n.get(".qfb-add-filter").click(function(){var e=t(this).data("type");a.isNonEmptyString(e)&&i.filters[e]&&i.filters[e].config&&(t(".qtip").hide(),o.addFilter(t.extend(!0,{},i.filters[e].config)))})},getFilterHtml:function(e){var o=t(i.filterHtml);return o.data("filter",e).find(".qfb-filter-title").text(i.filters[e.type].name),"trim"==e.type&&o.find(".qfb-filter-action-settings").hide(),o},loadFilters:function(){var e=l.elements.editing,s=0,c=(l.elements.getValue(e,"filters")||[]).length,r=i.visibleFilters[e.type]||[];if(n.get(".qfb-add-filter").hide(),n.get("#qfb-filters").empty(),0===c)n.get("#qfb-filters-empty").show();else{n.get("#qfb-filters-empty").hide();for(var f=[];s<c;s++)f.push(o.getFilterHtml(e.filters[s]));n.get("#qfb-filters").append(f)}n.get(".qfb-add-filter").filter(function(){return-1!==t.inArray(t(this).data("type"),r)}).show().length>0?n.get("#qfb-filters").closest(a.settingWrap).show():n.get("#qfb-filters").closest(a.settingWrap).hide()},addFilter:function(e){var t=o.getFilterHtml(e);n.get("#qfb-filters-empty").qfbSlideHide(function(){t.hide().appendTo(n.get("#qfb-filters")).qfbSlideShow()})},showFilterSettings:function(e){e.append(n.get("#qfb-filter-settings").hide()),o.loadFilterSettings(e),n.get("#qfb-filter-settings").qfbSlideShow()},hideFilterSettings:function(e,i,o){var a=function(){n.get("#qfb-filter-settings").prependTo(n.get("#qfb-filters").parent()),t.isFunction(o)&&o()};!1===i?(n.get("#qfb-filter-settings").hide(),a()):n.get("#qfb-filter-settings").qfbSlideHide(a)},loadFilterSettings:function(e){var i=e.data("filter");switch(n.get("#qfb-filter-settings").find(".qfb-setting").hide(),i.type){case"alpha":case"alphaNumeric":case"digits":t("#qfb_f_allow_white_space").prop("checked",o.getValue(i,"allowWhiteSpace")).closest(a.settingWrap).show();break;case"stripTags":t("#qfb_f_allowable_tags").val(o.getValue(i,"allowableTags")).closest(a.settingWrap).show();break;case"regex":t("#qfb_f_pattern").val(o.getValue(i,"pattern")).closest(a.settingWrap).show()}a.doAction("loadFilterSettings",i,e)},saveFilterSettings:function(e){var i=e.data("filter");switch(i.type){case"alpha":case"alphaNumeric":case"digits":i.allowWhiteSpace=t("#qfb_f_allow_white_space").is(":checked");break;case"stripTags":i.allowableTags=t("#qfb_f_allowable_tags").val();break;case"regex":i.pattern=t("#qfb_f_pattern").val()}a.doAction("saveFilterSettings",i,e)},removeFilter:function(e){e.qfbSlideHide(function(){e.remove(),0===n.get("#qfb-filters").find(".qfb-filter").length&&n.get("#qfb-filters-empty").qfbSlideShow()})},saveFilters:function(){var e=l.elements.editing,i=n.get("#qfb-filter-settings").closest(".qfb-filter");i.length&&(o.saveFilterSettings(i),o.hideFilterSettings(i,!1)),e.filters=[],n.get("#qfb-filters").find(".qfb-filter").each(function(){e.filters.push(t(this).data("filter"))})},resetFilterSettings:function(){n.get("#qfb-filter-settings").hide().prependTo(n.get("#qfb-filters").parent())},getValue:function(e,t){return a.getProperty(e,t,a.getProperty(i.filters[e.type].config,t))}},e.builder.filters=o,e}(quform=function(e,t,i){"use strict";var o,a=e.core,l=e.builder;return o={sources:[],addSource:function(e){-1!==t.inArray(e.type,i.logicSourceTypes)&&o.sources.push(e)},removeSource:function(e){for(var t=o.sources.length;t--;)o.sources[t].id==e.id&&o.sources.splice(t,1)},buildLogic:function(e,a,n,s){if(0===l.logic.sources.length||1===l.logic.sources.length&&null!==l.elements.editing&&l.logic.sources[0].id==l.elements.editing.id)s.html(l.buildMessageBox(i.noLogicElements,"warning"));else{s.empty();var c=t('<div class="qfb-logic-top qfb-settings-row">'),r=t('<div class="qfb-settings-column">'),f=t('<div class="qfb-settings-column">');if(e.length){c.addClass("qfb-settings-row-2");for(var g=t('<select class="qfb-logic-action">'),b=0;b<e.length;b++)g.append(t("<option>",e[b]));c.append(r.append(g))}var d=t('<select class="qfb-logic-match">');for(b=0;b<a.length;b++)d.append(t("<option>",a[b]));c.append(f.append(d)),s.append(c);var _=t('<div class="qfb-logic-rules qfb-cf">');if(n.length)for(var p=0;p<n.length;p++)_.append(o.buildLogicRule(n[p]));else _.append(o.getNoLogicRulesMessage());s.append(_)}},buildLogicRule:function(e){if(0===l.logic.sources.length||"object"!=typeof e||null!==l.elements.editing&&1===l.logic.sources.length&&l.logic.sources[0].id==l.elements.editing.id)return null;for(var n=t(i.logicRuleHtml).data("rule",e),s=t('<select class="qfb-logic-rule-element">'),c=0;c<l.logic.sources.length;c++)null!==l.elements.editing&&l.logic.sources[c].id==l.elements.editing.id||s.append(t("<option>",{text:l.elements.getShortenedAdminLabel(l.logic.sources[c]),value:l.logic.sources[c].id}));a.setSelectVal(s,e.elementId),n.find(".qfb-logic-rule-column-element").html(s);var r=t('<select class="qfb-logic-rule-operator">');return r.append(t("<option>",{text:i.is,value:"eq"})),r.append(t("<option>",{text:i.isNot,value:"neq"})),r.append(t("<option>",{text:i.isEmpty,value:"empty"})),r.append(t("<option>",{text:i.isNotEmpty,value:"not_empty"})),r.append(t("<option>",{text:i.greaterThan,value:"gt"})),r.append(t("<option>",{text:i.lessThan,value:"lt"})),r.append(t("<option>",{text:i.contains,value:"contains"})),r.append(t("<option>",{text:i.startsWith,value:"starts_with"})),r.append(t("<option>",{text:i.endsWith,value:"ends_with"})),a.setSelectVal(r,e.operator),n.find(".qfb-logic-rule-column-operator").html(r),n.find(".qfb-logic-rule-column-value").html(o.buildLogicRuleValues(s.val(),e)),n.on("change",".qfb-logic-rule-element, .qfb-logic-rule-operator",function(){var e={elementId:n.find(".qfb-logic-rule-element").val(),operator:n.find(".qfb-logic-rule-operator").val(),value:"",optionId:null};n.find(".qfb-logic-rule-column-value").html(o.buildLogicRuleValues(s.val(),e))}),n.find(".qfb-small-add-button").click(function(){t(this).closest(".qfb-logic-rule").after(o.buildLogicRule(o.getNewLogicRule()))}),n.find(".qfb-small-remove-button").click(function(){var e=t(this).closest(".qfb-logic-rules");t(this).closest(".qfb-logic-rule").remove(),0===e.find(".qfb-logic-rule").length&&o.getNoLogicRulesMessage().hide().appendTo(e).fadeIn()}),n},buildLogicRuleValues:function(e,n){var s,c=l.elements.getElementById(e);if("empty"===n.operator||"not_empty"===n.operator)s=t('<input class="qfb-logic-rule-value" type="hidden">');else if("select"!==c.type&&"radio"!==c.type&&"checkbox"!==c.type&&"multiselect"!==c.type||"eq"!==n.operator&&"neq"!==n.operator)s=t('<input class="qfb-logic-rule-value" type="text">').attr("placeholder",i.enterValue).val(n.value);else{var r=0;for(s=t('<select class="qfb-logic-rule-value">');r<c.options.length;r++)if("select"!==c.type&&"multiselect"!==c.type||"undefined"==typeof c.options[r].options)s.append(t("<option>",{text:o.getShortenedOptionLabel(c.options[r]),value:c.options[r].id}));else{for(var f=t("<optgroup>",{label:l.shorten(c.options[r].label)}),g=0;g<c.options[r].options.length;g++)f.append(t("<option>",{text:o.getShortenedOptionLabel(c.options[r].options[g]),value:c.options[r].options[g].id}));s.append(f)}a.setSelectVal(s,n.optionId)}return s},getShortenedOptionLabel:function(e){return e.label.length>0?l.shorten(e.label):l.shorten(e.value)},getLogicRules:function(e){var i=[];return e.find(".qfb-logic-rule").each(function(){i.push(o.getLogicRuleObjectFromValues(t(this)))}),i},getLogicRuleObjectFromValues:function(e){var t=e.find(".qfb-logic-rule-value"),i=e.find(".qfb-logic-rule-element").val(),o=t.val(),a=null;if(t.is("select")){var n=l.elements.getElementById(i);if(n){var s=l.options.getElementOptionById(n,o);s&&(a=o,o=s.value)}}return{elementId:i,operator:e.find(".qfb-logic-rule-operator").val(),optionId:a,value:o}},getNewLogicRule:function(){return{elementId:"",operator:"eq",value:"",optionId:null}},getNoLogicRulesMessage:function(){return l.buildMessageBox(i.noLogicRules,"info","qfb-no-logic-rules")},checkInvalidLogic:function(){l.elements.checkInvalidLogic(),l.notifications.checkInvalidLogic(),l.confirmations.checkInvalidLogic()},removeInvalidLogicRules:function(e){for(var t=e.length;t--;){var i=l.elements.getElementById(e[t].elementId);if(null!==i){if(("eq"==e[t].operator||"neq"==e[t].operator)&&e[t].optionId){var o=l.options.getElementOptionById(i,e[t].optionId);null!==o?e[t].value!=o.value&&(e[t].value=o.value):e.splice(t,1)}}else e.splice(t,1)}return e}},e.builder.logic=o,e}(quform=function(e,t,i){"use strict";var o,a=e.core,l=e.builder,n=a.cache;return o={editing:null,nextOptionId:0,onWindowLoad:function(){n.get("#qfb-options").sortable({items:"> .qfb-option, > .qfb-optgroup",handle:"> .qfb-option-right > .qfb-option-actions > .qfb-option-action-move, > .qfb-optgroup-top > .qfb-optgroup-right > .qfb-optgroup-actions > .qfb-optgroup-action-move",placeholder:"qfb-sortable-option-placeholder",connectWith:".qfb-optgroup-options"}),t("#qfb-add-option-button").on("click",function(){n.get("#qfb-options").append(o.getOptionHtml(o.createOption())),o.checkOptionsEmpty()}),n.get("#qfb-options").on("click",".qfb-option-action-set-default",function(){var e=l.elements.editing,i=t(this).closest(".qfb-option");"checkbox"==e.type||"multiselect"==e.type?i.toggleClass("qfb-option-default"):i.hasClass("qfb-option-default")?i.removeClass("qfb-option-default"):(i.closest(".qfb-options-list").find(".qfb-option-default").removeClass("qfb-option-default"),i.addClass("qfb-option-default"))}),n.get("#qfb_customise_values").click(o.customiseOptionValues),n.get("#qfb-options").on("keyup blur",".qfb-option-label",function(){var e=t(this),i=e.val(),o=e.closest(".qfb-option"),a=o.data("option");a.label=i,n.get("#qfb_customise_values").is(":checked")||(o.find(".qfb-option-value").val(i),a.value=i)}),n.get("#qfb-options").on("keyup blur",".qfb-option-value",function(){if(n.get("#qfb_customise_values").is(":checked")){var e=t(this),i=e.val(),o=e.closest(".qfb-option"),a=o.data("option");o.find(".qfb-option-value").val(i),a.value=i}}),n.get("#qfb-options").on("click",".qfb-option-action-add",function(){t(this).closest(".qfb-option").after(o.getOptionHtml(o.createOption())),o.checkOptionsEmpty()}),n.get("#qfb-options").on("click",".qfb-option-action-duplicate",function(){var e=t(this).closest(".qfb-option"),i=e.data("option"),a=t.extend(!0,{},i,{id:o.nextOptionId++});e.after(o.getOptionHtml(a))}),n.get("#qfb-options").on("click",".qfb-option-action-remove",function(){t(this).closest(".qfb-option").remove(),o.checkOptionsEmpty()}),n.get("#qfb-add-optgroup-button").on("click",function(){"select"!=l.elements.editing.type&&"multiselect"!=l.elements.editing.type||(n.get("#qfb-options").append(o.getOptgroupHtml(o.createOptgroup())),o.checkOptionsEmpty())}),n.get("#qfb-options").on("click",".qfb-optgroup-action-remove",function(){var e=t(this).closest(".qfb-optgroup");e.find(".qfb-optgroup-options > .qfb-option").length?confirm(i.confirmRemoveOptgroup)&&(e.remove(),o.checkOptionsEmpty()):(e.remove(),o.checkOptionsEmpty())}),n.get("#qfb-options").on("click",".qfb-optgroup-action-add",function(){t(this).closest(".qfb-optgroup").find(".qfb-optgroup-options").append(o.getOptionHtml(o.createOption()))}),n.get("#qfb-options").on("click",".qfb-option-action-settings",function(){o.showSettings(t(this).closest(".qfb-option").data("option"))}),n.get("#qfb-option-settings").find(".qfb-popup-save-button").click(function(){o.saveSettings(),o.hideSettings()}),n.get("#qfb-option-settings").find(".qfb-popup-close-button").click(function(){o.hideSettings()}),t.each(["#qfb_option_image","#qfb_option_image_selected"],function(e,t){n.get(t+"_browse").qfbMediaBrowser({callback:function(e){try{n.get(t).val(e.first().toJSON().url)}catch(i){}}})}),n.get("#qfb-name-prefix-options").sortable({axis:"y",items:"> .qfb-option",handle:"> .qfb-option-right > .qfb-option-actions > .qfb-option-action-move",placeholder:"qfb-sortable-option-placeholder"}),n.get("#qfb_customise_name_prefix_values").click(o.customiseNamePrefixOptionValues),n.get("#qfb-name-prefix-options").on("keyup blur",".qfb-option-label",function(){var e=t(this);n.get("#qfb_customise_name_prefix_values").is(":checked")||e.closest(".qfb-option").find(".qfb-option-value").val(e.val())}),t("#qfb-add-name-prefix-option-button").click(function(){n.get("#qfb-name-prefix-options").append(o.getNamePrefixOptionHtml(o.createNamePrefixOption())),o.checkNamePrefixOptionsEmpty()}),n.get("#qfb-name-prefix-options").on("click",".qfb-option-action-add",function(){t(this).closest(".qfb-option").after(o.getNamePrefixOptionHtml(o.createNamePrefixOption()))}),n.get("#qfb-name-prefix-options").on("click",".qfb-option-action-set-default",function(){var e=t(this).closest(".qfb-option");e.hasClass("qfb-option-default")?e.removeClass("qfb-option-default"):(n.get("#qfb-name-prefix-options").find(".qfb-option-default").removeClass("qfb-option-default"),e.addClass("qfb-option-default"))}),n.get("#qfb-name-prefix-options").on("click",".qfb-option-action-remove",function(){t(this).closest(".qfb-option").remove(),o.checkNamePrefixOptionsEmpty()}),n.get("#qfb-add-bulk-options-button").click(o.showBulkOptions),n.get("#qfb-insert-bulk-options").click(o.insertBulkOptions),n.get("#qfb-close-bulk-options").click(o.closeBulkOptions),n.get(".qfb-add-bulk-option-button").click(o.loadBulkOptions),l.setupContainerTooltips(n.get("#qfb-bulk-options").find("> .qfb-popup-content"))},loadOptions:function(){var e,i=l.elements.editing,s=0,c=[];for(o.nextOptionId=i.nextOptionId,t.isArray(i.options)||(i.options=[]),e=i.options.length;s<e;s++)"undefined"==typeof i.options[s].options?c.push(o.getOptionHtml(t.extend({},i.options[s],!0))):c.push(o.getOptgroupHtml(t.extend({},i.options[s],!0)));n.get("#qfb-options").html(c),o.setDefaultOption(),o.checkOptionsEmpty(),n.get("#qfb-add-optgroup-button")["select"==i.type||"multiselect"==i.type?"show":"hide"](),n.get("#qfb_customise_values").prop("checked",i.customiseValues),o.customiseOptionValues(n.get("#qfb-options")),n.get("#qfb-options").closest(a.settingWrap).show()},saveOptions:function(){var e=l.elements.editing,i=n.get("#qfb_customise_values").is(":checked"),a="checkbox"==e.type||"multiselect"==e.type,s=a?[]:"",c=[];n.get("#qfb-options").find("> .qfb-option, > .qfb-optgroup").each(function(){var e=t(this);if(e.hasClass("qfb-optgroup")){var o=e,l=o.data("optgroup"),n=[];o.find(".qfb-optgroup-options").find("> .qfb-option").each(function(){var e=t(this),o=e.data("option"),l=e.find(".qfb-option-label").val(),c=i?e.find(".qfb-option-value").val():l;o.label=l,o.value=c,n.push(o),e.hasClass("qfb-option-default")&&(a?s.push(c):s=c)}),l.label=o.find(".qfb-optgroup-label").val(),l.options=n,c.push(l)}else{var r=e,f=r.data("option"),g=r.find(".qfb-option-label").val(),b=i?r.find(".qfb-option-value").val():g;f.label=g,f.value=b,c.push(f),r.hasClass("qfb-option-default")&&(a?s.push(b):s=b)}}),e.options=c,e.nextOptionId=o.nextOptionId,e.defaultValue=s,e.customiseValues=i,l.logic.checkInvalidLogic()},getElementOptionById:function(e,t){for(var i=0;i<e.options.length;i++)if("undefined"==typeof e.options[i].options){if(e.options[i].id==t)return e.options[i]}else for(var o=0;o<e.options[i].options.length;o++)if(e.options[i].options[o].id==t)return e.options[i].options[o];return null},createOption:function(){var e=l.elements.editing;return t.extend(!0,{id:o.nextOptionId++},i.defaultOptions[e.type])},getOptionHtml:function(e){var a=l.elements.editing,s=t(i[a.type+"OptionHtml"]),c=s.find(".qfb-option-value");return s.find(".qfb-option-label").val(o.getOptionValue(e,"label")),c.val(o.getOptionValue(e,"value")),n.get("#qfb_customise_values").is(":checked")||c.prop({readOnly:!0,tabIndex:-1}).attr("title",i.enableCustomizeValuesToChange),s.data("option",e),s},createOptgroup:function(){var e=l.elements.editing;return t.extend(!0,{id:o.nextOptionId++},i.defaultOptgroups[e.type])},getOptgroupHtml:function(e){var a=t(i.optgroupHtml),l=t('<div class="qfb-optgroup-options">'),n=o.getOptgroupValue(e,"options"),s=[];a.find(".qfb-optgroup-label").val(o.getOptgroupValue(e,"label"));for(var c=0,r=n.length;c<r;c++)s.push(o.getOptionHtml(n[c]));return a.append(l.html(s)),l.sortable({items:"> .qfb-option",handle:"> .qfb-option-right > .qfb-option-actions > .qfb-option-action-move",placeholder:"qfb-sortable-option-placeholder",connectWith:"#qfb-options, .qfb-optgroup-options",receive:function(e,o){t(o.item).hasClass("qfb-optgroup")&&(t(o.sender).sortable("cancel"),alert(i.nestingOptgroupError))}}),a.data("optgroup",e),a},customiseOptionValues:function(){n.get("#qfb_customise_values").is(":checked")?n.get("#qfb-options").find(".qfb-option-value").prop({readOnly:!1,tabIndex:0}).removeAttr("title"):n.get("#qfb-options").find(".qfb-option").each(function(){var e=t(this);e.find(".qfb-option-value").val(e.find(".qfb-option-label").val()).prop({readOnly:!0,tabIndex:-1}).attr("title",i.enableCustomizeValuesToChange)})},checkOptionsEmpty:function(){var e=n.get("#qfb-options").closest(a.settingWrap);n.get("#qfb-options").find("> .qfb-option, > .qfb-optgroup").length?(e.find(".qfb-options-empty").hide(),e.find(".qfb-options-inner").fadeIn()):(e.find(".qfb-options-inner").hide(),e.find(".qfb-options-empty").fadeIn())},setDefaultOption:function(){var e=l.elements.editing;if("checkbox"==e.type||"multiselect"==e.type)n.get("#qfb-options").find(".qfb-option").each(function(){var i=t(this),o=i.data("option");-1!==t.inArray(o.value,e.defaultValue)&&i.addClass("qfb-option-default")});else{var i=t();n.get("#qfb-options").find(".qfb-option").each(function(){var o=t(this);o.data("option").value==e.defaultValue&&(i=i.add(o))}),i.last().addClass("qfb-option-default")}},loadNamePrefixOptions:function(){var e,i=l.elements.editing,a=l.elements.getValue(i,"prefixOptions"),s=l.elements.getValue(i,"prefixCustomiseValues"),c=[],r=0;for(o.nextOptionId=l.elements.getValue(i,"prefixNextOptionId"),t.isArray(a)||(a=[]),e=a.length;r<e;r++)c.push(o.getNamePrefixOptionHtml(t.extend({},a[r],!0)));n.get("#qfb-name-prefix-options").html(c),o.setDefaultNamePrefixOption(),o.checkNamePrefixOptionsEmpty(),n.get("#qfb_customise_name_prefix_values").prop("checked",s),o.customiseNamePrefixOptionValues()},saveNamePrefixOptions:function(){var e=l.elements.editing,i=n.get("#qfb_customise_name_prefix_values").is(":checked"),a="",s=[];n.get("#qfb-name-prefix-options").find("> .qfb-option").each(function(){var e=t(this),o=e.data("option"),l=e.find(".qfb-option-label").val(),n=i?e.find(".qfb-option-value").val():l;o.label=l,o.value=n,s.push(o),e.hasClass("qfb-option-default")&&(a=n)}),e.prefixOptions=s,e.prefixNextOptionId=o.nextOptionId,e.prefixDefaultValue=a,e.prefixCustomiseValues=i},createNamePrefixOption:function(){return t.extend(!0,{id:o.nextOptionId++},i.defaultOptions.select)},getNamePrefixOptionHtml:function(e){var a=t(i.selectOptionHtml),l=a.find(".qfb-option-value");return a.find(".qfb-option-label").val(o.getNamePrefixOptionValue(e,"label")),l.val(o.getNamePrefixOptionValue(e,"value")),n.get("#qfb_customise_name_prefix_values").is(":checked")||l.prop({readOnly:!0,tabIndex:-1}).attr("title",i.enableCustomizeValuesToChange),a.data("option",e),a},setDefaultNamePrefixOption:function(){var e=l.elements.editing,i=t();n.get("#qfb-name-prefix-options").find(".qfb-option").each(function(){var o=t(this);o.data("option").value==e.defaultValue&&(i=i.add(o))}),i.last().addClass("qfb-option-default")},checkNamePrefixOptionsEmpty:function(){var e=n.get("#qfb-name-prefix-options").closest(a.subSettingWrap);n.get("#qfb-name-prefix-options").find("> .qfb-option").length?(e.find(".qfb-options-empty").hide(),e.find(".qfb-options-inner").fadeIn()):(e.find(".qfb-options-inner").hide(),e.find(".qfb-options-empty").fadeIn())},customiseNamePrefixOptionValues:function(){n.get("#qfb_customise_name_prefix_values").is(":checked")?n.get("#qfb-name-prefix-options").find(".qfb-option-value").prop({readOnly:!1,tabIndex:0}).removeAttr("title"):n.get("#qfb-name-prefix-options").find(".qfb-option").each(function(){var e=t(this);e.find(".qfb-option-value").val(e.find(".qfb-option-label").val()).prop({readOnly:!0,tabIndex:-1}).attr("title",i.enableCustomizeValuesToChange)})},showBulkOptions:function(){n.get("#qfb-bulk-options").show()},closeBulkOptions:function(){n.get("#qfb_bulk_options_textarea").val(""),t("#qfb_bulk_options_clear").prop("checked",!1),n.get("#qfb-bulk-options").hide()},loadBulkOptions:function(){var e=t(this).data("key");if(e)if("existing"==e){var o=[],a=n.get("#qfb_customise_values").is(":checked");n.get("#qfb-options").find("> .qfb-option, > .qfb-optgroup").each(function(){var e=t(this);if(e.hasClass("qfb-optgroup"))o.push('[optgroup label="'+e.find(".qfb-optgroup-label").val()+'"]'),e.find(".qfb-optgroup-options > .qfb-option").each(function(){var e=t(this),i=e.find(".qfb-option-label").val();a&&(i+="|"+e.find(".qfb-option-value").val()),o.push(i)}),o.push("[/optgroup]");else{var i=e.find(".qfb-option-label").val();a&&(i+="|"+e.find(".qfb-option-value").val()),o.push(i)}}),n.get("#qfb_bulk_options_textarea").val(o.join("\n"))}else"object"==typeof i.bulkOptions[e]&&n.get("#qfb_bulk_options_textarea").val(i.bulkOptions[e].options.join("\n"))},insertBulkOptions:function(){var e=n.get("#qfb_bulk_options_textarea").val();if(e.length){t("#qfb_bulk_options_clear").is(":checked")&&n.get("#qfb-options").empty(),e=e.split("\n");for(var i=n.get("#qfb-options"),a=0;a<e.length;a++){var l=e[a],s=new RegExp('^\\[optgroup label="(.*)"\\]$').exec(l),c="[/optgroup]"==l;if(null!==s){var r=o.getOptgroupHtml({label:s[1]});n.get("#qfb-options").append(r),i=r.find(".qfb-optgroup-options")}else if(c)i=n.get("#qfb-options");else{var f,g,b=o.createOption();if(l.indexOf("|")>-1){var d=l.split("|");f=d[0],g=d[1]}else f=g=l;b.label=f,b.value=g,i.append(o.getOptionHtml(b))}}}o.closeBulkOptions()},showSettings:function(e){o.editing=e,o.loadSettings(e),n.get("body").css({overflow:"hidden"}),n.get("#qfb-option-settings").show(),n.get("#qfb-option-settings").find(".qfb-popup-content").scrollTop(0)},loadSettings:function(e){n.get("#qfb_option_label").val(o.getOptionValue(e,"label")),n.get("#qfb_option_value").val(o.getOptionValue(e,"value")).closest(a.settingWrap)[n.get("#qfb_customise_values").is(":checked")?"show":"hide"](),n.get("#qfb_option_image").val(o.getOptionValue(e,"image")),n.get("#qfb_option_image_selected").val(o.getOptionValue(e,"imageSelected")),n.get("#qfb_option_width").val(o.getOptionValue(e,"width")),n.get("#qfb_option_height").val(o.getOptionValue(e,"height")),l.loadIconOption(n.get("#qfb_option_icon"),o.getOptionValue(e,"icon")),l.loadIconOption(n.get("#qfb_option_icon_selected"),o.getOptionValue(e,"iconSelected"))},saveSettings:function(){var e=o.editing;e.label=n.get("#qfb_option_label").val(),e.value=n.get("#qfb_option_value").val(),e.image=n.get("#qfb_option_image").val(),e.imageSelected=n.get("#qfb_option_image_selected").val(),e.width=n.get("#qfb_option_width").val(),e.height=n.get("#qfb_option_height").val(),e.icon=n.get("#qfb_option_icon").val(),e.iconSelected=n.get("#qfb_option_icon_selected").val();var i=n.get("#qfb-options").find(".qfb-option").filter(function(){return e.id==t(this).data("option").id});i.find(".qfb-option-label").val(e.label),i.find(".qfb-option-value").val(n.get("#qfb_customise_values").is(":checked")?e.value:e.label)},hideSettings:function(){o.editing=null,t(".qtip").hide(),n.get("body").css({overflow:""}),n.get("#qfb-option-settings").hide()},getOptionValue:function(e,t){return a.getProperty(e,t,a.getProperty(i.defaultOptions[l.elements.editing.type],t))},getNamePrefixOptionValue:function(e,t){return a.getProperty(e,t,a.getProperty(i.defaultOptions.select,t))},getOptgroupValue:function(e,t){return a.getProperty(e,t,a.getProperty(i.defaultOptgroups[l.elements.editing.type],t))}},e.builder.options=o,e}(quform=function(e,t,i,o){"use strict";function a(e){var i=e.data("id");t(".qfb-current-page").removeClass("qfb-current-page k-state-active"),e.addClass("qfb-current-page k-state-active"),t(".qfb-element-page").hide().filter(function(){return t(this).data("id")===i}).show()}function l(e,o){var a=o.data("type"),l=f.getElementById(o.data("id")),n=t('<div class="qfb-sortable-helper">'),s=t('<div class="qfb-sortable-helper-inner qfb-cf">').appendTo(n),c="";return g.isNonEmptyString(a)&&i.elements[a]&&(g.isNonEmptyString(i.elements[a].icon)&&s.append(t('<div class="qfb-sortable-helper-icon">').append(i.elements[a].icon)),g.isNonEmptyString(i.elements[a].name)&&(c=i.elements[a].name)),l&&g.isNonEmptyString(g.getProperty(l,"label"))&&(c=g.getProperty(l,"label")),s.append(t('<div class="qfb-sortable-helper-label">').text(c)),n.css({width:"auto",height:"auto"}),n}function n(){u=!0,t(this).sortable("instance").cancelHelperRemoval=!1}function s(e,o){u=!1;var a=o.item;if(a.hasClass("qfb-sortable-add-helper")){var l=a.data("type"),n=a.index(),s=f.getElementById(a.closest(".qfb-element").data("id"));t(".qtip").hide(),a.remove(),l&&i.elements.hasOwnProperty(l)&&s&&f.addElement(l,s,n)}f.sortElements(),b.refreshPreview()}function c(e){for(var t,i=0,o=e.elements.length;i<o;i++)(t=e.elements[i]).id=b.form.nextElementId++,f.insertElement(t,e,t.position,!0),"group"!=t.type&&"row"!=t.type&&"column"!=t.type||c(t)}function r(e){var t=e?"qfbSlideShow":"show",o=e?"qfbSlideHide":"hide";d.get("#qfb_enhanced_upload_enabled").is(":checked")?(d.get("#qfb_enhanced_upload_style").add(d.get("#qfb_button_icon")).add(d.get("#qfb_button_icon_position")).add(d.get("#qfb_upload_list_layout")).add(d.get("#qfb_upload_list_size")).closest(g.settingWrap)[t](),"dropzone"==d.get("#qfb_enhanced_upload_style").val()?(d.get("#qfb_button_icon").closest(g.settingWrap).find(".qfb-setting-label > label").text(i.dropzoneIcon),d.get("#qfb_button_icon_position").closest(g.settingWrap).find(".qfb-setting-label > label").text(i.dropzoneIconPosition),d.get("#qfb_button_style").add(d.get("#qfb_button_size")).add(d.get("#qfb_button_width")).add(d.get("#qfb_button_width_custom")).closest(g.settingWrap)[o]()):(d.get("#qfb_button_icon").closest(g.settingWrap).find(".qfb-setting-label > label").text(i.buttonIcon),d.get("#qfb_button_icon_position").closest(g.settingWrap).find(".qfb-setting-label > label").text(i.buttonIconPosition),d.get("#qfb_button_style").add(d.get("#qfb_button_size")).add(d.get("#qfb_button_width")).closest(g.settingWrap)[t](),"custom"==d.get("#qfb_button_width").val()&&d.get("#qfb_button_width_custom").closest(g.settingWrap)[t]())):d.get("#qfb_enhanced_upload_style").add(d.get("#qfb_button_style")).add(d.get("#qfb_button_size")).add(d.get("#qfb_button_width")).add(d.get("#qfb_button_width_custom")).add(d.get("#qfb_button_icon")).add(d.get("#qfb_button_icon_position")).add(d.get("#qfb_upload_list_layout")).add(d.get("#qfb_upload_list_size")).closest(g.settingWrap)[o]()}var f,g=e.core,b=e.builder,d=g.cache,p=t(window),u=!1,m={items:"> .qfb-element",handle:"> .qfb-element-inner > .qfb-element-type-icon, > .qfb-row-actions > .qfb-row-action-move",placeholder:"qfb-sortable-placeholder",connectWith:".qfb-element-page > .qfb-child-elements, .qfb-element-group > .qfb-child-elements, .qfb-element-column > .qfb-child-elements",start:n,stop:s,appendTo:"#qfb-edit-form",helper:l,tolerance:"pointer",cursorAt:{top:-5,left:-5}},q={items:"> .qfb-element-column",handle:"> .qfb-column-actions > .qfb-column-action-move > i",placeholder:"qfb-sortable-column-placeholder",start:function(){t(this).sortable("instance").cancelHelperRemoval=!1},containment:"parent",stop:s,helper:l,tolerance:"pointer",cursorAt:{top:-5,left:-5}},h={items:"> .qfb-element",handle:"> .qfb-element-inner > .qfb-element-type-icon, > .qfb-row-actions > .qfb-row-action-move",placeholder:"qfb-sortable-placeholder",connectWith:".qfb-element-page > .qfb-child-elements, .qfb-element-group > .qfb-child-elements, .qfb-element-column > .qfb-child-elements",start:n,stop:s,appendTo:"#qfb-edit-form",helper:l,tolerance:"pointer",cursorAt:{top:-5,left:-5}},v={items:"> .qfb-element",handle:"> .qfb-element-inner > .qfb-element-type-icon, > .qfb-row-actions > .qfb-row-action-move",placeholder:"qfb-sortable-placeholder",connectWith:".qfb-element-page > .qfb-child-elements, .qfb-element-group > .qfb-child-elements, .qfb-element-column > .qfb-child-elements",start:n,stop:s,appendTo:"#qfb-edit-form",helper:l,tolerance:"pointer",cursorAt:{top:-5,left:-5}};return f={cache:[],datepickers:{},timepickers:{},enhancedUploaders:{},enhancedSelects:{},recaptchas:[],editing:null,columnWidths:{1:100,2:50,3:33.33333333,4:25,5:20,6:16.66666666,7:14.28571428,8:12.5,9:11.11111111,10:10,11:9.09090909,12:8.333333333,13:7.692307692,14:7.142857142,15:6.666666666,16:6.25,17:5.882352941,18:5.555555555,19:5.263157894,20:5},init:function(){d.get("#qfb-page-tabs-nav-wrap").kendoTabStrip(),d.get("#qfb-add-elements-list").kendoTabStrip(),p.on("resize.quform",_.debounce(function(){d.get("#qfb-page-tabs-nav-wrap").data("kendoTabStrip").resize(!0),d.get("#qfb-add-elements-list").data("kendoTabStrip").resize(!0)},250)),d.get("#qfb-page-tabs-nav").on("click",".qfb-page-tab-nav",function(){this!==t(".qfb-current-page")[0]&&(a(t(this)),b.refreshPreview())}),d.get("#qfb-page-tabs-nav").sortable({items:"> .qfb-page-tab-nav",delay:150,axis:"x",stop:function(){f.updatePageTabNavLabels(),f.sortElements(),b.refreshPreview()}}),d.get("#qfb-page-tabs-nav").on("hover",".qfb-page-tab-nav",function(){u&&this!==t(".qfb-current-page")[0]&&(a(t(this)),b.refreshPreview())}),d.get("#qfb-page-tabs-nav").on("click",".qfb-page-action-settings",function(e){e.stopPropagation(),f.showSettings(t(this).closest(".qfb-page-tab-nav").data("id"))}),d.get("#qfb-page-tabs-nav").on("click",".qfb-page-action-duplicate",function(e){e.stopPropagation(),f.duplicatePage(t(this).closest(".qfb-page-tab-nav").data("id"))}),d.get("#qfb-page-tabs-nav").on("click",".qfb-page-action-remove",function(e){e.stopPropagation(),t(".qtip").hide();var i=f.getElementById(t(this).closest(".qfb-page-tab-nav").data("id"));i&&f.removePage(i)}),t(".qfb-element-page > .qfb-child-elements").sortable(m),t(".qfb-element-row > .qfb-child-elements").sortable(q),t(".qfb-element-column > .qfb-child-elements").sortable(h),t(".qfb-element-group > .qfb-child-elements").sortable(v),t("#qfb-element-settings-tabs, #qfb-description-tabs, #qfb-name-tabs").tctabs(".qfb-tabs-panel",{tabs:"> .qfb-tabs-nav > li",current:"qfb-current-tab"}),t("#qfb-add-page").click(function(){var e=f.addElement("page");return f.addElement("submit",e,0),f.sortElements(),b.refreshPreview(),!1}),d.get(".qfb-add-element-button").click(function(){f.addElement(t(this).data("type")),f.sortElements(),b.refreshPreview()}),d.get(".qfb-add-element-button").draggable({connectToSortable:".qfb-element-page > .qfb-child-elements, .qfb-element-group > .qfb-child-elements, .qfb-element-column > .qfb-child-elements",helper:function(){var e=t(this).data("type"),o=t("<div>").addClass("qfb-sortable-add-helper");return g.isNonEmptyString(e)&&i.elements[e]&&(g.isNonEmptyString(i.elements[e].icon)&&o.append(i.elements[e].icon),g.isNonEmptyString(i.elements[e].name)&&o.append(t("<span>").text(i.elements[e].name)),o.data("type",e)),o},delay:100,scroll:!1,start:function(){u=!1,"object"==typeof document.selection&&document.selection.empty();var e=t(".qfb-child-elements").sortable("option","scroll",!1);setTimeout(function(){e.sortable("option","scroll",!0)},1e3)},appendTo:t("#qfb-edit-form"),cursorAt:{top:-5,left:-5},stop:function(){u=!1}}).disableSelection().on("mousedown",function(){b.activateTabs(0)}),d.get("#qfb-elements").on("click",".qfb-element-action-settings",function(e){e.stopPropagation(),f.showSettings(t(this).closest(".qfb-element").data("id"))}),d.get("#qfb-element-settings").on("click",".qfb-popup-save-button",function(e){e.stopPropagation(),f.saveSettings()&&f.hideSettings(!0)}),d.get("#qfb-element-settings").on("click",".qfb-popup-close-button",function(e){e.stopPropagation(),f.hideSettings()}),d.get("#qfb-elements").on("click",".qfb-row-action-settings",function(e){e.stopPropagation(),f.showSettings(t(this).closest(".qfb-element-row").data("id"))}),d.get("#qfb_row_column_count").add(d.get("#qfb_row_column_size")).change(function(){d.get("#qfb_row_column_count").val()>8?d.get("#qfb-row-column-customise").closest(g.settingWrap).qfbSlideHide(function(){f.populateColumnWidthCustomise()}):(f.populateColumnWidthCustomise(),d.get("#qfb-row-column-customise").closest(g.settingWrap).qfbSlideShow())}),d.get("#qfb-elements").on("click",".qfb-row-action-add-column",function(){var e=f.getElementById(t(this).closest(".qfb-element-row").data("id"));if(e){var i=f.getRowLayout(e);i.length<20&&(i.push(""),f.setRowLayout(e,i),f.sortElements(),b.refreshPreview())}}),d.get("#qfb-elements").on("click",".qfb-row-action-remove-column",function(){var e=f.getElementById(t(this).closest(".qfb-element-row").data("id"));if(e){var i=f.getRowLayout(e);i.length>1&&(i.pop(),f.setRowLayout(e,i),f.sortElements(),b.refreshPreview())}}),d.get("#qfb-elements").on("click",".qfb-row-action-remove",function(){var e=f.getElementById(t(this).closest(".qfb-element-row").data("id"));e&&confirm(i.confirmRemoveRow)&&f.removeElement(e)}),d.get("#qfb-elements").on("click",".qfb-row-action-duplicate",function(){f.duplicateElement(f.getElementById(t(this).closest(".qfb-element-row").data("id")))}),d.get("#qfb-elements").on("click",".qfb-column-action-remove",function(){var e=t(this),i=f.getElementById(e.closest(".qfb-element-column").data("id")),o=f.getElementById(e.closest(".qfb-element-row").data("id"));i&&o&&f.removeColumn(i,o)}),d.get("#qfb-elements").on("click",".qfb-column-action-duplicate",function(){f.duplicateElement(f.getElementById(t(this).closest(".qfb-element-column").data("id")))}),d.get("#qfb-elements").on("click",".qfb-element-group-empty-add-row",function(){f.addElement("row",f.getElementById(t(this).closest(".qfb-element-group").data("id"))),f.sortElements(),b.refreshPreview()}),t("#qfb-element-settings-prev").click(function(){f.jumpSettings(-1)})[0].onselectstart=function(){return!1},t("#qfb-element-settings-next").click(function(){f.jumpSettings(1)})[0].onselectstart=function(){return!1},d.get("#qfb_label").on("keyup blur",function(){var e=f.editing;e&&(f.setElementSettingsLabel(e),"page"!=e.type&&"group"!=e.type||d.get("#qfb_show_label_in_email").add(d.get("#qfb_show_label_in_entry")).closest(g.settingWrap)[g.isNonEmptyString(d.get("#qfb_label").val())?"show":"hide"]())}),d.get("#qfb_required").click(function(){d.get("#qfb_message_required").closest(g.settingWrap)[t(this).is(":checked")?"show":"hide"](),f.checkTranslationTabVisibility()}),d.get("#qfb_admin_label").on("keyup blur",function(){var e=f.editing;e&&f.setElementSettingsLabel(e)}),d.get("#qfb_label_position").change(function(){d.get("#qfb_label_width").closest(g.settingWrap)["left"==t(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_recaptcha_size").change(function(){d.get("#qfb_recaptcha_badge").closest(g.settingWrap)["invisible"==t(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_tooltip").on("keyup blur",function(){d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap)[t(this).val().length?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_options_layout").add(d.get("#qfb_options_layout_responsive_columns")).change(function(){d.get("#qfb_options_layout_responsive_columns").closest(g.settingWrap)[t.isNumeric(d.get("#qfb_options_layout").val())?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_options_layout_responsive_columns_custom").closest(g.settingWrap)[t.isNumeric(d.get("#qfb_options_layout").val())&&"custom"==d.get("#qfb_options_layout_responsive_columns").val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_options_style").change(function(){d.get("#qfb_options_button_style").add(d.get("#qfb_options_button_size")).add(d.get("#qfb_options_button_width")).add(d.get("#qfb_options_button_icon_position")).closest(g.settingWrap)["button"==d.get("#qfb_options_style").val()?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_options_button_width_custom").closest(g.settingWrap)["custom"==d.get("#qfb_options_button_width").val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_options_button_width").change(function(){d.get("#qfb_options_button_width_custom").closest(g.settingWrap)["custom"==t(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_responsive_columns").change(function(){d.get("#qfb_responsive_columns_custom").closest(g.settingWrap)["custom"==t(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_enhanced_upload_enabled").add(d.get("#qfb_enhanced_upload_style")).change(function(){r(!0)}),d.get("#qfb_field_width").add(d.get("#qfb_group_field_width")).add(d.get("#qfb_page_field_width")).change(function(){d.get("#qfb_field_width_custom").closest(g.settingWrap)["custom"==t(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_button_width").change(function(){d.get("#qfb_button_width_custom").closest(g.settingWrap)["custom"==t(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_enhanced_select_enabled").click(function(){"select"==f.editing.type&&(d.get("#qfb_enhanced_select_search").closest(g.settingWrap)[d.get("#qfb_enhanced_select_enabled").is(":checked")?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_enhanced_select_no_results_found").closest(g.settingWrap)[d.get("#qfb_enhanced_select_enabled").is(":checked")&&d.get("#qfb_enhanced_select_search").is(":checked")?"show":"hide"](),f.checkTranslationTabVisibility()),"multiselect"==f.editing.type&&d.get("#qfb_enhanced_select_placeholder").add(d.get("#qfb_enhanced_select_no_results_found")).closest(g.settingWrap)[d.get("#qfb_enhanced_select_enabled").is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_enhanced_select_search").change(function(){"select"==f.editing.type&&(d.get("#qfb_enhanced_select_no_results_found").closest(g.settingWrap)[d.get("#qfb_enhanced_select_enabled").is(":checked")&&d.get("#qfb_enhanced_select_search").is(":checked")?"show":"hide"](),f.checkTranslationTabVisibility())}),d.get("#qfb_none_option").click(function(){d.get("#qfb_none_option_text").closest(g.settingWrap)[t(this).is(":checked")?"show":"hide"](),f.checkTranslationTabVisibility()}),d.get("#qfb_date_min").on("keyup blur",function(){d.get("#qfb_message_dateTooEarly").closest(g.settingWrap)[g.isNonEmptyString(d.get("#qfb_date_min").val())?"show":"hide"](),f.checkTranslationTabVisibility()}),d.get("#qfb_date_max").on("keyup blur",function(){d.get("#qfb_message_dateTooLate").closest(g.settingWrap)[g.isNonEmptyString(d.get("#qfb_date_max").val())?"show":"hide"](),f.checkTranslationTabVisibility()}),d.get("#qfb_time_min").on("keyup blur",function(){d.get("#qfb_message_timeTooEarly").closest(g.settingWrap)[g.isNonEmptyString(d.get("#qfb_time_min").val())?"show":"hide"](),f.checkTranslationTabVisibility()}),d.get("#qfb_time_max").on("keyup blur",function(){d.get("#qfb_message_timeTooLate").closest(g.settingWrap)[g.isNonEmptyString(d.get("#qfb_time_max").val())?"show":"hide"](),f.checkTranslationTabVisibility()}),d.get("#qfb_name_prefix_none_option").click(function(){d.get("#qfb_name_prefix_none_option_text").closest(g.settingWrap)[t(this).is(":checked")?"show":"hide"](),f.checkTranslationTabVisibility()}),d.get("#qfb_dynamic_default_value").click(function(){d.get("#qfb_dynamic_key").closest(g.settingWrap)[t(this).is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_max_length").on("keyup blur",function(){d.get("#qfb_message_lengthTooLong").closest(g.settingWrap)[g.isNonEmptyString(d.get("#qfb_max_length").val())?"show":"hide"](),f.checkTranslationTabVisibility()}),d.get("#qfb_group_style").change(function(){t("#qfb_border_color, #qfb_background_color").closest(g.settingWrap)["bordered"===t(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_upload_minimum_files").on("keyup blur",function(){var e=t(this).val();t.isNumeric(e)&&e>0&&d.get("#qfb_required").prop("checked",!0)}),d.get("#qfb_save_to_server").click(function(){d.get("#qfb_save_path").closest(g.settingWrap)[t(this).is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_logic_enabled").click(function(){d.get("#qfb-logic").closest(g.settingWrap)[d.get("#qfb_logic_enabled").is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),t("#qfb-add-logic-rule").click(function(){d.get("#qfb-logic").find(".qfb-logic-rules").append(b.logic.buildLogicRule(b.logic.getNewLogicRule())),d.get("#qfb-logic").find(".qfb-no-logic-rules").remove()}),d.get("#qfb_submit_button_type").change(function(){var e=t(this).val();d.get("#qfb_submit_button_text").add(d.get("#qfb_submit_button_icon")).add(d.get("#qfb_submit_button_icon_position")).closest(g.settingWrap)["default"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_submit_button_image").closest(g.settingWrap)["image"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_submit_button_html").closest(g.settingWrap)["html"===e?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_next_button_type").change(function(){var e=t(this).val();d.get("#qfb_next_button_text").add(d.get("#qfb_next_button_icon")).add(d.get("#qfb_next_button_icon_position")).closest(g.settingWrap)["default"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_next_button_image").closest(g.settingWrap)["image"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_next_button_html").closest(g.settingWrap)["html"===e?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_back_button_type").change(function(){var e=t(this).val();d.get("#qfb_back_button_text").add(d.get("#qfb_back_button_icon")).add(d.get("#qfb_back_button_icon_position")).closest(g.settingWrap)["default"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_back_button_image").closest(g.settingWrap)["image"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_back_button_html").closest(g.settingWrap)["html"===e?"qfbSlideShow":"qfbSlideHide"]()}),t.each(["#qfb_submit_button_image","#qfb_next_button_image","#qfb_back_button_image"],function(e,t){d.get(t+"_browse").qfbMediaBrowser({callback:function(e){try{d.get(t).val(e.first().toJSON().url)}catch(i){}}})}),d.get("#qfb-elements").on("click",".qfb-element-action-collapse",function(){return f.collapseGroup(t(this).closest(".qfb-element"),t(this)),!1}),d.get("#qfb-elements").on("click",".qfb-element-action-duplicate",function(){return f.duplicateElement(f.getElementById(t(this).closest(".qfb-element").data("id"))),!1}),d.get("#qfb-elements").on("click",".qfb-element-action-remove",function(){var e=f.getElementById(t(this).closest(".qfb-element").data("id")),o="confirmRemoveElement";if("group"==e.type?o="confirmRemoveGroup":"submit"==e.type&&(o="confirmRemoveSubmit"),e&&confirm(i[o]))return f.removeElement(e),!1}),d.get("#qfb-elements").on("click",".qfb-element-action-required",function(){var e=t(this).closest(".qfb-element"),i=f.getElementById(e.data("id"));return i.required=!i.required,f.setRequiredClass(e,i),b.refreshPreview(),!1}),t.fn.select2&&d.get("#qfb_date_locale").add(d.get("#qfb_time_locale")).select2({theme:"qfb",language:{noResults:function(){return o.noResultsFound}}}),b.setupContainerTooltips(d.get("#qfb-element-settings-tabs")),f.buildCache(),f.initElements(),f.checkEmptyGroups(),t(".qfb-preview-label-content").editable(function(e){return f.savePreviewLabel(e,f.getElementById(t(this).closest(".qfb-element").data("id"))),g.htmlEntities(e)},{onblur:"submit",onreset:function(e,i){f.savePreviewLabel(g.htmlEntityDecode(i.revert),f.getElementById(t(this).closest(".qfb-element").data("id")))},placeholder:"",select:!0,height:"20px",data:function(e){return g.htmlEntityDecode(e)}})},initElements:function(){var e=function(t){for(var i=0,o=t.length;i<o;i++){var a=t[i];f.addToFeatureCaches(a),b.addInsertVariableElement(a),b.logic.addSource(a),b.notifications.addAttachmentSource(a),"group"!=a.type&&"page"!=a.type&&"row"!=a.type&&"column"!=a.type||e(a.elements)}};e(b.form.elements)},insertPage:function(e){b.activateTabs(0);var o=t(i.pageHtml),l=o.find("> .qfb-child-elements");l.attr("id","qfb-child-elements-"+e.id),o.attr("id","qfb-element-"+e.id).data("id",e.id).data("type",e.type).hide(),b.form.elements.push(e),f.cache.push(e);var n=t(i.pageTabNavHtml);n.data("id",e.id);d.get("#qfb-page-tabs-nav-wrap").data("kendoTabStrip").insertBefore(n,d.get("#qfb-add-page-tab")),f.updatePageTabNavLabel(e),d.get("#qfb-elements").append(o),l.sortable(m),b.checkPageButtonSettings(),a(n)},createElement:function(e){var o=null;return e&&i.elements[e]&&i.elements[e].config&&(o=t.extend(!0,{id:b.form.nextElementId++},i.elements[e].config)),o},addElement:function(e,i,o){var a=f.createElement(e);return a?(i||(i=f.getElementById(t(".qfb-current-page").data("id"))),t.isNumeric(o)||(o=function(e){var t=e.elements.length,i=t-1,o=t;return"page"==e.type&&t>0&&"submit"==e.elements[i].type&&(o=i),o}(i)),f.insertElement(a,i,o),a):null},insertElement:function(e,t,i,o){switch(e.type){case"page":f.insertPage(e);break;case"row":f.insertRow(e,t,i,o);break;case"column":f.insertColumn(e,t,i,o);break;case"group":f.insertGroup(e,t,i,o);break;default:f.insertField(e,t,i,o)}},insertField:function(e,o,a,l){b.activateTabs(0);var n=t(i.elementHtml);return n.attr("id","qfb-element-"+e.id).data("id",e.id).data("type",e.type).removeClass("qfb-element-text").addClass("qfb-element-"+e.type).find(".qfb-preview-label-content").attr("id","qfb-plc-"+e.id).text(e.label).end().find(".qfb-element-type-icon").html(i.elements[e.type].icon).end().hide(),f.setRequiredClass(n,e),f.insertChild(n,o,a),!0===l?n.show():(n.fadeIn(50),o.elements.splice(a,0,e)),f.cache.push(e),t("#qfb-plc-"+e.id).editable(function(t){return f.savePreviewLabel(t,e),g.htmlEntities(t)},{onblur:"submit",onreset:function(t,i){f.savePreviewLabel(g.htmlEntityDecode(i.revert),e)},placeholder:"",select:!0,height:"20px",data:function(e){return g.htmlEntityDecode(e)}}),f.addToFeatureCaches(e),b.addInsertVariableElement(e),b.logic.addSource(e),b.notifications.addAttachmentSource(e),e},insertGroup:function(e,o,a,l){b.activateTabs(0);var n=t(i.groupHtml);n.find("> .qfb-child-elements").attr("id","qfb-child-elements-"+e.id),n.attr("id","qfb-element-"+e.id).data("id",e.id).data("type","group").removeClass("qfb-element-text").addClass("qfb-element-group").find(".qfb-preview-label-content").attr("id","qfb-plc-"+e.id).text(e.label).end().hide(),f.insertChild(n,o,a),t("#qfb-child-elements-"+e.id).sortable(v),!0===l?n.show():(n.fadeIn(50),o.elements.splice(a,0,e)),f.cache.push(e),t("#qfb-plc-"+e.id).editable(function(t){return f.savePreviewLabel(t,e),g.htmlEntities(t)},{onblur:"submit",onreset:function(t,i){f.savePreviewLabel(g.htmlEntityDecode(i.revert),e)},placeholder:"",select:!0,height:"20px",data:function(e){return g.htmlEntityDecode(e)}})},insertRow:function(e,o,a,l){var n=t(i.rowHtml),s=n.find("> .qfb-child-elements").attr("id","qfb-child-elements-"+e.id);return n.attr("id","qfb-element-"+e.id).data("id",e.id),f.insertChild(n,o,a),l||o.elements.splice(a,0,e),f.cache.push(e),s.sortable(q),0===e.elements.length&&(f.addElement("column",e),f.addElement("column",e)),f.setRowColumnClass(e),e},insertColumn:function(e,o,a,l){var n=t(i.columnHtml),s=n.find("> .qfb-child-elements").attr("id","qfb-child-elements-"+e.id);return n.attr("id","qfb-element-"+e.id).data("id",e.id),f.insertChild(n,o,a),l||o.elements.splice(a,0,e),f.cache.push(e),s.sortable(h),e},insertChild:function(e,i,o){var a=t("#qfb-child-elements-"+i.id);o>0&&o<i.elements.length?a.find("> .qfb-element:nth-child("+o+")").after(e):0===o?a.prepend(e):a.append(e),e.addClass("qfb-element-highlight"),setTimeout(function(){e.removeClass("qfb-element-highlight")},1400)},removeElement:function(e,i){(e.parentId?f.getElementById(e.parentId).elements:b.form.elements).splice(e.position,1),t("#qfb-element-"+e.id).qfbSlideHide(function(){t(this).remove();var o=[e];"group"!=e.type&&"page"!=e.type&&"row"!=e.type&&"column"!=e.type||(o=o.concat(f.getElementChildren(e)));for(var a=0;a<o.length;a++)f.removeFromFeatureCaches(o[a]),b.removeInsertVariableElement(o[a]),b.logic.removeSource(o[a]),b.notifications.removeAttachmentSource(o[a]),f.removeFromCache(o[a]);b.checkPageButtonSettings(),b.logic.checkInvalidLogic(),b.notifications.checkInvalidAttachments(),"function"==typeof i&&i(),f.sortElements(),b.refreshPreview()})},removePage:function(e){if(1!=b.form.elements.length){if(confirm(i.confirmRemovePage)){var o=t(".qfb-page-tab-nav"),l=o.filter(function(){return t(this).data("id")===e.id}),n=o.index(l);a(n==o.length-1?o.eq(n-1):o.eq(n+1)),l.remove(),f.updatePageTabNavLabels(),f.removeElement(e)}}else alert(i.atLeastOnePage)},removeColumn:function(e,t){confirm(i.confirmRemoveColumn)&&(1===t.elements.length?f.removeElement(t):f.removeElement(e,function(){f.setRowLayout(t,f.getRowLayout(t))}))},getElementChildren:function(e){var t=function(e){var i=[];if("group"==e.type||"page"==e.type||"row"==e.type||"columnm"==e.type)for(var o=0,a=e.elements.length;o<a;o++)if(e.elements[o].parentId==e.id&&(i.push(e.elements[o]),"group"==e.elements[o].type||"page"==e.elements[o].type||"row"==e.elements[o].type||"column"==e.elements[o].type)){var l=t(e.elements[o]);l.length&&i.concat(l)}return i};return t(e)},checkInvalidLogic:function(){var e=function(t){for(var i=0,o=t.length;i<o;i++)"object"==typeof t[i].logic&&(t[i].logicRules=b.logic.removeInvalidLogicRules(t[i].logicRules)),"group"!=t[i].type&&"page"!=t[i].type&&"row"!=t[i].type&&"column"!=t[i].type||e(t[i].elements)};e(b.form.elements)},duplicatePage:function(e){var i=f.getElementById(e);if(i){var o=t.extend(!0,{},i);o.id=b.form.nextElementId++,f.insertPage(o),c(o)}f.sortElements(),b.refreshPreview()},duplicateElement:function(e){if(e){var i=t.extend(!0,{},e),o=f.getElementById(e.parentId);switch(i.id=b.form.nextElementId++,i.position++,e.type){case"row":f.insertRow(i,o,i.position),c(i);break;case"column":f.insertColumn(i,o,i.position),f.setRowColumnClass(o),c(i);break;case"group":f.insertGroup(i,o,i.position),c(i);break;default:f.insertField(i,o,i.position)}f.sortElements(),b.refreshPreview()}},showSettings:function(e){var o=f.getElementById(e);f.editing=o,f.loadSettings(o),d.get("#qfb-element-settings-tabs").data("tabs").click(0),d.get("#qfb-description-tabs").data("tabs").click(0),d.get("#qfb-name-tabs").data("tabs").click(0);var a=i.elementSettings;"page"==o.type?a=i.pageSettings:"group"==o.type?a=i.groupSettings:"row"==o.type&&(a=i.rowSettings),d.get("#qfb-element-settings-title").text(a),d.get("#qfb-element-settings-element-icon").html(i.elements[o.type].icon),d.get("#qfb-element-settings-element-label").text(f.getAdminLabel(o)),t(".qfb-element-highlight").removeClass("qfb-element-highlight"),d.get("#qfb-element-"+o.id).addClass("qfb-element-highlight"),d.get("body").css({overflow:"hidden"}),d.get("#qfb-element-settings").show(),d.get("#qfb-element-settings-tabs").scrollTop(0)},jumpSettings:function(e){for(var t=0,i=f.cache.length;t<i&&f.editing.id!==f.cache[t].id;t++);var o=t+e;if(o<0?o=i-1:o>i-1&&(o=0),"column"==f.cache[o].type)return e=e<0?e-1:e+1,void f.jumpSettings(e);f.saveSettings()&&f.showSettings(f.cache[o].id)},hideSettings:function(e){!0===e&&b.refreshPreview(),t(".qfb-element-highlight").addClass("qfb-element-highlight-last"),setTimeout(function(){t(".qfb-element-highlight").removeClass("qfb-element-highlight qfb-element-highlight-last")},1400),b.styles.resetStyleSettings(),b.filters.resetFilterSettings(),b.validators.resetValidatorSettings(),f.editing=null,t(".qtip").hide(),d.get("body").css({overflow:""}),d.get("#qfb-element-settings").hide()},loadSettings:function(e){d.get("#qfb-element-settings").find(".qfb-setting").hide(),d.get("#qfb-file-field-width-description").hide(),d.get("#qfb_button_icon").closest(g.settingWrap).find(".qfb-setting-label > label").text(i.buttonIcon),d.get("#qfb_button_icon_position").closest(g.settingWrap).find(".qfb-setting-label > label").text(i.buttonIconPosition);var o=[];switch(e.type){case"text":case"textarea":case"email":case"date":case"time":case"password":case"captcha":case"group":case"page":o.push(new Option(i.inherit,"inherit")),o.push(new Option(i.field,"field"))}o.push(new Option(i.icon,"icon")),d.get("#qfb_tooltip_type").html(o);var a=[];switch(a.push(new Option(i.inherit,"inherit")),a.push(new Option(i.above,"")),a.push(new Option(i.left,"left")),e.type){case"text":case"textarea":case"email":case"password":case"captcha":case"group":case"page":a.push(new Option(i.inside,"inside"))}d.get("#qfb_label_position").html(a);var l=[new Option(i.everyone,"")];switch("captcha"!=e.type&&"recaptcha"!=e.type&&(l.push(new Option(i.adminOnly,"admin-only")),l.push(new Option(i.loggedInUsersOnly,"logged-in-only"))),l.push(new Option(i.loggedOutUsersOnly,"logged-out-only")),d.get("#qfb_visibility").html(l),t("#qfb-element-settings-tabs").find("> ul > li").show(),e.type){case"text":case"textarea":case"email":d.get("#qfb_label").val(f.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(f.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(f.getValue(e,"descriptionAbove")),d.get("#qfb_required").prop("checked",f.getValue(e,"required")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),f.getValue(e,"labelIcon")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_left"),f.getValue(e,"fieldIconLeft")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_right"),f.getValue(e,"fieldIconRight")),d.get("#qfb_field_size").val(f.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(f.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(f.getValue(e,"fieldWidthCustom")),d.get("#qfb_custom_class").val(f.getValue(e,"customClass")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_placeholder").val(f.getValue(e,"placeholder")).closest(g.settingWrap).show(),d.get("#qfb_sub_label").val(f.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_admin_label").val(f.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(f.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),f.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),f.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),f.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(f.getValue(e,"labelWidth")),f.loadLogic(),"textarea"==e.type?d.get("#qfb_default_value_textarea").val(f.getValue(e,"defaultValue")).closest(g.settingWrap).show():d.get("#qfb_default_value").val(f.getValue(e,"defaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_default_value").prop("checked",f.getValue(e,"dynamicDefaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_key").val(f.getValue(e,"dynamicKey")),d.get("#qfb_max_length").val(f.getValue(e,"maxLength")).closest(g.settingWrap).show(),d.get("#qfb_read_only").prop("checked",f.getValue(e,"readOnly")).closest(g.settingWrap).show(),d.get("#qfb_show_in_email").prop("checked",f.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",f.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),f.getValue(e,"visibility")).closest(g.settingWrap).show(),b.filters.loadFilters(),b.validators.loadValidators(),d.get("#qfb_message_required").val(f.getValue(e,"messageRequired")),"email"==e.type&&d.get("#qfb_message_emailAddressInvalidFormat").val(f.getValue(e,"messageEmailAddressInvalidFormat")).closest(g.settingWrap).show(),d.get("#qfb_message_lengthTooLong").val(f.getValue(e,"messageLengthTooLong")),"custom"==f.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),"left"==f.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),g.isNonEmptyString(f.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),f.getValue(e,"dynamicDefaultValue")&&d.get("#qfb_dynamic_key").closest(g.settingWrap).show(),f.getValue(e,"required")&&d.get("#qfb_message_required").closest(g.settingWrap).show(),g.isNonEmptyString(f.getValue(e,"maxLength"))&&d.get("#qfb_message_lengthTooLong").closest(g.settingWrap).show();break;case"select":case"checkbox":case"radio":case"multiselect":d.get("#qfb_label").val(f.getValue(e,"label")).closest(g.settingWrap).show(),b.options.loadOptions(),"select"==e.type&&d.get("#qfb_none_option").prop("checked",f.getValue(e,"noneOption")).closest(g.settingWrap).show(),d.get("#qfb_description").val(f.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(f.getValue(e,"descriptionAbove")),d.get("#qfb_required").prop("checked",f.getValue(e,"required")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),f.getValue(e,"labelIcon")).closest(g.settingWrap).show(),"select"!=e.type&&"multiselect"!=e.type||(d.get("#qfb_field_size").val(f.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(f.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(f.getValue(e,"fieldWidthCustom")),d.get("#qfb_enhanced_select_enabled").prop("checked",f.getValue(e,"enhancedSelectEnabled")).closest(g.settingWrap).show(),"select"==e.type&&d.get("#qfb_enhanced_select_search").prop("checked",f.getValue(e,"enhancedSelectSearch")),"multiselect"==e.type&&d.get("#qfb_enhanced_select_placeholder").val(f.getValue(e,"enhancedSelectPlaceholder"))),"radio"!=e.type&&"checkbox"!=e.type||(g.setSelectVal(d.get("#qfb_options_layout"),f.getValue(e,"optionsLayout")).closest(g.settingWrap).show(),d.get("#qfb_options_layout_responsive_columns").val(f.getValue(e,"optionsLayoutResponsiveColumns")),d.get("#qfb_options_layout_responsive_columns_custom").val(f.getValue(e,"optionsLayoutResponsiveColumnsCustom")),g.setSelectVal(d.get("#qfb_options_style"),f.getValue(e,"optionsStyle")).closest(g.settingWrap).show(),d.get("#qfb_options_button_style").val(f.getValue(e,"optionsButtonStyle")),d.get("#qfb_options_button_size").val(f.getValue(e,"optionsButtonSize")),d.get("#qfb_options_button_width").val(f.getValue(e,"optionsButtonWidth")),d.get("#qfb_options_button_width_custom").val(f.getValue(e,"optionsButtonWidthCustom")),d.get("#qfb_options_button_icon_position").val(f.getValue(e,"optionsButtonIconPosition"))),d.get("#qfb_custom_class").val(f.getValue(e,"customClass")).closest(g.settingWrap).show(),"multiselect"===e.type&&d.get("#qfb_size_attribute").val(f.getValue(e,"sizeAttribute")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_sub_label").val(f.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_admin_label").val(f.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(f.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),f.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),f.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),f.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(f.getValue(e,"labelWidth")),f.loadLogic(),d.get("#qfb_in_array_validator").prop("checked",f.getValue(e,"inArrayValidator")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_default_value").prop("checked",f.getValue(e,"dynamicDefaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_key").val(f.getValue(e,"dynamicKey")),"select"!=e.type&&"radio"!=e.type||d.get("#qfb_submit_on_choice").prop("checked",f.getValue(e,"submitOnChoice")).closest(g.settingWrap).show(),d.get("#qfb_show_in_email").prop("checked",f.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",f.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),f.getValue(e,"visibility")).closest(g.settingWrap).show(),b.validators.loadValidators(),d.get("#qfb_message_required").val(f.getValue(e,"messageRequired")),"select"==e.type&&d.get("#qfb_none_option_text").val(f.getValue(e,"noneOptionText")),"select"!=e.type&&"multiselect"!=e.type||d.get("#qfb_enhanced_select_no_results_found").val(f.getValue(e,"enhancedSelectNoResultsFound")),"custom"==f.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),"radio"!=e.type&&"checkbox"!=e.type||(t.isNumeric(f.getValue(e,"optionsLayout"))&&(d.get("#qfb_options_layout_responsive_columns").closest(g.settingWrap).show(),"custom"==f.getValue(e,"optionsLayoutResponsiveColumns")&&d.get("#qfb_options_layout_responsive_columns_custom").closest(g.settingWrap).show()),"button"==f.getValue(e,"optionsStyle")&&(d.get("#qfb_options_button_style").add(d.get("#qfb_options_button_size")).add(d.get("#qfb_options_button_width")).add(d.get("#qfb_options_button_icon_position")).closest(g.settingWrap).show(),"custom"==f.getValue(e,"optionsButtonWidth")&&d.get("#qfb_options_button_width_custom").closest(g.settingWrap).show())),"select"==e.type&&f.getValue(e,"enhancedSelectEnabled")&&d.get("#qfb_enhanced_select_search").closest(g.settingWrap).show(),"multiselect"==e.type&&f.getValue(e,"enhancedSelectEnabled")&&(d.get("#qfb_enhanced_select_placeholder").closest(g.settingWrap).show(),d.get("#qfb_enhanced_select_no_results_found").closest(g.settingWrap).show()),"select"!=e.type&&"multiselect"!=e.type||f.getValue(e,"enhancedSelectEnabled")&&f.getValue(e,"enhancedSelectSearch")&&d.get("#qfb_enhanced_select_no_results_found").closest(g.settingWrap).show(),"left"==f.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),g.isNonEmptyString(f.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),f.getValue(e,"dynamicDefaultValue")&&d.get("#qfb_dynamic_key").closest(g.settingWrap).show(),f.getValue(e,"required")&&d.get("#qfb_message_required").closest(g.settingWrap).show(),"select"==e.type&&f.getValue(e,"noneOption")&&d.get("#qfb_none_option_text").closest(g.settingWrap).show();break;case"file":d.get("#qfb_label").val(f.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(f.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(f.getValue(e,"descriptionAbove")),d.get("#qfb_required").prop("checked",f.getValue(e,"required")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),f.getValue(e,"labelIcon")).closest(g.settingWrap).show(),d.get("#qfb_enhanced_upload_enabled").prop("checked",f.getValue(e,"enhancedUploadEnabled")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_enhanced_upload_style"),f.getValue(e,"enhancedUploadStyle")).closest(g.settingWrap).show(),d.get("#qfb_button_style").val(f.getValue(e,"buttonStyle")).closest(g.settingWrap).show(),d.get("#qfb_button_size").val(f.getValue(e,"buttonSize")).closest(g.settingWrap).show(),d.get("#qfb_button_width").val(f.getValue(e,"buttonWidth")).closest(g.settingWrap).show(),d.get("#qfb_button_width_custom").val(f.getValue(e,"buttonWidthCustom")),b.loadIconOption(d.get("#qfb_button_icon"),f.getValue(e,"buttonIcon")).closest(g.settingWrap).show(),d.get("#qfb_button_icon_position").val(f.getValue(e,"buttonIconPosition")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_upload_list_layout"),f.getValue(e,"uploadListLayout")).closest(g.settingWrap).show(),d.get("#qfb_upload_list_size").val(f.getValue(e,"uploadListSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(f.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb-file-field-width-description").show(),d.get("#qfb_field_width_custom").val(f.getValue(e,"fieldWidthCustom")),b.styles.loadStyles(),d.get("#qfb_sub_label").val(f.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_admin_label").val(f.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(f.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),f.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),f.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),f.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(f.getValue(e,"labelWidth")),f.loadLogic(),d.get("#qfb_upload_minimum_files").val(f.getValue(e,"minimumNumberOfFiles")).closest(g.settingWrap).show(),d.get("#qfb_upload_maximum_files").val(f.getValue(e,"maximumNumberOfFiles")).closest(g.settingWrap).show(),d.get("#qfb_upload_allowed_extensions").val(f.getValue(e,"allowedExtensions")).closest(g.settingWrap).show(),d.get("#qfb_upload_maximum_size").val(f.getValue(e,"maximumFileSize")).closest(g.settingWrap).show(),d.get("#qfb_save_to_server").prop("checked",f.getValue(e,"saveToServer")).closest(g.settingWrap).show(),d.get("#qfb_save_path").val(f.getValue(e,"savePath")),d.get("#qfb_show_in_email").prop("checked",f.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",f.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),f.getValue(e,"visibility")).closest(g.settingWrap).show(),d.get("#qfb_browse_text").val(f.getValue(e,"browseText")).closest(g.settingWrap).show(),d.get("#qfb_message_required").val(f.getValue(e,"messageFileUploadRequired")).closest(g.settingWrap).show(),d.get("#qfb_message_fileNumRequired").val(f.getValue(e,"messageFileNumRequired")).closest(g.settingWrap).show(),d.get("#qfb_message_fileTooMany").val(f.getValue(e,"messageFileTooMany")).closest(g.settingWrap).show(),d.get("#qfb_message_fileTooBigFilename").val(f.getValue(e,"messageFileTooBigFilename")).closest(g.settingWrap).show(),d.get("#qfb_message_fileTooBig").val(f.getValue(e,"messageFileTooBig")).closest(g.settingWrap).show(),d.get("#qfb_message_fileNotAllowedTypeFilename").val(f.getValue(e,"messageNotAllowedTypeFilename")).closest(g.settingWrap).show(),d.get("#qfb_message_fileNotAllowedType").val(f.getValue(e,"messageNotAllowedType")).closest(g.settingWrap).show(),f.getValue(e,"required")&&d.get("#qfb_message_required").closest(g.settingWrap).show(),"custom"==f.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),r(),"custom"==f.getValue(e,"buttonWidth")&&d.get("#qfb_button_width_custom").closest(g.settingWrap).show(),f.getValue(e,"saveToServer")&&d.get("#qfb_save_path").closest(g.settingWrap).show(),"left"==f.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),g.isNonEmptyString(f.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show();break;case"captcha":d.get("#qfb_label").val(f.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(f.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(f.getValue(e,"descriptionAbove")),b.loadIconOption(d.get("#qfb_label_icon"),f.getValue(e,"labelIcon")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_left"),f.getValue(e,"fieldIconLeft")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_right"),f.getValue(e,"fieldIconRight")),d.get("#qfb_field_size").val(f.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(f.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(f.getValue(e,"fieldWidthCustom")),d.get("#qfb_captcha_length").val(f.getValue(e,"captchaLength")).closest(g.settingWrap).show(),d.get("#qfb_captcha_width").val(f.getValue(e,"captchaWidth")).closest(g.settingWrap).show(),d.get("#qfb_captcha_height").val(f.getValue(e,"captchaHeight")).closest(g.settingWrap).show(),d.get("#qfb_captcha_bg_color").val(f.getValue(e,"captchaBgColor")).blur().closest(g.settingWrap).show(),d.get("#qfb_captcha_text_color").val(f.getValue(e,"captchaTextColor")).blur().closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_captcha_font"),f.getValue(e,"captchaFont")).closest(g.settingWrap).show(),d.get("#qfb_captcha_min_font_size").val(f.getValue(e,"captchaMinFontSize")).closest(g.settingWrap).show(),d.get("#qfb_captcha_max_font_size").val(f.getValue(e,"captchaMaxFontSize")).closest(g.settingWrap).show(),d.get("#qfb_captcha_min_angle").val(f.getValue(e,"captchaMinAngle")).closest(g.settingWrap).show(),d.get("#qfb_captcha_max_angle").val(f.getValue(e,"captchaMaxAngle")).closest(g.settingWrap).show(),d.get("#qfb_captcha_retina").prop("checked",f.getValue(e,"captchaRetina")).closest(g.settingWrap).show(),d.get("#qfb_custom_class").val(f.getValue(e,"customClass")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_placeholder").val(f.getValue(e,"placeholder")).closest(g.settingWrap).show(),d.get("#qfb_sub_label").val(f.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(f.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),f.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),f.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),f.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(f.getValue(e,"labelWidth")),f.loadLogic(),g.setSelectVal(d.get("#qfb_visibility"),f.getValue(e,"visibility")).closest(g.settingWrap).show(),d.get("#qfb_message_required").val(f.getValue(e,"messageRequired")).closest(g.settingWrap).show(),d.get("#qfb_message_captchaNotMatch").val(f.getValue(e,"messageCaptchaNotMatch")).closest(g.settingWrap).show(),"custom"==f.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),"left"==f.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),g.isNonEmptyString(f.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show();break;case"recaptcha":d.get("#qfb_label").val(f.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(f.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(f.getValue(e,"descriptionAbove")),g.setSelectVal(d.get("#qfb_recaptcha_size"),f.getValue(e,"recaptchaSize")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_recaptcha_type"),f.getValue(e,"recaptchaType")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_recaptcha_theme"),f.getValue(e,"recaptchaTheme")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_recaptcha_badge"),f.getValue(e,"recaptchaBadge")),g.setSelectVal(d.get("#qfb_recaptcha_lang"),f.getValue(e,"recaptchaLang")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),f.getValue(e,"labelIcon")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_sub_label").val(f.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(f.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),f.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),f.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),f.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(f.getValue(e,"labelWidth")),f.loadLogic(),g.setSelectVal(d.get("#qfb_visibility"),f.getValue(e,"visibility")).closest(g.settingWrap).show(),d.get("#qfb_message_required").val(f.getValue(e,"messageRequired")).closest(g.settingWrap).show(),d.get("#qfb_message_recaptchaMissingInputSecret").val(f.getValue(e,"messageRecaptchaMissingInputSecret")).closest(g.settingWrap).show(),d.get("#qfb_message_recaptchaInvalidInputSecret").val(f.getValue(e,"messageRecaptchaInvalidInputSecret")).closest(g.settingWrap).show(),d.get("#qfb_message_recaptchaMissingInputResponse").val(f.getValue(e,"messageRecaptchaMissingInputResponse")).closest(g.settingWrap).show(),d.get("#qfb_message_recaptchaInvalidInputResponse").val(f.getValue(e,"messageRecaptchaInvalidInputResponse")).closest(g.settingWrap).show(),d.get("#qfb_message_recaptchaError").val(f.getValue(e,"messageRecaptchaError")).closest(g.settingWrap).show(),"invisible"==f.getValue(e,"recaptchaSize")&&d.get("#qfb_recaptcha_badge").closest(g.settingWrap).show();break;case"html":if(d.get("#qfb_label").val(f.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_html_content").val(f.getValue(e,"content")).closest(g.settingWrap).show(),d.get("#qfb_html_auto_format").prop("checked",f.getValue(e,"autoFormat")).closest(g.settingWrap).show(),window.tinymce){var n=window.tinymce.get("qfb_html_content");n&&!n.isHidden()&&n.load(),window.switchEditors&&window.getUserSetting&&window.switchEditors.go("qfb_html_content",window.getUserSetting("editor")||"tmce")}f.loadLogic(),d.get("#qfb_show_in_email").prop("checked",f.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_show_in_entry").prop("checked",f.getValue(e,"showInEntry")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),f.getValue(e,"visibility")).closest(g.settingWrap).show();break;case"date":d.get("#qfb_label").val(f.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(f.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(f.getValue(e,"descriptionAbove")),d.get("#qfb_required").prop("checked",f.getValue(e,"required")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),f.getValue(e,"labelIcon")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_left"),f.getValue(e,"fieldIconLeft")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_right"),f.getValue(e,"fieldIconRight")),d.get("#qfb_field_size").val(f.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(f.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(f.getValue(e,"fieldWidthCustom")),d.get("#qfb_custom_class").val(f.getValue(e,"customClass")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_placeholder").val(f.getValue(e,"placeholder")).closest(g.settingWrap).show(),d.get("#qfb_sub_label").val(f.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_admin_label").val(f.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(f.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),f.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),f.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),f.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(f.getValue(e,"labelWidth")),f.loadLogic(),d.get("#qfb_default_value_date").val(f.getValue(e,"defaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_default_value").prop("checked",f.getValue(e,"dynamicDefaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_key").val(f.getValue(e,"dynamicKey")),d.get("#qfb_date_min").val(f.getValue(e,"dateMin")).closest(g.settingWrap).show(),d.get("#qfb_date_max").val(f.getValue(e,"dateMax")),g.setSelectVal(d.get("#qfb_date_view_start"),f.getValue(e,"dateViewStart")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_date_view_depth"),f.getValue(e,"dateViewDepth")).closest(g.settingWrap).show(),d.get("#qfb_date_show_footer").prop("checked",f.getValue(e,"dateShowFooter")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_date_locale"),f.getValue(e,"dateLocale")).trigger("change.select2").closest(g.settingWrap).show(),d.get("#qfb_date_format_js").val(f.getValue(e,"dateFormatJs")).closest(g.settingWrap).show(),d.get("#qfb_date_format").val(f.getValue(e,"dateFormat")).closest(g.settingWrap).show(),d.get("#qfb_date_auto_open").prop("checked",f.getValue(e,"dateAutoOpen")).closest(g.settingWrap).show(),d.get("#qfb_read_only").prop("checked",f.getValue(e,"readOnly")).closest(g.settingWrap).show(),d.get("#qfb_show_in_email").prop("checked",f.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",f.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),f.getValue(e,"visibility")).closest(g.settingWrap).show(),b.validators.loadValidators(),d.get("#qfb_message_required").val(f.getValue(e,"messageRequired")),d.get("#qfb_message_dateInvalidDate").val(f.getValue(e,"messagesDateInvalidDate")).closest(g.settingWrap).show(),d.get("#qfb_message_dateTooEarly").val(f.getValue(e,"messagesDateTooEarly")),d.get("#qfb_message_dateTooLate").val(f.getValue(e,"messagesDateTooLate")),"custom"==f.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),g.isNonEmptyString(f.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),"left"==f.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),f.getValue(e,"dynamicDefaultValue")&&d.get("#qfb_dynamic_key").closest(g.settingWrap).show(),f.getValue(e,"required")&&d.get("#qfb_message_required").closest(g.settingWrap).show(),g.isNonEmptyString(f.getValue(e,"dateMin"))&&d.get("#qfb_message_dateTooEarly").closest(g.settingWrap).show(),g.isNonEmptyString(f.getValue(e,"dateMax"))&&d.get("#qfb_message_dateTooLate").closest(g.settingWrap).show();break;case"time":d.get("#qfb_label").val(f.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(f.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(f.getValue(e,"descriptionAbove")),d.get("#qfb_required").prop("checked",f.getValue(e,"required")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),f.getValue(e,"labelIcon")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_left"),f.getValue(e,"fieldIconLeft")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_right"),f.getValue(e,"fieldIconRight")),d.get("#qfb_field_size").val(f.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(f.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(f.getValue(e,"fieldWidthCustom")),d.get("#qfb_custom_class").val(f.getValue(e,"customClass")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_placeholder").val(f.getValue(e,"placeholder")).closest(g.settingWrap).show(),d.get("#qfb_sub_label").val(f.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_admin_label").val(f.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(f.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),f.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),f.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),f.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(f.getValue(e,"labelWidth")),f.loadLogic(),d.get("#qfb_default_value_time").val(f.getValue(e,"defaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_default_value").prop("checked",f.getValue(e,"dynamicDefaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_key").val(f.getValue(e,"dynamicKey")),d.get("#qfb_time_min").val(f.getValue(e,"timeMin")).closest(g.settingWrap).show(),d.get("#qfb_time_max").val(f.getValue(e,"timeMax")).closest(g.settingWrap).show(),d.get("#qfb_time_interval").val(f.getValue(e,"timeInterval")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_time_locale"),f.getValue(e,"timeLocale")).trigger("change.select2").closest(g.settingWrap).show(),d.get("#qfb_time_format_js").val(f.getValue(e,"timeFormatJs")).closest(g.settingWrap).show(),d.get("#qfb_time_format").val(f.getValue(e,"timeFormat")).closest(g.settingWrap).show(),d.get("#qfb_time_auto_open").prop("checked",f.getValue(e,"timeAutoOpen")).closest(g.settingWrap).show(),d.get("#qfb_read_only").prop("checked",f.getValue(e,"readOnly")).closest(g.settingWrap).show(),d.get("#qfb_show_in_email").prop("checked",f.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",f.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),f.getValue(e,"visibility")).closest(g.settingWrap).show(),b.validators.loadValidators(),d.get("#qfb_message_required").val(f.getValue(e,"messageRequired")),d.get("#qfb_message_timeInvalidTime").val(f.getValue(e,"messagesTimeInvalidTime")).closest(g.settingWrap).show(),d.get("#qfb_message_timeTooEarly").val(f.getValue(e,"messagesTimeTooEarly")),d.get("#qfb_message_timeTooLate").val(f.getValue(e,"messagesTimeTooLate")),"custom"==f.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),g.isNonEmptyString(f.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),"left"==f.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),f.getValue(e,"dynamicDefaultValue")&&d.get("#qfb_dynamic_key").closest(g.settingWrap).show(),f.getValue(e,"required")&&d.get("#qfb_message_required").closest(g.settingWrap).show(),g.isNonEmptyString(f.getValue(e,"timeMin"))&&d.get("#qfb_message_timeTooEarly").closest(g.settingWrap).show(),g.isNonEmptyString(f.getValue(e,"timeMax"))&&d.get("#qfb_message_timeTooLate").closest(g.settingWrap).show();break;case"password":d.get("#qfb_label").val(f.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(f.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(f.getValue(e,"descriptionAbove")),d.get("#qfb_required").prop("checked",f.getValue(e,"required")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),f.getValue(e,"labelIcon")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_left"),f.getValue(e,"fieldIconLeft")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_right"),f.getValue(e,"fieldIconRight")),d.get("#qfb_field_size").val(f.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(f.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(f.getValue(e,"fieldWidthCustom")),d.get("#qfb_custom_class").val(f.getValue(e,"customClass")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_placeholder").val(f.getValue(e,"placeholder")).closest(g.settingWrap).show(),d.get("#qfb_sub_label").val(f.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_admin_label").val(f.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(f.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),f.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),f.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),f.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(f.getValue(e,"labelWidth")),f.loadLogic(),d.get("#qfb_max_length").val(f.getValue(e,"maxLength")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),f.getValue(e,"visibility")).closest(g.settingWrap).show(),b.validators.loadValidators(),d.get("#qfb_message_required").val(f.getValue(e,"messageRequired")),d.get("#qfb_message_lengthTooLong").val(f.getValue(e,"messageLengthTooLong")),"custom"==f.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),"left"==f.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),g.isNonEmptyString(f.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),f.getValue(e,"required")&&d.get("#qfb_message_required").closest(g.settingWrap).show(),g.isNonEmptyString(f.getValue(e,"maxLength"))&&d.get("#qfb_message_lengthTooLong").closest(g.settingWrap).show();break;case"hidden":d.get("#qfb_label").val(f.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_default_value").val(f.getValue(e,"defaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_default_value").prop("checked",f.getValue(e,"dynamicDefaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_key").val(f.getValue(e,"dynamicKey")),d.get("#qfb_show_in_email").prop("checked",f.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",f.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),f.getValue(e,"visibility")).closest(g.settingWrap).show(),f.getValue(e,"dynamicDefaultValue")&&d.get("#qfb_dynamic_key").closest(g.settingWrap).show();break;case"name":d.get("#qfb_label").val(f.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(f.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(f.getValue(e,"descriptionAbove")),d.get("#qfb_name_prefix_enabled").prop("checked",f.getValue(e,"prefixEnabled")),d.get("#qfb_name_prefix_required").prop("checked",f.getValue(e,"prefixRequired")),b.options.loadNamePrefixOptions(),d.get("#qfb_name_prefix_none_option").prop("checked",f.getValue(e,"prefixNoneOption")),d.get("#qfb_name_prefix_none_option_text").val(f.getValue(e,"prefixNoneOptionText")),d.get("#qfb_name_prefix_sub_label").val(f.getValue(e,"prefixSubLabel")),d.get("#qfb_name_first_enabled").prop("checked",f.getValue(e,"firstEnabled")),d.get("#qfb_name_first_required").prop("checked",f.getValue(e,"firstRequired")),d.get("#qfb_name_first_placeholder").val(f.getValue(e,"firstPlaceholder")),d.get("#qfb_name_first_sub_label").val(f.getValue(e,"firstSubLabel")),d.get("#qfb_name_middle_enabled").prop("checked",f.getValue(e,"middleEnabled")),d.get("#qfb_name_middle_required").prop("checked",f.getValue(e,"middleRequired")),d.get("#qfb_name_middle_placeholder").val(f.getValue(e,"middlePlaceholder")),d.get("#qfb_name_middle_sub_label").val(f.getValue(e,"middleSubLabel")),d.get("#qfb_name_last_enabled").prop("checked",f.getValue(e,"lastEnabled")),d.get("#qfb_name_last_required").prop("checked",f.getValue(e,"lastRequired")),d.get("#qfb_name_last_placeholder").val(f.getValue(e,"lastPlaceholder")),d.get("#qfb_name_last_sub_label").val(f.getValue(e,"lastSubLabel")),d.get("#qfb_name_suffix_enabled").prop("checked",f.getValue(e,"suffixEnabled")),d.get("#qfb_name_suffix_required").prop("checked",f.getValue(e,"suffixRequired")),d.get("#qfb_name_suffix_placeholder").val(f.getValue(e,"suffixPlaceholder")),d.get("#qfb_name_suffix_sub_label").val(f.getValue(e,"suffixSubLabel")),d.get("#qfb-name-tabs").closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),f.getValue(e,"labelIcon")).closest(g.settingWrap).show(),d.get("#qfb_field_size").val(f.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(f.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(f.getValue(e,"fieldWidthCustom")),d.get("#qfb_custom_class").val(f.getValue(e,"customClass")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_sub_label").val(f.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_admin_label").val(f.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(f.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),f.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),f.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),f.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(f.getValue(e,"labelWidth")),f.loadLogic(),d.get("#qfb_dynamic_default_value").prop("checked",f.getValue(e,"dynamicDefaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_key").val(f.getValue(e,"dynamicKey")),d.get("#qfb_show_in_email").prop("checked",f.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",f.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),f.getValue(e,"visibility")).closest(g.settingWrap).show(),b.validators.loadValidators(),d.get("#qfb_message_required").val(f.getValue(e,"messageRequired")),"custom"==f.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),"left"==f.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),g.isNonEmptyString(f.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),f.getValue(e,"dynamicDefaultValue")&&d.get("#qfb_dynamic_key").closest(g.settingWrap).show(),f.getValue(e,"prefixNoneOption")&&d.get("#qfb_name_prefix_none_option_text").closest(g.settingWrap).show();break;case"group":case"page":d.get("#qfb_label").val(f.getValue(e,"label")).closest(g.settingWrap).show(),"group"==e.type&&(d.get("#qfb_group_title").val(f.getValue(e,"title")).closest(g.settingWrap).show(),d.get("#qfb_group_title_tag").val(f.getValue(e,"titleTag")),d.get("#qfb_group_description").val(f.getValue(e,"description")).closest(g.settingWrap).show()),"page"==e.type&&(d.get("#qfb_page_title").val(f.getValue(e,"title")).closest(g.settingWrap).show(),d.get("#qfb_page_title_tag").val(f.getValue(e,"titleTag")),d.get("#qfb_page_description").val(f.getValue(e,"description")).closest(g.settingWrap).show()),"group"==e.type&&(d.get("#qfb_group_field_size").val(f.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_group_field_width").val(f.getValue(e,"fieldWidth")).closest(g.settingWrap).show()),"page"==e.type&&(d.get("#qfb_page_field_size").val(f.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_page_field_width").val(f.getValue(e,"fieldWidth")).closest(g.settingWrap).show()),d.get("#qfb_field_width_custom").val(f.getValue(e,"fieldWidthCustom")),g.setSelectVal(d.get("#qfb_group_style"),f.getValue(e,"groupStyle")).closest(g.settingWrap).show(),d.get("#qfb_border_color").val(f.getValue(e,"borderColor")).blur(),d.get("#qfb_background_color").val(f.getValue(e,"backgroundColor")).blur(),b.styles.loadStyles(),g.setSelectVal(d.get("#qfb_tooltip_type"),f.getValue(e,"tooltipType")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_event"),f.getValue(e,"tooltipEvent")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_label_position"),f.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(f.getValue(e,"labelWidth")),d.get("#qfb_show_label_in_email").prop("checked",f.getValue(e,"showLabelInEmail")).closest(g.settingWrap).show(),d.get("#qfb_show_label_in_entry").prop("checked",f.getValue(e,"showLabelInEntry")).closest(g.settingWrap).show();var s="group"==e.type?"showThisGroup":"showThisPage",c="group"==e.type?"hideThisGroup":"hideThisPage";f.loadLogic(i[s],i[c]),"custom"==f.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),"bordered"===f.getValue(e,"groupStyle")&&(d.get("#qfb_border_color").closest(g.settingWrap).show(),d.get("#qfb_background_color").closest(g.settingWrap).show()),"left"==f.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show();break;case"submit":d.get("#qfb_label").val(f.getValue(e,"label")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_submit_button_type"),f.getValue(e,"submitType")),d.get("#qfb_submit_button_text").val(f.getValue(e,"submitText")),b.loadIconOption(d.get("#qfb_submit_button_icon"),f.getValue(e,"submitIcon")),d.get("#qfb_submit_button_icon_position").val(f.getValue(e,"submitIconPosition")),d.get("#qfb_submit_button_image").val(f.getValue(e,"submitImage")),d.get("#qfb_submit_button_html").val(f.getValue(e,"submitHtml")),g.setSelectVal(d.get("#qfb_next_button_type"),f.getValue(e,"nextType")),d.get("#qfb_next_button_text").val(f.getValue(e,"nextText")),b.loadIconOption(d.get("#qfb_next_button_icon"),f.getValue(e,"nextIcon")),d.get("#qfb_next_button_icon_position").val(f.getValue(e,"nextIconPosition")),d.get("#qfb_next_button_image").val(f.getValue(e,"nextImage")),d.get("#qfb_next_button_html").val(f.getValue(e,"nextHtml")),g.setSelectVal(d.get("#qfb_back_button_type"),f.getValue(e,"backType")),b.loadIconOption(d.get("#qfb_back_button_icon"),f.getValue(e,"backIcon")),d.get("#qfb_back_button_icon_position").val(f.getValue(e,"backIconPosition")),d.get("#qfb_back_button_text").val(f.getValue(e,"backText")),d.get("#qfb_back_button_image").val(f.getValue(e,"backImage")),d.get("#qfb_back_button_html").val(f.getValue(e,"backHtml")),d.get("#qfb_button_style").val(f.getValue(e,"buttonStyle")).closest(g.settingWrap).show(),d.get("#qfb_button_size").val(f.getValue(e,"buttonSize")).closest(g.settingWrap).show(),d.get("#qfb_button_width").val(f.getValue(e,"buttonWidth")).closest(g.settingWrap).show(),d.get("#qfb_button_width_custom").val(f.getValue(e,"buttonWidthCustom")),b.styles.loadStyles(),f.loadLogic();var _=b.isMultiPageForm(),p=f.isOnLastPage(e);_&&!p||(d.get("#qfb_submit_button_type").closest(g.settingWrap).show(),"default"===f.getValue(e,"submitType")?d.get("#qfb_submit_button_text").add(d.get("#qfb_submit_button_icon")).add(d.get("#qfb_submit_button_icon_position")).closest(g.settingWrap).show():"image"===f.getValue(e,"submitType")?d.get("#qfb_submit_button_image").closest(g.settingWrap).show():"html"===f.getValue(e,"submitType")&&d.get("#qfb_submit_button_html").closest(g.settingWrap).show()),_&&!p&&(d.get("#qfb_next_button_type").closest(g.settingWrap).show(),"default"===f.getValue(e,"nextType")?d.get("#qfb_next_button_text").add(d.get("#qfb_next_button_icon")).add(d.get("#qfb_next_button_icon_position")).closest(g.settingWrap).show():"image"===f.getValue(e,"nextType")?d.get("#qfb_next_button_image").closest(g.settingWrap).show():"html"===f.getValue(e,"nextType")&&d.get("#qfb_next_button_html").closest(g.settingWrap).show()),_&&!f.isOnFirstPage(e)&&(d.get("#qfb_back_button_type").closest(g.settingWrap).show(),"default"===f.getValue(e,"backType")?d.get("#qfb_back_button_text").add(d.get("#qfb_back_button_icon")).add(d.get("#qfb_back_button_icon_position")).closest(g.settingWrap).show():"image"===f.getValue(e,"backType")?d.get("#qfb_back_button_image").closest(g.settingWrap).show():"html"===f.getValue(e,"backType")&&d.get("#qfb_back_button_html").closest(g.settingWrap).show()),"custom"==f.getValue(e,"buttonWidth")&&d.get("#qfb_button_width_custom").closest(g.settingWrap).show();break;case"row":g.setSelectVal(d.get("#qfb_row_column_size"),f.getValue(e,"columnSize")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_row_column_count"),e.elements.length).closest(g.settingWrap).show(),f.populateColumnWidthCustomise(),e.elements.length<=8&&d.get("#qfb-row-column-customise").closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_responsive_columns"),f.getValue(e,"responsiveColumns")).closest(g.settingWrap).show(),d.get("#qfb_responsive_columns_custom").val(f.getValue(e,"responsiveColumnsCustom")),"custom"==f.getValue(e,"responsiveColumns")&&d.get("#qfb_responsive_columns_custom").closest(g.settingWrap).show()}d.get("#qfb-element-unique-id").val(b.form.id+"_"+e.id).closest(g.settingWrap).show();var u=d.get("#qfb-element-settings-tabs-nav").find("> li");d.get("#qfb-element-settings-tabs").find("> .qfb-tabs-panel").each(function(e){var i=!1;t(this).find("> .qfb-element-settings-inner > .qfb-settings > .qfb-setting").each(function(){if("block"==t(this).css("display"))return i=!0,!1}),i||u.eq(e).hide()})},saveSettings:function(){var e=f.editing;switch(d.get("#qfb-element-settings").find(".qfb-validation-error").remove(),d.get("#qfb-element-settings").find(".qfb-field-error").removeClass("qfb-field-error"),e.type){case"text":case"textarea":case"email":e.label=d.get("#qfb_label").val(),e.description=d.get("#qfb_description").val(),e.descriptionAbove=d.get("#qfb_description_above").val(),e.required=d.get("#qfb_required").is(":checked"),e.labelIcon=d.get("#qfb_label_icon").val(),e.fieldIconLeft=d.get("#qfb_field_icon_left").val(),e.fieldIconRight=d.get("#qfb_field_icon_right").val(),e.fieldSize=d.get("#qfb_field_size").val(),e.fieldWidth=d.get("#qfb_field_width").val(),e.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),e.customClass=d.get("#qfb_custom_class").val(),b.styles.saveStyles(),e.placeholder=d.get("#qfb_placeholder").val(),e.subLabel=d.get("#qfb_sub_label").val(),e.adminLabel=d.get("#qfb_admin_label").val(),e.tooltip=d.get("#qfb_tooltip").val(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),f.saveLogic(),"textarea"==e.type?e.defaultValue=d.get("#qfb_default_value_textarea").val():e.defaultValue=d.get("#qfb_default_value").val(),e.dynamicDefaultValue=d.get("#qfb_dynamic_default_value").is(":checked"),e.dynamicKey=d.get("#qfb_dynamic_key").val(),e.maxLength=d.get("#qfb_max_length").val(),e.readOnly=d.get("#qfb_read_only").is(":checked"),e.showInEmail=d.get("#qfb_show_in_email").is(":checked"),e.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),e.visibility=d.get("#qfb_visibility").val(),b.filters.saveFilters(),b.validators.saveValidators(),e.messageRequired=d.get("#qfb_message_required").val(),e.messageLengthTooLong=d.get("#qfb_message_lengthTooLong").val(),"email"==e.type&&(e.messageEmailAddressInvalidFormat=d.get("#qfb_message_emailAddressInvalidFormat").val());break;case"select":case"checkbox":case"radio":case"multiselect":e.label=d.get("#qfb_label").val(),b.options.saveOptions(),"select"==e.type&&(e.noneOption=d.get("#qfb_none_option").is(":checked")),e.description=d.get("#qfb_description").val(),e.descriptionAbove=d.get("#qfb_description_above").val(),e.required=d.get("#qfb_required").is(":checked"),e.labelIcon=d.get("#qfb_label_icon").val(),"select"!=e.type&&"multiselect"!=e.type||(e.fieldSize=d.get("#qfb_field_size").val(),e.fieldWidth=d.get("#qfb_field_width").val(),e.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),e.enhancedSelectEnabled=d.get("#qfb_enhanced_select_enabled").is(":checked"),"select"==e.type&&(e.enhancedSelectSearch=d.get("#qfb_enhanced_select_search").is(":checked")),"multiselect"==e.type&&(e.enhancedSelectPlaceholder=d.get("#qfb_enhanced_select_placeholder").val()),d.get("#qfb_enhanced_select_enabled").is(":checked")?f.enhancedSelects[e.id]=!0:delete f.enhancedSelects[e.id]),"radio"!=e.type&&"checkbox"!=e.type||(e.optionsLayout=d.get("#qfb_options_layout").val(),e.optionsLayoutResponsiveColumns=d.get("#qfb_options_layout_responsive_columns").val(),e.optionsLayoutResponsiveColumnsCustom=d.get("#qfb_options_layout_responsive_columns_custom").val(),e.optionsStyle=d.get("#qfb_options_style").val(),e.optionsButtonStyle=d.get("#qfb_options_button_style").val(),e.optionsButtonSize=d.get("#qfb_options_button_size").val(),e.optionsButtonWidth=d.get("#qfb_options_button_width").val(),e.optionsButtonWidthCustom=d.get("#qfb_options_button_width_custom").val(),e.optionsButtonIconPosition=d.get("#qfb_options_button_icon_position").val()),e.customClass=d.get("#qfb_custom_class").val(),"multiselect"===e.type&&(e.sizeAttribute=d.get("#qfb_size_attribute").val()),b.styles.saveStyles(),e.subLabel=d.get("#qfb_sub_label").val(),e.adminLabel=d.get("#qfb_admin_label").val(),e.tooltip=d.get("#qfb_tooltip").val(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),f.saveLogic(),e.inArrayValidator=d.get("#qfb_in_array_validator").is(":checked"),e.dynamicDefaultValue=d.get("#qfb_dynamic_default_value").is(":checked"),e.dynamicKey=d.get("#qfb_dynamic_key").val(),"select"!=e.type&&"radio"!=e.type||(e.submitOnChoice=d.get("#qfb_submit_on_choice").is(":checked")),e.showInEmail=d.get("#qfb_show_in_email").is(":checked"),e.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),e.visibility=d.get("#qfb_visibility").val(),b.validators.saveValidators(),e.messageRequired=d.get("#qfb_message_required").val(),"select"==e.type&&(e.noneOptionText=d.get("#qfb_none_option_text").val()),"select"!=e.type&&"multiselect"!=e.type||(e.enhancedSelectNoResultsFound=d.get("#qfb_enhanced_select_no_results_found").val());break;case"file":e.label=d.get("#qfb_label").val(),e.description=d.get("#qfb_description").val(),e.descriptionAbove=d.get("#qfb_description_above").val(),e.required=d.get("#qfb_required").is(":checked"),e.labelIcon=d.get("#qfb_label_icon").val(),e.enhancedUploadEnabled=d.get("#qfb_enhanced_upload_enabled").is(":checked"),e.enhancedUploadEnabled?f.enhancedUploaders[e.id]=!0:delete f.enhancedUploaders[e.id],e.enhancedUploadStyle=d.get("#qfb_enhanced_upload_style").val(),e.buttonStyle=d.get("#qfb_button_style").val(),e.buttonSize=d.get("#qfb_button_size").val(),e.buttonWidth=d.get("#qfb_button_width").val(),e.buttonWidthCustom=d.get("#qfb_button_width_custom").val(),e.buttonIcon=d.get("#qfb_button_icon").val(),e.buttonIconPosition=d.get("#qfb_button_icon_position").val(),e.uploadListLayout=d.get("#qfb_upload_list_layout").val(),e.uploadListSize=d.get("#qfb_upload_list_size").val(),e.fieldWidth=d.get("#qfb_field_width").val(),e.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),b.styles.saveStyles(),e.subLabel=d.get("#qfb_sub_label").val(),e.adminLabel=d.get("#qfb_admin_label").val(),e.tooltip=d.get("#qfb_tooltip").val(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),f.saveLogic(),e.minimumNumberOfFiles=d.get("#qfb_upload_minimum_files").val(),e.maximumNumberOfFiles=d.get("#qfb_upload_maximum_files").val(),e.allowedExtensions=d.get("#qfb_upload_allowed_extensions").val(),e.maximumFileSize=d.get("#qfb_upload_maximum_size").val(),e.saveToServer=d.get("#qfb_save_to_server").is(":checked"),e.savePath=d.get("#qfb_save_path").val(),e.showInEmail=d.get("#qfb_show_in_email").is(":checked"),e.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),e.visibility=d.get("#qfb_visibility").val(),e.browseText=d.get("#qfb_browse_text").val(),e.messageFileUploadRequired=d.get("#qfb_message_required").val(),e.messageFileNumRequired=d.get("#qfb_message_fileNumRequired").val(),e.messageFileTooMany=d.get("#qfb_message_fileTooMany").val(),e.messageFileTooBigFilename=d.get("#qfb_message_fileTooBigFilename").val(),e.messageFileTooBig=d.get("#qfb_message_fileTooBig").val(),e.messageNotAllowedTypeFilename=d.get("#qfb_message_fileNotAllowedTypeFilename").val(),e.messageNotAllowedType=d.get("#qfb_message_fileNotAllowedType").val();break;case"captcha":e.label=d.get("#qfb_label").val(),e.description=d.get("#qfb_description").val(),e.descriptionAbove=d.get("#qfb_description_above").val(),e.labelIcon=d.get("#qfb_label_icon").val(),e.fieldIconLeft=d.get("#qfb_field_icon_left").val(),e.fieldIconRight=d.get("#qfb_field_icon_right").val(),e.fieldSize=d.get("#qfb_field_size").val(),e.fieldWidth=d.get("#qfb_field_width").val(),e.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),e.captchaLength=d.get("#qfb_captcha_length").val(),e.captchaWidth=d.get("#qfb_captcha_width").val(),e.captchaHeight=d.get("#qfb_captcha_height").val(),e.captchaBgColor=d.get("#qfb_captcha_bg_color").val(),e.captchaBgColorRgba=tinycolor(e.captchaBgColor).toRgb(),e.captchaTextColor=d.get("#qfb_captcha_text_color").val(),e.captchaTextColorRgba=tinycolor(e.captchaTextColor).toRgb(),e.captchaFont=d.get("#qfb_captcha_font").val(),e.captchaMinFontSize=d.get("#qfb_captcha_min_font_size").val(),e.captchaMaxFontSize=d.get("#qfb_captcha_max_font_size").val(),e.captchaMinAngle=d.get("#qfb_captcha_min_angle").val(),e.captchaMaxAngle=d.get("#qfb_captcha_max_angle").val(),e.captchaRetina=d.get("#qfb_captcha_retina").is(":checked"),e.customClass=d.get("#qfb_custom_class").val(),b.styles.saveStyles(),e.placeholder=d.get("#qfb_placeholder").val(),e.subLabel=d.get("#qfb_sub_label").val(),e.tooltip=d.get("#qfb_tooltip").val(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),f.saveLogic(),e.visibility=d.get("#qfb_visibility").val(),e.messageRequired=d.get("#qfb_message_required").val(),e.messageCaptchaNotMatch=d.get("#qfb_message_captchaNotMatch").val();break;case"recaptcha":e.label=d.get("#qfb_label").val(),e.description=d.get("#qfb_description").val(),e.descriptionAbove=d.get("#qfb_description_above").val(),e.recaptchaSize=d.get("#qfb_recaptcha_size").val(),e.recaptchaType=d.get("#qfb_recaptcha_type").val(),e.recaptchaTheme=d.get("#qfb_recaptcha_theme").val(),e.recaptchaBadge=d.get("#qfb_recaptcha_badge").val(),e.recaptchaLang=d.get("#qfb_recaptcha_lang").val(),e.labelIcon=d.get("#qfb_label_icon").val(),b.styles.saveStyles(),e.subLabel=d.get("#qfb_sub_label").val(),e.tooltip=d.get("#qfb_tooltip").val(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),f.saveLogic(),e.visibility=d.get("#qfb_visibility").val(),e.messageRequired=d.get("#qfb_message_required").val(),e.messageRecaptchaMissingInputSecret=d.get("#qfb_message_recaptchaMissingInputSecret").val(),e.messageRecaptchaInvalidInputSecret=d.get("#qfb_message_recaptchaInvalidInputSecret").val(),e.messageRecaptchaMissingInputResponse=d.get("#qfb_message_recaptchaMissingInputResponse").val(),e.messageRecaptchaInvalidInputResponse=d.get("#qfb_message_recaptchaInvalidInputResponse").val(),e.messageRecaptchaError=d.get("#qfb_message_recaptchaError").val();break;case"html":if(e.label=d.get("#qfb_label").val(),window.tinymce){var o=window.tinymce.get("qfb_html_content");o&&!o.isHidden()&&o.isDirty()&&o.save()}e.content=d.get("#qfb_html_content").val(),e.autoFormat=d.get("#qfb_html_auto_format").is(":checked"),f.saveLogic(),e.showInEmail=d.get("#qfb_show_in_email").is(":checked"),e.showInEntry=d.get("#qfb_show_in_entry").is(":checked"),e.visibility=d.get("#qfb_visibility").val();break;case"date":e.label=d.get("#qfb_label").val(),e.description=d.get("#qfb_description").val(),e.descriptionAbove=d.get("#qfb_description_above").val(),e.required=d.get("#qfb_required").is(":checked"),e.labelIcon=d.get("#qfb_label_icon").val(),e.fieldIconLeft=d.get("#qfb_field_icon_left").val(),e.fieldIconRight=d.get("#qfb_field_icon_right").val(),e.fieldSize=d.get("#qfb_field_size").val(),e.fieldWidth=d.get("#qfb_field_width").val(),e.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),e.customClass=d.get("#qfb_custom_class").val(),b.styles.saveStyles(),e.placeholder=d.get("#qfb_placeholder").val(),e.subLabel=d.get("#qfb_sub_label").val(),e.adminLabel=d.get("#qfb_admin_label").val(),e.tooltip=d.get("#qfb_tooltip").val(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),f.saveLogic(),e.defaultValue=d.get("#qfb_default_value_date").val(),e.dynamicDefaultValue=d.get("#qfb_dynamic_default_value").is(":checked"),e.dynamicKey=d.get("#qfb_dynamic_key").val(),e.dateMin=d.get("#qfb_date_min").val(),e.dateMax=d.get("#qfb_date_max").val(),e.dateViewStart=d.get("#qfb_date_view_start").val(),e.dateViewDepth=d.get("#qfb_date_view_depth").val(),e.dateShowFooter=d.get("#qfb_date_show_footer").is(":checked"),e.dateLocale=d.get("#qfb_date_locale").val(),f.datepickers[e.id]=e.dateLocale,e.dateFormatJs=d.get("#qfb_date_format_js").val(),e.dateFormat=d.get("#qfb_date_format").val(),e.dateAutoOpen=d.get("#qfb_date_auto_open").is(":checked"),e.readOnly=d.get("#qfb_read_only").is(":checked"),e.showInEmail=d.get("#qfb_show_in_email").is(":checked"),e.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),e.visibility=d.get("#qfb_visibility").val(),b.validators.saveValidators(),e.messageRequired=d.get("#qfb_message_required").val(),e.messageDateInvalidDate=d.get("#qfb_message_dateInvalidDate").val(),e.messageDateTooEarly=d.get("#qfb_message_dateTooEarly").val(),e.messageDateTooLate=d.get("#qfb_message_dateTooLate").val(),e.dateLocale&&-1===t.inArray(e.dateLocale,i.loadedPreviewLocales)&&b.loadPreviewLocale(e.dateLocale,function(){i.loadedPreviewLocales.push(e.dateLocale)});break;case"time":e.label=d.get("#qfb_label").val(),e.description=d.get("#qfb_description").val(),e.descriptionAbove=d.get("#qfb_description_above").val(),e.required=d.get("#qfb_required").is(":checked"),e.labelIcon=d.get("#qfb_label_icon").val(),e.fieldIconLeft=d.get("#qfb_field_icon_left").val(),e.fieldIconRight=d.get("#qfb_field_icon_right").val(),e.fieldSize=d.get("#qfb_field_size").val(),e.fieldWidth=d.get("#qfb_field_width").val(),e.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),e.customClass=d.get("#qfb_custom_class").val(),b.styles.saveStyles(),e.placeholder=d.get("#qfb_placeholder").val(),e.subLabel=d.get("#qfb_sub_label").val(),e.adminLabel=d.get("#qfb_admin_label").val(),e.tooltip=d.get("#qfb_tooltip").val(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),f.saveLogic(),e.defaultValue=d.get("#qfb_default_value_time").val(),e.dynamicDefaultValue=d.get("#qfb_dynamic_default_value").is(":checked"),e.dynamicKey=d.get("#qfb_dynamic_key").val(),e.timeMin=d.get("#qfb_time_min").val(),e.timeMax=d.get("#qfb_time_max").val(),e.timeInterval=d.get("#qfb_time_interval").val(),e.timeLocale=d.get("#qfb_time_locale").val(),f.timepickers[e.id]=e.timeLocale,e.timeFormatJs=d.get("#qfb_time_format_js").val(),e.timeFormat=d.get("#qfb_time_format").val(),e.timeAutoOpen=d.get("#qfb_time_auto_open").is(":checked"),e.readOnly=d.get("#qfb_read_only").is(":checked"),e.showInEmail=d.get("#qfb_show_in_email").is(":checked"),e.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),e.visibility=d.get("#qfb_visibility").val(),b.validators.saveValidators(),e.messageRequired=d.get("#qfb_message_required").val(),e.messageTimeInvalidTime=d.get("#qfb_message_timeInvalidTime").val(),e.messageTimeTooEarly=d.get("#qfb_message_timeTooEarly").val(),e.messageTimeTooLate=d.get("#qfb_message_timeTooLate").val(),e.timeLocale&&-1===t.inArray(e.timeLocale,i.loadedPreviewLocales)&&b.loadPreviewLocale(e.timeLocale,function(){i.loadedPreviewLocales.push(e.timeLocale)});break;case"password":e.label=d.get("#qfb_label").val(),e.description=d.get("#qfb_description").val(),e.descriptionAbove=d.get("#qfb_description_above").val(),e.required=d.get("#qfb_required").is(":checked"),e.labelIcon=d.get("#qfb_label_icon").val(),e.fieldIconLeft=d.get("#qfb_field_icon_left").val(),e.fieldIconRight=d.get("#qfb_field_icon_right").val(),e.fieldSize=d.get("#qfb_field_size").val(),e.fieldWidth=d.get("#qfb_field_width").val(),e.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),e.customClass=d.get("#qfb_custom_class").val(),b.styles.saveStyles(),e.placeholder=d.get("#qfb_placeholder").val(),e.subLabel=d.get("#qfb_sub_label").val(),e.adminLabel=d.get("#qfb_admin_label").val(),e.tooltip=d.get("#qfb_tooltip").val(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),f.saveLogic(),e.maxLength=d.get("#qfb_max_length").val(),e.visibility=d.get("#qfb_visibility").val(),b.validators.saveValidators(),e.messageRequired=d.get("#qfb_message_required").val(),e.messageLengthTooLong=d.get("#qfb_message_lengthTooLong").val();break;case"hidden":e.label=d.get("#qfb_label").val(),e.defaultValue=d.get("#qfb_default_value").val(),e.dynamicDefaultValue=d.get("#qfb_dynamic_default_value").is(":checked"),e.dynamicKey=d.get("#qfb_dynamic_key").val(),e.showInEmail=d.get("#qfb_show_in_email").is(":checked"),e.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),e.visibility=d.get("#qfb_visibility").val();break;case"name":e.label=d.get("#qfb_label").val(),e.description=d.get("#qfb_description").val(),e.descriptionAbove=d.get("#qfb_description_above").val(),e.prefixEnabled=d.get("#qfb_name_prefix_enabled").is(":checked"),e.prefixRequired=d.get("#qfb_name_prefix_required").is(":checked"),e.prefixNoneOption=d.get("#qfb_name_prefix_none_option").is(":checked"),e.prefixNoneOptionText=d.get("#qfb_name_prefix_none_option_text").val(),e.prefixSubLabel=d.get("#qfb_name_prefix_sub_label").val(),e.firstEnabled=d.get("#qfb_name_first_enabled").is(":checked"),e.firstRequired=d.get("#qfb_name_first_required").is(":checked"),e.firstPlaceholder=d.get("#qfb_name_first_placeholder").val(),e.firstSubLabel=d.get("#qfb_name_first_sub_label").val(),e.middleEnabled=d.get("#qfb_name_middle_enabled").is(":checked"),e.middleRequired=d.get("#qfb_name_middle_required").is(":checked"),e.middlePlaceholder=d.get("#qfb_name_middle_placeholder").val(),e.middleSubLabel=d.get("#qfb_name_middle_sub_label").val(),e.lastEnabled=d.get("#qfb_name_last_enabled").is(":checked"),e.lastRequired=d.get("#qfb_name_last_required").is(":checked"),e.lastPlaceholder=d.get("#qfb_name_last_placeholder").val(),e.lastSubLabel=d.get("#qfb_name_last_sub_label").val(),e.suffixEnabled=d.get("#qfb_name_suffix_enabled").is(":checked"),e.suffixRequired=d.get("#qfb_name_suffix_required").is(":checked"),e.suffixPlaceholder=d.get("#qfb_name_suffix_placeholder").val(),e.suffixSubLabel=d.get("#qfb_name_suffix_sub_label").val(),b.options.saveNamePrefixOptions(),e.labelIcon=d.get("#qfb_label_icon").val(),e.fieldSize=d.get("#qfb_field_size").val(),e.fieldWidth=d.get("#qfb_field_width").val(),e.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),e.customClass=d.get("#qfb_custom_class").val(),b.styles.saveStyles(),e.subLabel=d.get("#qfb_sub_label").val(),e.adminLabel=d.get("#qfb_admin_label").val(),e.tooltip=d.get("#qfb_tooltip").val(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),f.saveLogic(),e.dynamicDefaultValue=d.get("#qfb_dynamic_default_value").is(":checked"),e.dynamicKey=d.get("#qfb_dynamic_key").val(),e.showInEmail=d.get("#qfb_show_in_email").is(":checked"),e.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),e.visibility=d.get("#qfb_visibility").val(),b.validators.saveValidators(),e.messageRequired=d.get("#qfb_message_required").val();break;case"group":case"page":e.label=d.get("#qfb_label").val(),"page"==e.type&&f.updatePageTabNavLabel(e),"group"==e.type&&(e.title=d.get("#qfb_group_title").val(),e.titleTag=d.get("#qfb_group_title_tag").val(),e.description=d.get("#qfb_group_description").val()),"page"==e.type&&(e.title=d.get("#qfb_page_title").val(),e.titleTag=d.get("#qfb_page_title_tag").val(),e.description=d.get("#qfb_page_description").val()),"group"==e.type&&(e.fieldSize=d.get("#qfb_group_field_size").val(),e.fieldWidth=d.get("#qfb_group_field_width").val()),"page"==e.type&&(e.fieldSize=d.get("#qfb_page_field_size").val(),e.fieldWidth=d.get("#qfb_page_field_width").val()),e.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),e.groupStyle=d.get("#qfb_group_style").val(),e.borderColor=d.get("#qfb_border_color").val(),e.backgroundColor=d.get("#qfb_background_color").val(),b.styles.saveStyles(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),e.showLabelInEmail=d.get("#qfb_show_label_in_email").is(":checked"),e.showLabelInEntry=d.get("#qfb_show_label_in_entry").is(":checked"),f.saveLogic();break;case"submit":e.label=d.get("#qfb_label").val(),b.isMultiPageForm()&&!f.isOnLastPage(e)?(e.submitType=d.get("#qfb_next_button_type").val(),e.submitText=d.get("#qfb_next_button_text").val(),e.submitIcon=d.get("#qfb_next_button_icon").val(),e.submitIconPosition=d.get("#qfb_next_button_icon_position").val(),e.submitImage=d.get("#qfb_next_button_image").val(),e.submitHtml=d.get("#qfb_next_button_html").val(),e.nextType=d.get("#qfb_next_button_type").val(),e.nextText=d.get("#qfb_next_button_text").val(),e.nextIcon=d.get("#qfb_next_button_icon").val(),e.nextIconPosition=d.get("#qfb_next_button_icon_position").val(),e.nextImage=d.get("#qfb_next_button_image").val(),e.nextHtml=d.get("#qfb_next_button_html").val()):(e.submitType=d.get("#qfb_submit_button_type").val(),e.submitText=d.get("#qfb_submit_button_text").val(),e.submitIcon=d.get("#qfb_submit_button_icon").val(),e.submitIconPosition=d.get("#qfb_submit_button_icon_position").val(),e.submitImage=d.get("#qfb_submit_button_image").val(),e.submitHtml=d.get("#qfb_submit_button_html").val(),e.nextType=d.get("#qfb_submit_button_type").val(),e.nextText=d.get("#qfb_submit_button_text").val(),e.nextIcon=d.get("#qfb_submit_button_icon").val(),e.nextIconPosition=d.get("#qfb_submit_button_icon_position").val(),e.nextImage=d.get("#qfb_submit_button_image").val(),e.nextHtml=d.get("#qfb_submit_button_html").val()),e.backType=d.get("#qfb_back_button_type").val(),e.backText=d.get("#qfb_back_button_text").val(),e.backIcon=d.get("#qfb_back_button_icon").val(),e.backIconPosition=d.get("#qfb_back_button_icon_position").val(),e.backImage=d.get("#qfb_back_button_image").val(),e.backHtml=d.get("#qfb_back_button_html").val(),e.buttonStyle=d.get("#qfb_button_style").val(),e.buttonSize=d.get("#qfb_button_size").val(),e.buttonWidth=d.get("#qfb_button_width").val(),e.buttonWidthCustom=d.get("#qfb_button_width_custom").val(),b.styles.saveStyles(),f.saveLogic();break;case"row":if(!f.saveRowSettings())return!1}return f.updateElementLabel(e),f.setRequiredClass(t("#qfb-element-"+e.id),e),!0},loadLogic:function(e,t){e=e||i.showThisField,t=t||i.hideThisField;var o=f.editing;b.logic.buildLogic([{text:e,value:"1",selected:f.getValue(o,"logicAction")},{text:t,value:"0",selected:!f.getValue(o,"logicAction")}],[{text:i.ifAllOfTheseRulesMatch,value:"all",selected:"all"==f.getValue(o,"logicMatch")},{text:i.ifAnyOfTheseRulesMatch,value:"any",selected:"any"==f.getValue(o,"logicMatch")}],f.getValue(o,"logicRules"),d.get("#qfb-logic")),d.get("#qfb_logic_enabled").prop("checked",f.getValue(o,"logicEnabled")).closest(g.settingWrap).show(),f.getValue(o,"logicEnabled")&&d.get("#qfb-logic").closest(g.settingWrap).show()},saveLogic:function(){var e=f.editing;e.logicEnabled=d.get("#qfb_logic_enabled").is(":checked"),e.logicAction="0"!==d.get("#qfb-logic").find(".qfb-logic-action").val(),e.logicMatch=d.get("#qfb-logic").find(".qfb-logic-match").val(),e.logicRules=b.logic.getLogicRules(d.get("#qfb-logic"))},saveRowSettings:function(){var e,o=f.editing,a=t("#qfb_row_column_count").val(),l=t.isNumeric(a)?parseInt(a,10):1,n=[],s=0,c=!1;return l=g.clamp(l,1,20),e=f.columnWidths[l],t(".qfb-row-column-width").each(function(){var i=t(this).val();g.isNonEmptyString(i)?t.isNumeric(i)?(i=parseFloat(i),s+=i,n.push(g.toString(i))):(c=!0,t(this).addClass("qfb-field-error")):(s+=e,n.push(""))}),c?(g.addValidationError(d.get("#qfb-row-column-customise").closest(g.settingInputWrap),i.columnWidthMustBeNumeric),!1):s>100?(g.addValidationError(d.get("#qfb-row-column-customise").closest(g.settingInputWrap),i.columnWidthTotalTooHigh),!1):(o.columnSize=d.get("#qfb_row_column_size").val(),o.responsiveColumns=d.get("#qfb_responsive_columns").val(),o.responsiveColumnsCustom=d.get("#qfb_responsive_columns_custom").val(),f.setRowLayout(o,n),!0)},getRowLayout:function(e){for(var t=[],i=0;i<e.elements.length;i++)t.push(e.elements[i].width);return t},setRowLayout:function(e,i){var o=i.length,a=t("#qfb-child-elements-"+e.id).find("> .qfb-element-column").length;if(o>a)for(var l=0;l<o;l++)l>a-1&&f.addElement("column",e);else if(o<a){for(var n=[],s=t(),c=0;c<e.elements.length;c++)if(c>o-1){var r=e.elements[c];if(r.elements.length)for(var g=0;g<r.elements.length;g++)n.push(r.elements[g]),s=s.add(t("#qfb-element-"+r.elements[g].id).detach());t("#qfb-element-"+r.id).remove()}e.elements.splice(o,a-o);for(var b=e.elements[e.elements.length-1],d=t("#qfb-child-elements-"+b.id),_=0;_<n.length;_++)b.elements.push(n[_]);d.append(s)}f.setRowColumnClass(e);for(var p=0;p<i.length;p++)e.elements[p].width=i[p]},setRowColumnClass:function(e){t("#qfb-child-elements-"+e.id).removeClass("qfb-0-columns qfb-1-columns qfb-2-columns qfb-3-columns qfb-4-columns qfb-5-columns qfb-6-columns qfb-7-columns qfb-8-columns qfb-9-columns qfb-10-columns qfb-11-columns qfb-12-columns qfb-13-columns qfb-14-columns qfb-15-columns qfb-16-columns qfb-17-columns qfb-18-columns qfb-19-columns qfb-20-columns").addClass("qfb-"+e.elements.length+"-columns")},populateColumnWidthCustomise:function(){var e,o=f.editing,a=t("#qfb_row_column_count").val(),l=[];a=t.isNumeric(a)?parseInt(a,10):1,a=g.clamp(a,1,20),e=f.columnWidths[a];for(var n=0;n<a;n++){var s=t("<input>",{type:"text","class":"qfb-row-column-width",title:i.columnNumber.replace("%d",g.toString(n+1)),placeholder:e,inputmode:"numeric"});if(o&&"object"==typeof o.elements[n]){var c=g.toString(o.elements[n].width);g.isNonEmptyString(c)&&a<=8?s.val(c):s.val("")}l.push(s)}d.get("#qfb-row-column-customise").html(l)},savePreviewLabel:function(e,t){t.label=e,f.updateElementLabel(t),b.refreshPreview()},updateElementLabel:function(e){t("#qfb-plc-"+e.id).text(e.label),b.updateInsertVariableElement(e)},getAdminLabel:function(e){return"string"==typeof e.adminLabel&&e.adminLabel.length>0?e.adminLabel:"string"==typeof e.label&&e.label.length>0?e.label:""},getShortenedAdminLabel:function(e){return b.shorten(f.getAdminLabel(e))},setElementSettingsLabel:function(e){var i;if(t.inArray(e.type,["text","textarea","email","select","checkbox","radio","multiselect","file","date","time","password","name"])>-1){var o=d.get("#qfb_admin_label").val();i=g.isNonEmptyString(o)?o:d.get("#qfb_label").val()}else i=d.get("#qfb_label").val();d.get("#qfb-element-settings-element-label").text(i)},updatePageTabNavLabel:function(e){t(".qfb-page-tab-nav").each(function(o){var a=t(this);if(e.id===a.data("id")){var l=g.isNonEmptyString(e.label)?e.label:i.pageTabNavText.replace("%s",o+1);a.find(".qfb-page-tab-nav-label").text(l)}}),d.get("#qfb-page-tabs-nav-wrap").data("kendoTabStrip").resize(!0)},updatePageTabNavLabels:function(){t(".qfb-page-tab-nav").each(function(e){var o=t(this),a=f.getElementById(o.data("id")),l=a&&g.isNonEmptyString(a.label)?a.label:i.pageTabNavText.replace("%s",e+1);o.find(".qfb-page-tab-nav-label").text(l)}),d.get("#qfb-page-tabs-nav-wrap").data("kendoTabStrip").resize(!0)},sortElements:function(){var e=function(i,o){o=o||0;var a=[];return i.each(function(i){var l=t(this).data("id");if(l){var n=f.getElementById(l);n&&(n.position=i,n.parentId=o,"group"!=n.type&&"page"!=n.type&&"row"!=n.type&&"column"!=n.type||(n.elements=e(t("#qfb-child-elements-"+n.id).find("> .qfb-element"),n.id)),a.push(n))}}),a};b.form.elements=e(t(".qfb-page-tab-nav")),f.buildCache(),f.checkEmptyGroups(),f.squeezeElements()},buildCache:function(){function e(t){for(var i=0,o=t.length;i<o;i++)f.cache.push(t[i]),"group"!=t[i].type&&"page"!=t[i].type&&"row"!=t[i].type&&"column"!=t[i].type||e(t[i].elements)}f.cache=[],e(b.form.elements)},removeFromCache:function(e){for(var t=f.cache.length;t--;)if(f.cache[t].id==e.id){f.cache.splice(t,1);break}},addToFeatureCaches:function(e){switch(e.type){case"date":f.datepickers[e.id]=f.getValue(e,"dateLocale");break;case"time":f.timepickers[e.id]=f.getValue(e,"timeLocale");break;case"file":f.getValue(e,"enhancedUploadEnabled")&&(f.enhancedUploaders[e.id]=!0);break;case"recaptcha":f.recaptchas.push(e.id);break;case"select":case"multiselect":f.getValue(e,"enhancedSelectEnabled")&&(f.enhancedSelects[e.id]=!0)}},removeFromFeatureCaches:function(e){delete f.datepickers[e.id],delete f.timepickers[e.id],delete f.enhancedUploaders[e.id],delete f.enhancedSelects[e.id];for(var t=f.recaptchas.length;t--;)f.recaptchas[t]==e.id&&f.recaptchas.splice(t,1)},getElementById:function(e){for(var t=0,i=f.cache.length;t<i;t++)if(f.cache[t].id==e)return f.cache[t];return null},isOnFirstPage:function(e){if(b.form.elements.length)for(var t,i=e.parentId;i;){if((t=f.getElementById(i))&&t.id==b.form.elements[0].id)return!0;i=t.parentId}return!1},isOnLastPage:function(e){if(b.form.elements.length)for(var t,i=e.parentId;i;){if((t=f.getElementById(i))&&t.id==b.form.elements[b.form.elements.length-1].id)return!0;i=t.parentId}return!1},checkEmptyGroups:function(){t(".qfb-element-group").each(function(){var e=t(this);e.toggleClass("qfb-element-group-empty",0===e.find(".qfb-child-elements").children().length)})},squeezeElements:function(){t(".qfb-element").not(".qfb-element-page, .qfb-element-row, .qfb-element-column").each(function(){var e=t(this),i=e.width();e.is(":visible")&&i>0&&(i<300?e.addClass("qfb-pre-squeeze"):e.removeClass("qfb-pre-squeeze"),i<220?e.addClass("qfb-squeeze"):e.removeClass("qfb-squeeze"),i<75?e.addClass("qfb-squeeze-panic"):e.removeClass("qfb-squeeze-panic"))})},collapseGroup:function(e,o){var a=e.find("> .qfb-child-elements"),l=o.find("> i");e.hasClass("qfb-collapsed")?(l.removeClass().addClass("mdi mdi-remove_circle_outline"),o.attr("title",i.collapse),a.qfbSlideShow(function(){e.removeClass("qfb-collapsed")},{minHeight:40})):(e.addClass("qfb-collapsed"),a.qfbSlideHide(t.noop,{minHeight:0}),o.attr("title",i.expand),l.removeClass().addClass("mdi mdi-add_circle_outline"))},setRequiredClass:function(e,t){t.required?e.addClass("qfb-element-required"):e.removeClass("qfb-element-required")},checkTranslationTabVisibility:function(){var e=!1;d.get(".qfb-translations").find("> .qfb-setting").each(function(){if("block"==t(this).css("display"))return e=!0,!1}),d.get("#qfb-element-settings-tab-translations")[e?"fadeIn":"fadeOut"]()},getValue:function(e,t){return g.getProperty(e,t,g.getProperty(i.elements[e.type].config,t))}},e.builder.elements=f,e}(quform=function(e,t,i,o){"use strict";function a(){n.isNonEmptyString(s.get("#qfb_form_loading_type").val())?(s.get("#qfb_form_loading_position").add(s.get("#qfb_form_loading_color")).closest(n.settingWrap).qfbSlideShow(),"custom"==s.get("#qfb_form_loading_type").val()?s.get("#qfb_form_loading_custom").closest(n.settingWrap).qfbSlideShow():s.get("#qfb_form_loading_custom").closest(n.settingWrap).qfbSlideHide(),s.get("#qfb_form_loading_position").val().indexOf("over")>=0?(s.get("#qfb_form_loading_overlay").closest(n.settingWrap).qfbSlideShow(),s.get("#qfb_form_loading_overlay").is(":checked")?s.get("#qfb_form_loading_overlay_color").closest(n.settingWrap).qfbSlideShow():s.get("#qfb_form_loading_overlay_color").closest(n.settingWrap).qfbSlideHide()):s.get("#qfb_form_loading_overlay").add(s.get("#qfb_form_loading_overlay_color")).closest(n.settingWrap).qfbSlideHide()):s.get("#qfb_form_loading_custom").add(s.get("#qfb_form_loading_position")).add(s.get("#qfb_form_loading_color")).add(s.get("#qfb_form_loading_overlay")).add(s.get("#qfb_form_loading_overlay_color")).closest(n.settingWrap).qfbSlideHide()}var l,n=e.core,s=n.cache,c=t(window),r=t(document),f=!1,g=!1,b=null,d=null,p=!1,u=[];return l={form:{},savedFormJson:"",init:function(e){l.form=e,"function"==typeof Array.prototype.toJSON&&delete Array.prototype.toJSON,l.refreshPreview(),t("#qfb-form").submit(function(){return!1}),t("#qfb-panels").kendoSplitter({panes:[{collapsible:!0},{collapsible:!0,size:"50%"}],resize:function(){l.elements.squeezeElements()}}),c.on("resize.quform",_.debounce(function(){l.resizeSplitter()},250)),r.on("wp-collapse-menu",function(){l.resizeSplitter()}),s.get("#qfb-tabs").tctabs(".qfb-tabs-panel",{tabs:"> .qfb-tabs-nav > li",current:"qfb-current-tab"}),s.get("#qfb-tabs-icon-form").click(function(){l.activateTabs(0)}),s.get("#qfb-tabs-icon-settings").click(function(){l.activateTabs(1)}),s.get("#qfb-save-form").click(function(){l.save()}),l.elements.init(),l.filters.init(),l.validators.init(),l.notifications.init(),l.confirmations.init(),l.resizeSplitter(),l.savedFormJson=JSON.stringify(l.form),window.onbeforeunload=function(){if(l.update(),l.savedFormJson!==JSON.stringify(l.form))return i.unsavedChanges},s.get("#qfb-top").css({opacity:1}),f=!0},onWindowLoad:function(){s.get("#qfb-preview-refresh").click(l.refreshPreview),s.get("#qfb-form-settings-tabs").add(s.get("#qfb-form-style-tabs")).add(s.get("#qfb-field-background-color-tabs")).add(s.get("#qfb-field-border-color-tabs")).add(s.get("#qfb-field-text-color-tabs")).add(s.get("#qfb-button-background-color-tabs")).add(s.get("#qfb-button-border-color-tabs")).add(s.get("#qfb-button-text-color-tabs")).add(s.get("#qfb-button-icon-color-tabs")).tctabs(".qfb-tabs-panel",{tabs:"> .qfb-tabs-nav > li",current:"qfb-current-tab"}),s.get("#qfb-wrap-outer").on("click",".qfb-insert-variable",l.openInsertVariableMenu),s.get("#qfb-add-to-website").click(function(){s.get("body").css({overflow:"hidden"}),s.get("#qfb-add-to-website-popup").show(),s.get("#qfb-add-to-website-popup").find(".qfb-popup-content").scrollTop(0)}),s.get("#qfb-add-to-website-popup").find(".qfb-popup-close-button").add(s.get("#qfb-add-to-website-popup").find(".qfb-popup-overlay")).click(function(){s.get("#qfb-add-to-website-popup").hide(),s.get("body").css({overflow:""})}),s.get("#qfb_form_name").on("keyup blur",function(){var e=s.get("#qfb_form_name").val(),t=n.isNonEmptyString(e);s.get("#qfb-nav-form-name").text(t?e:"")[t?"fadeIn":"hide"]();var o='[quform id="'+l.form.id+'"'+(t?' name="'+e+'"':"")+"]",a='[quform_popup id="'+l.form.id+'"'+(t?' name="'+e+'"':"")+"]"+i.popupTriggerText+"[/quform_popup]";s.get("#qfb-nav-form-shortcode").val(o).prop("size",o.length),s.get("#qfb-add-shortcode-form").val(o),s.get("#qfb-add-shortcode-popup").val(a),s.get("#qfb-add-php-form").val("<?php echo do_shortcode('"+o+"'); ?>"),s.get("#qfb-add-php-popup").val("<?php echo do_shortcode('"+a+"'); ?>")}),s.get("#qfb-nav-form-shortcode").add(t(".qfb-code-input")).on("click",function(){t(this).focus().select()}),t.fn.select2&&s.get("#qfb_form_locale").select2({theme:"qfb",language:{noResults:function(){return o.noResultsFound}}}),s.get("#qfb_form_locale").change(function(){var e=s.get("#qfb_form_locale").val();n.isNonEmptyString(e)?-1===t.inArray(e,i.loadedPreviewLocales)&&l.loadPreviewLocale(e,function(){i.loadedPreviewLocales.push(e),l.refreshPreview()}):l.refreshPreview()}),s.get("#qfb_form_active").click(function(){s.get("#qfb_form_inactive_message").closest(n.settingWrap)[t(this).is(":checked")?"qfbSlideHide":"qfbSlideShow"]()}),s.get("#qfb_form_error_enabled").click(function(){s.get("#qfb_form_error_title").add(s.get("#qfb_form_error_content")).closest(n.settingWrap)[s.get("#qfb_form_error_enabled").is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),s.get("#qfb_form_theme").add(s.get("#qfb_form_field_size")).add(s.get("#qfb_form_field_width")).add(s.get("#qfb_form_button_style")).add(s.get("#qfb_form_button_size")).add(s.get("#qfb_form_button_width")).change(function(){l.refreshPreview()}),s.get("#qfb_form_responsive_elements").change(function(){s.get("#qfb_form_responsive_elements_custom").closest(n.settingWrap)["custom"==s.get("#qfb_form_responsive_elements").val()?"qfbSlideShow":"qfbSlideHide"]()}),s.get("#qfb_form_responsive_columns").change(function(){s.get("#qfb_form_responsive_columns_custom").closest(n.settingWrap)["custom"==s.get("#qfb_form_responsive_columns").val()?"qfbSlideShow":"qfbSlideHide"]()}),s.get("#qfb_form_width").on("keyup blur",function(){s.get("#qfb_form_position").closest(n.settingWrap)[n.isNonEmptyString(s.get("#qfb_form_width").val())?"qfbSlideShow":"qfbSlideHide"]()}),s.get("#qfb_form_label_position").change(function(){s.get("#qfb_form_label_width").closest(n.settingWrap)["left"==s.get("#qfb_form_label_position").val()?"qfbSlideShow":"qfbSlideHide"](),l.refreshPreview()}),s.get("#qfb_form_label_width").blur(l.refreshPreview),s.get("#qfb_form_field_width").change(function(){s.get("#qfb_form_field_width_custom").closest(n.settingWrap)["custom"==s.get("#qfb_form_field_width").val()?"qfbSlideShow":"qfbSlideHide"](function(){l.refreshPreview()})}),s.get("#qfb_form_button_width").change(function(){s.get("#qfb_form_button_width_custom").closest(n.settingWrap)["custom"==s.get("#qfb_form_button_width").val()?"qfbSlideShow":"qfbSlideHide"](function(){l.refreshPreview()})}),s.get("#qfb_form_submit_button_type").change(function(){var e=t(this).val();s.get("#qfb_form_submit_button_text").add(s.get("#qfb_form_submit_button_icon")).add(s.get("#qfb_form_submit_button_icon_position")).closest(n.settingWrap)["default"===e?"qfbSlideShow":"qfbSlideHide"](),s.get("#qfb_form_submit_button_image").closest(n.settingWrap)["image"===e?"qfbSlideShow":"qfbSlideHide"](),s.get("#qfb_form_submit_button_html").closest(n.settingWrap)["html"===e?"qfbSlideShow":"qfbSlideHide"]()}),s.get("#qfb_form_back_button_type").change(function(){var e=t(this).val();s.get("#qfb_form_back_button_text").add(s.get("#qfb_form_back_button_icon")).add(s.get("#qfb_form_back_button_icon_position")).closest(n.settingWrap)["default"===e?"qfbSlideShow":"qfbSlideHide"](),s.get("#qfb_form_back_button_image").closest(n.settingWrap)["image"===e?"qfbSlideShow":"qfbSlideHide"](),s.get("#qfb_form_back_button_html").closest(n.settingWrap)["html"===e?"qfbSlideShow":"qfbSlideHide"]()}),s.get("#qfb_form_next_button_type").change(function(){var e=t(this).val();s.get("#qfb_form_next_button_text").add(s.get("#qfb_form_next_button_icon")).add(s.get("#qfb_form_next_button_icon_position")).closest(n.settingWrap)["default"===e?"qfbSlideShow":"qfbSlideHide"](),s.get("#qfb_form_next_button_image").closest(n.settingWrap)["image"===e?"qfbSlideShow":"qfbSlideHide"](),s.get("#qfb_form_next_button_html").closest(n.settingWrap)["html"===e?"qfbSlideShow":"qfbSlideHide"]()}),t.each(["#qfb_form_submit_button_image","#qfb_form_back_button_image","#qfb_form_next_button_image"],function(e,i){t(i+"_browse").qfbMediaBrowser({callback:function(e){try{t(i).val(e.first().toJSON().url)}catch(o){}}})}),s.get("#qfb_form_loading_type").on("change",a),s.get("#qfb_form_loading_position").on("change",a),s.get("#qfb_form_loading_overlay").on("click",a),s.get("#qfb_form_tooltips_enabled").click(function(){s.get("#qfb_form_tooltips_enabled").is(":checked")?s.get("#qfb_form_tooltip_type").add(s.get("#qfb_form_tooltip_event")).add(s.get("#qfb_form_tooltip_icon")).add(s.get("#qfb_form_tooltip_style")).closest(n.settingWrap).qfbSlideShow():s.get("#qfb_form_tooltip_type").add(s.get("#qfb_form_tooltip_event")).add(s.get("#qfb_form_tooltip_icon")).add(s.get("#qfb_form_tooltip_style")).closest(n.settingWrap).qfbSlideHide()}),t("#qfb-form-db-change-password").click(function(){t(this).closest(n.settingInputWrap).html(i.dbPasswordHtml)}),t("#qfb-form-db-add-column").click(function(){l.addDbColumn()}),s.get("#qfb-form-db-columns").on("click",".qfb-form-db-column .qfb-small-remove-button",function(){l.removeDbColumn(t(this))}),s.get("#qfb_form_db_wordpress").click(function(){s.get("#qfb_form_db_wordpress").is(":checked")?s.get("#qfb_form_db_host").add(s.get("#qfb_form_db_username")).add("#qfb_form_db_password, #qfb-form-db-change-password").add(s.get("#qfb_form_db_database")).closest(n.settingWrap).qfbSlideHide():s.get("#qfb_form_db_host").add(s.get("#qfb_form_db_username")).add("#qfb_form_db_password, #qfb-form-db-change-password").add(s.get("#qfb_form_db_database")).closest(n.settingWrap).qfbSlideShow()}),setTimeout(l.setupTooltips,4),setTimeout(l.setupColorpickers,8),setTimeout(l.setupIconSelectors,12),t.fn.editable&&s.get("#qfb-nav-form-name").editable(function(e){return e=e.substr(0,64),s.get("#qfb_form_name").val(e).trigger("blur"),n.htmlEntities(e)},{onblur:"submit",onreset:function(e,t){s.get("#qfb_form_name").val(t.revert).trigger("blur")},placeholder:"",height:35,data:function(e){return n.htmlEntityDecode(e)}}),s.get("#qfb-preview-size-phone").click(function(){var e=s.get("#qfb-panels").data("kendoSplitter");s.get("#qfb-builder-panel").hasClass("k-state-collapsed")&&(e.expand(s.get("#qfb-builder-panel")),s.get("#qfb-preview-only").removeClass("qfb-active")),s.get("#qfb-preview-panel").hasClass("k-state-collapsed")&&(e.expand(s.get("#qfb-preview-panel")),s.get("#qfb-preview-hide").removeClass("qfb-active")),e.size(s.get("#qfb-preview-panel"),"479px")}),s.get("#qfb-preview-size-tablet").click(function(){var e=s.get("#qfb-panels").data("kendoSplitter");s.get("#qfb-builder-panel").hasClass("k-state-collapsed")&&(e.expand(s.get("#qfb-builder-panel")),s.get("#qfb-preview-only").removeClass("qfb-active")),s.get("#qfb-preview-panel").hasClass("k-state-collapsed")&&(e.expand(s.get("#qfb-preview-panel")),s.get("#qfb-preview-hide").removeClass("qfb-active")),e.size(s.get("#qfb-preview-panel"),"767px")}),s.get("#qfb-preview-hide").click(function(){var e=s.get("#qfb-panels").data("kendoSplitter");s.get("#qfb-builder-panel").hasClass("k-state-collapsed")&&(e.expand(s.get("#qfb-builder-panel")),s.get("#qfb-preview-only").removeClass("qfb-active")),s.get("#qfb-preview-panel").hasClass("k-state-collapsed")?(e.expand(s.get("#qfb-preview-panel")),s.get("#qfb-preview-hide").removeClass("qfb-active")):(e.collapse(s.get("#qfb-preview-panel")),s.get("#qfb-preview-hide").addClass("qfb-active"))}),s.get("#qfb-preview-only").click(function(){var e=s.get("#qfb-panels").data("kendoSplitter");s.get("#qfb-preview-panel").hasClass("k-state-collapsed")&&(e.expand(s.get("#qfb-preview-panel")),s.get("#qfb-preview-hide").removeClass("qfb-active")),s.get("#qfb-builder-panel").hasClass("k-state-collapsed")?(e.expand(s.get("#qfb-builder-panel")),s.get("#qfb-preview-only").removeClass("qfb-active")):(e.collapse(s.get("#qfb-builder-panel")),s.get("#qfb-preview-only").addClass("qfb-active"))}),s.get("#qfb_form_tooltip_style").add(s.get("#qfb_form_tooltip_my")).add(s.get("#qfb_form_tooltip_at")).change(l.updateTooltipStyle),s.get("#qfb_form_tooltip_shadow").add(s.get("#qfb_form_tooltip_rounded")).click(l.updateTooltipStyle),window.tinymce&&(window.tinymce.ui.FloatPanel.zIndex=100007),l.options.onWindowLoad(),l.styles.onWindowLoad()},saveValidation:function(){s.get("#qfb-settings").find(".qfb-validation-error").remove(),s.get("#qfb-settings").find(".qfb-field-error").removeClass("qfb-field-error");var e=[];if(l.form.name.length||e.push({context:s.get("#qfb_form_name"),message:o.thisFieldIsRequired,scrollTarget:s.get("#qfb_form_name").closest(n.settingWrap),tabs:[1,0]}),e.length){n.showFixedMessage(i.correctHighlightedFields,"error");for(var t=0;t<e.length;t++)0===t&&l.activateTabs(e[t].tabs[0],e[t].tabs[1]),n.addValidationError(e[t].context.addClass("qfb-field-error").closest(n.settingInputWrap),e[t].message);return n.scrollTo(e[0].scrollTarget,s.get("#qfb-builder-panel")),!1}return!0},save:function(){g||(g=!0,l.update(),l.saveValidation()?("number"==typeof b&&(clearTimeout(b),b=null),s.get("#qfb-save-form").removeClass("qfb-saving qfb-saved qfb-save-error").addClass("qfb-saving"),t.ajax({type:"POST",url:o.ajaxUrl,data:{action:"quform_save_form",_ajax_nonce:i.saveFormNonce,form:JSON.stringify(l.form)},dataType:"json"}).done(function(e){switch((e=n.sanitiseResponse(e)).type){case"success":l.savedFormJson=JSON.stringify(l.form),n.showFixedMessage(i.formSaved,"success"),s.get("#qfb-save-form").removeClass("qfb-saving").addClass("qfb-saved"),b=setTimeout(function(){s.get("#qfb-save-form").removeClass("qfb-saved")},2e3);break;case"error":case"invalid":n.showFixedMessage(i.errorSavingForm+"<br>"+e.message,"error"),s.get("#qfb-save-form").removeClass("qfb-saving").addClass("qfb-save-error")}}).fail(function(){n.showFixedMessage(i.errorSavingForm+"<br>"+o.ajaxError,"error"),s.get("#qfb-save-form").removeClass("qfb-saving").addClass("qfb-save-error")}).always(function(){g=!1})):g=!1)},update:function(){var e=l.form;e.name=s.get("#qfb_form_name").val(),e.title=s.get("#qfb_form_title").val(),e.titleTag=s.get("#qfb_form_title_tag").val(),e.description=s.get("#qfb_form_description").val(),e.active=s.get("#qfb_form_active").is(":checked"),e.inactiveMessage=s.get("#qfb_form_inactive_message").val(),e.trashed=!1,e.ajax=s.get("#qfb_form_ajax").is(":checked"),e.saveEntry=s.get("#qfb_form_save_entry").is(":checked"),e.honeypot=s.get("#qfb_form_honeypot").is(":checked"),e.logicAnimation=s.get("#qfb_form_logic_animation").is(":checked"),e.theme=s.get("#qfb_form_theme").val(),e.responsiveElements=s.get("#qfb_form_responsive_elements").val(),e.responsiveElementsCustom=s.get("#qfb_form_responsive_elements_custom").val(),e.responsiveColumns=s.get("#qfb_form_responsive_columns").val(),e.responsiveColumnsCustom=s.get("#qfb_form_responsive_columns_custom").val(),e.width=s.get("#qfb_form_width").val(),e.position=s.get("#qfb_form_position").val(),e.previewColor=s.get("#qfb_form_preview_color").val(),l.styles.updateGlobalStyles(),e.labelTextColor=s.get("#qfb_form_label_text_color").val(),e.labelPosition=s.get("#qfb_form_label_position").val(),e.labelWidth=s.get("#qfb_form_label_width").val(),e.requiredText=s.get("#qfb_form_required_text").val(),e.requiredTextColor=s.get("#qfb_form_required_text_color").val(),e.fieldSize=s.get("#qfb_form_field_size").val(),e.fieldWidth=s.get("#qfb_form_field_width").val(),e.fieldWidthCustom=s.get("#qfb_form_field_width_custom").val(),e.fieldBackgroundColor=s.get("#qfb_form_field_background_color").val(),e.fieldBackgroundColorHover=s.get("#qfb_form_field_background_color_hover").val(),e.fieldBackgroundColorFocus=s.get("#qfb_form_field_background_color_focus").val(),e.fieldBorderColor=s.get("#qfb_form_field_border_color").val(),e.fieldBorderColorHover=s.get("#qfb_form_field_border_color_hover").val(),e.fieldBorderColorFocus=s.get("#qfb_form_field_border_color_focus").val(),e.fieldTextColor=s.get("#qfb_form_field_text_color").val(),e.fieldTextColorHover=s.get("#qfb_form_field_text_color_hover").val(),e.fieldTextColorFocus=s.get("#qfb_form_field_text_color_focus").val(),e.buttonStyle=s.get("#qfb_form_button_style").val(),e.buttonSize=s.get("#qfb_form_button_size").val(),e.buttonWidth=s.get("#qfb_form_button_width").val(),e.buttonWidthCustom=s.get("#qfb_form_button_width_custom").val(),e.buttonAnimation=s.get("#qfb_form_button_animation").val(),e.buttonBackgroundColor=s.get("#qfb_form_button_background_color").val(),e.buttonBackgroundColorHover=s.get("#qfb_form_button_background_color_hover").val(),e.buttonBackgroundColorActive=s.get("#qfb_form_button_background_color_active").val(),e.buttonBorderColor=s.get("#qfb_form_button_border_color").val(),e.buttonBorderColorHover=s.get("#qfb_form_button_border_color_hover").val(),e.buttonBorderColorActive=s.get("#qfb_form_button_border_color_active").val(),e.buttonTextColor=s.get("#qfb_form_button_text_color").val(),e.buttonTextColorHover=s.get("#qfb_form_button_text_color_hover").val(),e.buttonTextColorActive=s.get("#qfb_form_button_text_color_active").val(),e.buttonIconColor=s.get("#qfb_form_button_icon_color").val(),e.buttonIconColorHover=s.get("#qfb_form_button_icon_color_hover").val(),e.buttonIconColorActive=s.get("#qfb_form_button_icon_color_active").val(),e.submitType=s.get("#qfb_form_submit_button_type").val(),e.submitText=s.get("#qfb_form_submit_button_text").val(),e.submitIcon=s.get("#qfb_form_submit_button_icon").val(),e.submitIconPosition=s.get("#qfb_form_submit_button_icon_position").val(),e.submitImage=s.get("#qfb_form_submit_button_image").val(),e.submitHtml=s.get("#qfb_form_submit_button_html").val(),e.nextType=s.get("#qfb_form_next_button_type").val(),e.nextText=s.get("#qfb_form_next_button_text").val(),e.nextIcon=s.get("#qfb_form_next_button_icon").val(),e.nextIconPosition=s.get("#qfb_form_next_button_icon_position").val(),e.nextImage=s.get("#qfb_form_next_button_image").val(),e.nextHtml=s.get("#qfb_form_next_button_html").val(),e.backType=s.get("#qfb_form_back_button_type").val(),e.backText=s.get("#qfb_form_back_button_text").val(),e.backIcon=s.get("#qfb_form_back_button_icon").val(),e.backIconPosition=s.get("#qfb_form_back_button_icon_position").val(),e.backImage=s.get("#qfb_form_back_button_image").val(),e.backHtml=s.get("#qfb_form_back_button_html").val(),e.pageProgressType=s.get("#qfb_form_page_progress_type").val(),e.loadingType=s.get("#qfb_form_loading_type").val(),e.loadingCustom=s.get("#qfb_form_loading_custom").val(),e.loadingPosition=s.get("#qfb_form_loading_position").val(),e.loadingColor=s.get("#qfb_form_loading_color").val(),e.loadingOverlay=s.get("#qfb_form_loading_overlay").is(":checked"),e.loadingOverlayColor=s.get("#qfb_form_loading_overlay_color").val(),e.tooltipsEnabled=s.get("#qfb_form_tooltips_enabled").is(":checked"),e.tooltipType=s.get("#qfb_form_tooltip_type").val(),e.tooltipEvent=s.get("#qfb_form_tooltip_event").val(),e.tooltipIcon=s.get("#qfb_form_tooltip_icon").val(),e.tooltipStyle=s.get("#qfb_form_tooltip_style").val(),e.tooltipCustom=s.get("#qfb_form_tooltip_custom").val(),e.tooltipMy=s.get("#qfb_form_tooltip_my").val(),e.tooltipAt=s.get("#qfb_form_tooltip_at").val(),e.tooltipShadow=s.get("#qfb_form_tooltip_shadow").is(":checked"),e.tooltipRounded=s.get("#qfb_form_tooltip_rounded").is(":checked"),e.tooltipClasses=l.getTooltipClasses().join(" "),e.errorsPosition=s.get("#qfb_form_errors_position").val(),e.errorsIcon=s.get("#qfb_form_errors_icon").val(),e.errorEnabled=s.get("#qfb_form_error_enabled").is(":checked"),e.errorTitle=s.get("#qfb_form_error_title").val(),e.errorContent=s.get("#qfb_form_error_content").val(),e.locale=s.get("#qfb_form_locale").val(),e.rtl=s.get("#qfb_form_rtl").val(),e.messageRequired=s.get("#qfb_form_message_required").val(),e.pageProgressNumbersText=s.get("#qfb_form_page_progress_numbers_text").val();var i=n.getProperty(e,"databasePassword");if(i=n.isNonEmptyString(i)?i:"",e.databaseEnabled=s.get("#qfb_form_db_enabled").is(":checked"),e.databaseWordpress=s.get("#qfb_form_db_wordpress").is(":checked"),e.databaseHost=s.get("#qfb_form_db_host").val(),e.databaseUsername=s.get("#qfb_form_db_username").val(),e.databaseDatabase=s.get("#qfb_form_db_database").val(),e.databaseTable=s.get("#qfb_form_db_table").val(),t("#qfb_form_db_password").length?e.databasePassword=t("#qfb_form_db_password").val():e.databasePassword=i,l.updateDbFields(),e.hasDatepicker=n.isNonEmptyObject(l.elements.datepickers),e.hasTimepicker=n.isNonEmptyObject(l.elements.timepickers),e.hasEnhancedUploader=n.isNonEmptyObject(l.elements.enhancedUploaders),e.hasEnhancedSelect=n.isNonEmptyObject(l.elements.enhancedSelects),e.locales=[],n.isNonEmptyString(e.locale)&&e.locales.push(e.locale),e.hasDatepicker)for(var o in l.elements.datepickers)l.elements.datepickers.hasOwnProperty(o)&&e.locales.push(l.elements.datepickers[o]);if(e.hasTimepicker)for(var a in l.elements.timepickers)l.elements.timepickers.hasOwnProperty(a)&&e.locales.push(l.elements.timepickers[a])},insertAtCursor:function(e,t){var i,o,a,l,n;return document.selection?(e.focus(),document.selection.createRange().text=t,e.focus()):e.selectionStart||0===e.selectionStart?(l=e.value,i=e.selectionStart,o=e.selectionEnd,a=e.scrollTop,e.value=l.substring(0,i)+t+l.substring(o,l.length),e.selectionStart=i+t.length,e.selectionEnd=i+t.length,e.scrollTop=a,e.focus()):(e.value+=t,e.focus()),document.createEvent?((n=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),e.dispatchEvent(n)):e.fireEvent&&e.fireEvent("onchange"),!0},openInsertVariableMenu:function(e){e.preventDefault(),e.stopPropagation(),l.closeInsertVariableMenu();var i=t(this),o=i.hasClass("qfb-insert-variable-pre-process")?s.get("#qfb-insert-variable-pre-process"):s.get("#qfb-insert-variable"),a=o.outerHeight(),f=i.offset().top-c.scrollTop()+i.outerHeight()/2-a/2,g=i.offset().left+i.outerWidth(),b="auto";f<42?f=42:c.scrollTop()+f+a>c.height()-10&&(f="auto",b=10),i.addClass("qfb-active"),o.css({top:f,left:g,bottom:b}).fadeIn(200),s.get("#qfb-wrap-outer").one("click.insert-variable",".qfb-variable",function(e){e.preventDefault();var o=i.data("target-id"),a=o&&window.tinymce?window.tinymce.get(o):null,s=n.toString(t(this).data("tag"))||"";if(s.length)if(a&&!a.isHidden())a.execCommand("mceInsertContent",!1,s);else{var c=t("#"+o);c.length&&l.insertAtCursor(c[0],s)}}),r.one("click.close-insert-variable",l.closeInsertVariableMenu)},closeInsertVariableMenu:function(){t(".qfb-insert-variable").removeClass("qfb-active"),s.get("#qfb-insert-variable").add(s.get("#qfb-insert-variable-pre-process")).hide().scrollTop(0),s.get("#qfb-wrap-outer").off("click.insert-variable"),r.off("click.close-insert-variable")},addInsertVariableElement:function(e){if("html"!==e.type&&"group"!==e.type&&"page"!==e.type&&"submit"!==e.type&&"row"!==e.type&&"column"!==e.type){var i=l.elements.getShortenedAdminLabel(e);s.get("#qfb-insert-variable-element").append(t('<div class="qfb-variable">').data({tag:"{element|id:"+e.id+"|"+i+"}",id:e.id}).text(i))}},updateInsertVariableElement:function(e){var i=l.elements.getShortenedAdminLabel(e);s.get("#qfb-insert-variable-element").find(".qfb-variable").filter(function(){return t(this).data("id")===e.id}).data({tag:"{element|"+i+"|id:"+e.id+"}",id:e.id}).text(i)},removeInsertVariableElement:function(e){s.get("#qfb-insert-variable-element").find(".qfb-variable").filter(function(){return t(this).data("id")===e.id}).remove()},shorten:function(e,t,i){t=t||30,i=i||"...";var o=Math.floor(t/2);if(e.length>t){e=e.slice(0,o-1)+i+e.slice(-o)}return e},updateTooltipStyle:function(){"custom"==s.get("#qfb_form_tooltip_style").val()?(s.get("#qfb-tooltip-example-wrap").qfbSlideHide(),s.get("#qfb_form_tooltip_custom").closest(n.subSettingWrap).qfbSlideShow()):(t.fn.qtip&&s.get("#qfb-tooltip-example").qtip("destroy").qtip({content:i.exampleTooltip,style:{classes:l.getTooltipClasses().join(" ")},position:{my:s.get("#qfb_form_tooltip_my").val(),at:s.get("#qfb_form_tooltip_at").val()}}),s.get("#qfb_form_tooltip_custom").val("").closest(n.subSettingWrap).qfbSlideHide(),s.get("#qfb-tooltip-example-wrap").qfbSlideShow())},getTooltipClasses:function(){var e=[s.get("#qfb_form_tooltip_style").val()];return s.get("#qfb_form_tooltip_shadow").is(":checked")&&e.push("qtip-shadow"),s.get("#qfb_form_tooltip_rounded").is(":checked")&&e.push("qtip-rounded"),e},resizeSplitter:function(){var e=s.get("#qfb-panels").data("kendoSplitter"),t=c.height()-s.get("#qfb-nav").outerHeight(!0)-s.get("#qfb-control-panel").outerHeight(!0)-s.get("#wpadminbar").outerHeight(!0)-s.get("#qfb-add-elements").outerHeight(!0)-20;s.get("#qfb-page-messages").length&&(t-=s.get("#qfb-page-messages").outerHeight(!0)),e.wrapper.height(t),e.resize(!0)},addDbColumn:function(){var e=t(i.dbColumnHtml),o=l.uniqid("qfb-");e.find(".qfb-form-db-column-value").attr("id",o),e.find(".qfb-insert-variable").data("target-id",o),s.get("#qfb-form-db-columns-empty").hide(),s.get("#qfb-form-db-columns").show().append(e)},removeDbColumn:function(e){e.closest(".qfb-form-db-column").remove(),0===s.get("#qfb-form-db-columns").children().length&&(s.get("#qfb-form-db-columns").hide(),s.get("#qfb-form-db-columns-empty").show())},updateDbFields:function(){l.form.databaseColumns=[],s.get("#qfb-form-db-columns").find(".qfb-form-db-column").each(function(){var e=t(this),i=e.find(".qfb-form-db-column-name").val(),o=e.find(".qfb-form-db-column-value").val();i.length&&l.form.databaseColumns.push({name:i,value:o})})},buildMessageBox:function(e,i,o){var a=t('<div class="qfb-message-box qfb-message-box-'+(i=i||"info")+'">').append(t('<div class="qfb-message-box-inner">').text(e));return o&&a.addClass(o),a},getPreviewBackgroundColor:function(){var e=s.get("#qfb_form_preview_color").val();if(n.isNonEmptyString(e))return e;var t=s.get("#qfb_form_theme").val();return n.isNonEmptyString(t)&&(e=n.getProperty(i,"themes."+t+".previewColor"),n.isNonEmptyString(e))?e:"transparent"},refreshPreview:function(){var e=s.get("#qfb-preview-frame")[0].contentWindow;if(!f||"object"!=typeof e||"object"!=typeof e.quform||"object"!=typeof e.quform.preview||!e.quform.preview.loaded)return"number"==typeof d&&clearTimeout(d),void(d=setTimeout(function(){l.refreshPreview()},250));"number"==typeof d&&(clearTimeout(d),d=null);var a=e.jQuery;l.update();var c=function(e){a("#qfb-preview-form").html(""),a("#qfb-preview-custom-css").html(""),a("#qfb-preview-error").text(i.previewError+(e?" ("+e+")":"")).fadeIn()};a.ajax({url:i.ajaxUrl,type:"POST",dataType:"json",data:{form:JSON.stringify(l.form),page:t(".qfb-current-page").data("id"),action:"quform_preview_form"}}).done(function(t){if("success"==(t=n.sanitiseResponse(t)).type){if(a(".k-animation-container, .quform-datepicker, .quform-timepicker, body > .select2-container").remove(),a("body").css("background-color",l.getPreviewBackgroundColor()),a("#qfb-preview-custom-css").html(t.css),a("#qfb-preview-form").html(t.form).find(".quform-form").quform(),a("#qfb-preview-error").text("").hide(),p)e.QuformRecaptchaLoaded();else if(l.elements.recaptchas.length){var i=l.elements.getElementById(l.elements.recaptchas[0]);a.getScript("https://www.google.com/recaptcha/api.js?onload=QuformRecaptchaLoaded&render=explicit&hl="+i.recaptchaLang),p=!0}}else c(t.message)}).fail(function(){c(o.ajaxError)}).always(function(){a("#qfb-preview-loading").hide()})},loadPreviewLocale:function(e,t){s.get("#qfb-preview-frame")&&s.get("#qfb-preview-frame")[0]&&s.get("#qfb-preview-frame")[0].contentWindow&&s.get("#qfb-preview-frame")[0].contentWindow.jQuery&&s.get("#qfb-preview-frame")[0].contentWindow.jQuery.ajax({url:o.pluginUrl+"/js/cultures/kendo.culture."+e+".min.js",dataType:"script",cache:!0}).done(t)},activateTabs:function(e,t){s.get("#qfb-tabs").data("tabs").click(e),0===e?(s.get("#qfb-tabs-icon-settings").removeClass("qfb-current-tab"),s.get("#qfb-tabs-icon-form").addClass("qfb-current-tab")):1===e&&(s.get("#qfb-tabs-icon-form").removeClass("qfb-current-tab"),s.get("#qfb-tabs-icon-settings").addClass("qfb-current-tab")),"number"==typeof t&&s.get("#qfb-form-settings-tabs").data("tabs").click(t)},uniqid:function(e,t){void 0===e&&(e="");var i,o=function(e,t){return e=parseInt(e,10).toString(16),t<e.length?e.slice(e.length-t):t>e.length?Array(t-e.length+1).join("0")+e:e};return this.php_js||(this.php_js={}),this.php_js.uniqidSeed||(this.php_js.uniqidSeed=Math.floor(123456789*Math.random())),this.php_js.uniqidSeed++,i=e,i+=o(parseInt((new Date).getTime()/1e3,10),8),i+=o(this.php_js.uniqidSeed,5),t&&(i+=(10*Math.random()).toFixed(8).toString()),i},setupTooltips:function(){t.isFunction(t.fn.qtip)&&(t(".qfb-element-tooltip").qtip({show:{solo:!0},style:{classes:"qtip-dark qtip-red-quform"},content:{text:function(){return t(this).find(".qfb-tooltip-content").html()}},position:{viewport:!0}}),l.setupContainerTooltips(s.get("#qfb-add-elements")),l.setupContainerTooltips(s.get("#qfb-builder-panel")),s.get("#qfb-tooltip-example").qtip({content:i.exampleTooltip,style:{classes:l.getTooltipClasses().join(" ")},position:{my:s.get("#qfb_form_tooltip_my").val(),at:s.get("#qfb_form_tooltip_at").val()}}))},setupContainerTooltips:function(e){e.find(".qfb-tooltip, .qfb-tooltip-icon").qtip({show:{solo:!0},style:{classes:"qtip-dark qtip-dark-quform"},content:{text:function(){return t(this).find(".qfb-tooltip-content").html()}},hide:{fixed:!0},position:{container:e,viewport:!0}})},setupColorpickers:function(){if(t.isFunction(t.fn.spectrum)){var e=t(".qfb-colorpicker");e.each(function(){var e=tinycolor(t(this).val());if(e.isValid()){var i=e.toString();-1===t.inArray(i,u)&&u.push(i)}}),e.each(function(){var e=t(this),i=tinycolor(e.val()),o=t('<div class="qfb-color-indicator">').insertAfter(e),a=function(e){o.css("background-color",e&&e.isValid()?e.toString():"transparent")},l=function(t){e.val(t&&t.isValid()?t.toString():""),a(t)};o.spectrum({color:i.isValid()?i:"",clickoutFiresChange:!0,allowEmpty:!0,showPalette:!0,palette:u,showSelectionPalette:!0,localStorageKey:"quform.builder",showAlpha:!0,showInput:!0,preferredFormat:"hex",move:l,hide:l}),e.on("keyup blur",function(){o.spectrum("set",e.val()),a(tinycolor(e.val()))}),a(i)})}},setupIconSelectors:function(){var e=t(".qfb-icon-selector-icon"),o=t(".qfb-icon-selector-search input");o.on("keyup blur",function(){var i=t(this).val().toLowerCase();i?e.each(function(){var e=t(this),o=e.data("icon"),a=o.replace(/[\-_]/gi," ");o.indexOf(i)>-1||a.indexOf(i)>-1?e.show():e.hide()}):e.show()}),s.get("#qfb-wrap-outer").on("click",".qfb-select-icon-button",function(){var e=t(this).closest(".qfb-select-icon");s.get("#qfb-icon-selector-popup").show(),o.focus(),s.get("#qfb-wrap-outer").off("click.quform-select-icon").one("click.quform-select-icon",".qfb-icon-selector-icon",function(){var i=t(this).data("icon");e.find(".qfb-select-icon-value").val(i),e.find(".qfb-select-icon-preview").html('<i class="'+i+'"></i>'),e.find(".qfb-select-icon-clear").show(),s.get("#qfb-icon-selector-popup").hide(),o.val("").trigger("blur")})}),s.get("#qfb-wrap-outer").on("click",".qfb-select-icon-clear",function(){var e=t(this).closest(".qfb-select-icon");e.find(".qfb-select-icon-value").val(""),e.find(".qfb-select-icon-preview").text(i.noIcon),e.find(".qfb-select-icon-clear").hide()}),s.get("#qfb-icon-selector-popup").find(".qfb-popup-buttons > .qfb-popup-close-button").click(function(){s.get("#qfb-icon-selector-popup").hide(),o.val("").trigger("blur")})},loadIconOption:function(e,t){var o=e.closest(".qfb-select-icon");return n.isNonEmptyString(t)?(e.val(t),o.find(".qfb-select-icon-preview").html('<i class="'+t+'"></i>'),o.find(".qfb-select-icon-clear").show()):(e.val(""),o.find(".qfb-select-icon-preview").text(i.noIcon),o.find(".qfb-select-icon-clear").hide()),e},isMultiPageForm:function(){return l.form.elements.length>1},checkPageButtonSettings:function(){if(l.isMultiPageForm()){switch(s.get("#qfb_form_back_button_type").add(s.get("#qfb_form_next_button_type")).closest(n.settingWrap).show(),s.get("#qfb_form_back_button_type").val()){case"default":s.get("#qfb_form_back_button_text").add(s.get("#qfb_form_back_button_icon")).add(s.get("#qfb_form_back_button_icon_position")).closest(n.settingWrap).show();break;case"image":s.get("#qfb_form_back_button_image").closest(n.settingWrap).show();break;case"html":s.get("#qfb_form_back_button_html").closest(n.settingWrap).show()}switch(s.get("#qfb_form_next_button_type").val()){case"default":s.get("#qfb_form_next_button_text").add(s.get("#qfb_form_next_button_icon")).add(s.get("#qfb_form_next_button_icon_position")).closest(n.settingWrap).show();break;case"image":s.get("#qfb_form_next_button_image").closest(n.settingWrap).show();break;case"html":s.get("#qfb_form_next_button_html").closest(n.settingWrap).show()}}else s.get("#qfb_form_back_button_type").add(s.get("#qfb_form_back_button_text")).add(s.get("#qfb_form_back_button_image")).add(s.get("#qfb_form_back_button_html")).add(s.get("#qfb_form_back_button_icon")).add(s.get("#qfb_form_back_button_icon_position")).add(s.get("#qfb_form_next_button_type")).add(s.get("#qfb_form_next_button_text")).add(s.get("#qfb_form_next_button_image")).add(s.get("#qfb_form_next_button_html")).add(s.get("#qfb_form_next_button_icon")).add(s.get("#qfb_form_next_button_icon_position")).closest(n.settingWrap).hide()}},c.on("load",l.onWindowLoad),e.builder=l,e}(quform,jQuery,quformBuilderL10n,quformCoreL10n),jQuery,quformBuilderL10n,quformCoreL10n),jQuery,quformBuilderL10n),jQuery,quformBuilderL10n),jQuery,quformBuilderL10n),jQuery,quformBuilderL10n),jQuery,quformBuilderL10n,quformCoreL10n),jQuery,quformBuilderL10n,quformCoreL10n),jQuery,quformBuilderL10n,quformCoreL10n);