var quform=function(o,r,t,e){"use strict";var i,a=o.core,n=a.cache,s=!1;return i={init:function(){n.get("#qfb-import-form-button").click(i["import"])},validate:function(){if(n.get(".qfb-tools-import-form").find(".qfb-validation-error").remove(),""===n.get("#qfb-import-form-data").val()){var o=n.get("#qfb-import-form-data").closest(a.settingWrap);return a.addValidationError(o,e.thisFieldIsRequired),a.scrollTo(o),!1}return!0},"import":function(){if(!s){if(!i.validate())return!1;s=!0,r.ajax({type:"POST",url:e.ajaxUrl,data:{action:"quform_import_form",_ajax_nonce:t.importFormNonce,config:n.get("#qfb-import-form-data").val()},dataType:"json"}).done(function(o){o=a.sanitiseResponse(o),n.get(".qfb-tools-import-form").find(".qfb-validation-error").remove(),s=!1,"success"==o.type?i.onImportSuccess(o.message):"error"!=o.type&&"invalid"!=o.type||i.onImportFail(o)}).fail(function(){n.get(".qfb-tools-import-form").find(".qfb-validation-error").remove(),s=!1,i.onImportFail({message:e.ajaxError})})}},onImportSuccess:function(o){a.showFixedMessage(o,"success",0)},onImportFail:function(o){var e;a.isNonEmptyString(o.message)&&a.showFixedMessage(t.errorImportingForm+"<br>"+o.message,"error"),o.errors&&r.each(o.errors,function(o,r){var t=n.get("#"+o).closest(a.settingWrap);e||(e=t),a.addValidationError(t,r)}),e&&a.scrollTo(e)}},r(document).ready(i.init),o.tools=o.tools||{},o.tools.importForm=i,o}(quform,jQuery,quformToolsImportFormL10n,quformCoreL10n);