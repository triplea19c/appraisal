(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.splitter",["kendo.resizable"],function(){return function(e,t){function i(e){return g.test(e)}function n(e){return f.test(e)||/^\d+$/.test(e)}function r(e){return!i(e)&&!n(e)}function s(e,t){var n=parseInt(e,10);return i(e)&&(n=Math.floor(n*t/100)),n}function a(e,t){return function(i,n){var r=this.element.find(i).data(z);if(1==arguments.length)return r[e];r[e]=n,t&&this.element.data("kendo"+this.options.name).resize(!0)}}function o(e){var t=e.orientation;this.owner=e,this._element=e.element,this.orientation=t,d(this,t===v?P:b),this._resizable=new l.ui.Resizable(e.element,{orientation:t,handle:".k-splitbar-draggable-"+t+"[data-marker="+e._marker+"]",hint:c(this._createHint,this),start:c(this._start,this),max:c(this._max,this),min:c(this._min,this),invalidClass:"k-restricted-size-"+t,resizeend:c(this._stop,this)})}var l=window.kendo,p=l.ui,h=l.keys,d=e.extend,c=e.proxy,u=p.Widget,f=/^\d+(\.\d+)?px$/i,g=/^\d+(\.\d+)?%$/i,k=".kendoSplitter",m="collapse",v="horizontal",_="vertical",z="pane",x="k-"+z,y="."+x,w=u.extend({init:function(e,t){var i;u.fn.init.call(this,e,t),this.wrapper=this.element,this.options.orientation&&(i=this.options.orientation.toLowerCase()!=_),this.orientation=i?v:_,this._dimension=i?"width":"height",this._keys={decrease:i?h.LEFT:h.UP,increase:i?h.RIGHT:h.DOWN},this._resizeStep=10,this._marker=l.guid().substring(0,8),this._initPanes(),this.resizing=new o(this),this.element.triggerHandler("init"+k)},events:["expand",m,"contentLoad","error","resize","layoutChange"],_addOverlays:function(){this._panes().append("<div class='k-splitter-overlay k-overlay' />")},_removeOverlays:function(){this._panes().children(".k-splitter-overlay").remove()},_attachEvents:function(){var t=this,i=t.options.orientation;t.element.children(".k-splitbar-draggable-"+i).on("keydown"+k,c(t._keydown,t)).on("mousedown"+k,function(e){e.currentTarget.focus()}).on("focus"+k,function(t){e(t.currentTarget).addClass("k-state-focused")}).on("blur"+k,function(i){e(i.currentTarget).removeClass("k-state-focused"),t.resizing&&t.resizing.end()}).on("mouseenter"+k,function(){e(this).addClass("k-splitbar-"+t.orientation+"-hover")}).on("mouseleave"+k,function(){e(this).removeClass("k-splitbar-"+t.orientation+"-hover")}).on("mousedown"+k,c(t._addOverlays,t)).end().children(".k-splitbar").on("dblclick"+k,c(t._togglePane,t)).children(".k-collapse-next, .k-collapse-prev").on("click"+k,t._arrowClick(m)).end().children(".k-expand-next, .k-expand-prev").on("click"+k,t._arrowClick("expand")).end().end(),e(window).on("resize"+k+t._marker,c(t.resize,t,!1)),e(document).on("mouseup"+k+t._marker,c(t._removeOverlays,t))},_detachEvents:function(){this.element.children(".k-splitbar-draggable-"+this.orientation).off(k).end().children(".k-splitbar").off("dblclick"+k).children(".k-collapse-next, .k-collapse-prev, .k-expand-next, .k-expand-prev").off(k),e(window).off(k+this._marker),e(document).off(k+this._marker)},options:{name:"Splitter",orientation:v,panes:[]},destroy:function(){u.fn.destroy.call(this),this._detachEvents(),this.resizing&&this.resizing.destroy(),l.destroy(this.element),this.wrapper=this.element=null},_keydown:function(t){var i,n=t.keyCode,r=this.resizing,s=e(t.currentTarget),a=this._keys,o=n===a.increase,l=n===a.decrease;o||l?(t.ctrlKey?(i=s[l?"next":"prev"](),r&&r.isResizing()&&r.end(),i[this._dimension]()?this._triggerAction(m,s[l?"prev":"next"]()):this._triggerAction("expand",i)):r&&r.move((l?-1:1)*this._resizeStep,s),t.preventDefault()):n===h.HOME?(r.move(-r._maxPosition,s),t.preventDefault()):n===h.END?(r.move(r._maxPosition,s),t.preventDefault()):n===h.ENTER&&r&&(r.end(),t.preventDefault())},_initPanes:function(){var e=this.options.panes||[],t=this;this.element.addClass("k-widget").addClass("k-splitter").children().each(function(i,n){"script"!=n.nodeName.toLowerCase()&&t._initPane(n,e[i])}),this.resize()},_initPane:function(t,i){(t=e(t).attr("role","group").addClass(x)).data(z,i||{}).toggleClass("k-scrollable",!i||!1!==i.scrollable),this.ajaxRequest(t)},ajaxRequest:function(e,t,i){var n,r=this;n=(e=r.element.find(e)).data(z),(t=t||n.contentUrl)&&(e.append("<span class='k-icon k-i-loading k-pane-loading' />"),l.isLocalUrl(t)?jQuery.ajax({url:t,data:i||{},type:"GET",dataType:"html",success:function(t){r.angular("cleanup",function(){return{elements:e.get()}}),e.html(t),r.angular("compile",function(){return{elements:e.get()}}),r.trigger("contentLoad",{pane:e[0]})},error:function(t,i){r.trigger("error",{pane:e[0],status:i,xhr:t})}}):e.removeClass("k-scrollable").html("<iframe src='"+t+"' frameborder='0' class='k-content-frame'>This page requires frames in order to show content</iframe>"))},_triggerAction:function(e,t){this.trigger(e,{pane:t[0]})||this[e](t[0])},_togglePane:function(t){var i,n=e(t.target);n.closest(".k-splitter")[0]==this.element[0]&&1===(i=n.children(".k-icon:not(.k-resize-handle)")).length&&(i.is(".k-collapse-prev")?this._triggerAction(m,n.prev()):i.is(".k-collapse-next")?this._triggerAction(m,n.next()):i.is(".k-expand-prev")?this._triggerAction("expand",n.prev()):i.is(".k-expand-next")&&this._triggerAction("expand",n.next()))},_arrowClick:function(t){var i=this;return function(n){var r,s=e(n.target);s.closest(".k-splitter")[0]==i.element[0]&&(r=s.is(".k-"+t+"-prev")?s.parent().prev():s.parent().next(),i._triggerAction(t,r))}},_updateSplitBar:function(e,t,i){var n=function(e,t){return t?"<div class='k-icon "+e+"' />":""},r=this.orientation,s=!1!==t.resizable&&!1!==i.resizable,a=t.collapsible,o=t.collapsed,l=i.collapsible,p=i.collapsed;e.addClass("k-splitbar k-state-default k-splitbar-"+r).attr("role","separator").attr("aria-expanded",!(o||p)).removeClass("k-splitbar-"+r+"-hover").toggleClass("k-splitbar-draggable-"+r,s&&!o&&!p).toggleClass("k-splitbar-static-"+r,!s&&!a&&!l).html(n("k-collapse-prev k-i-arrow-60-up",a&&!o&&!p&&r==_)+n("k-collapse-prev k-i-arrow-60-left",a&&!o&&!p&&r==v)+n("k-expand-prev k-i-arrow-60-down",a&&o&&!p&&r==_)+n("k-expand-prev k-i-arrow-60-right",a&&o&&!p&&r==v)+n("k-resize-handle k-i-hbar",s&&r==_)+n("k-resize-handle k-i-vbar",s&&r==v)+n("k-collapse-next k-i-arrow-60-down",l&&!p&&!o&&r==_)+n("k-collapse-next k-i-arrow-60-right",l&&!p&&!o&&r==v)+n("k-expand-next k-i-arrow-60-up",l&&p&&!o&&r==_)+n("k-expand-next k-i-arrow-60-left",l&&p&&!o&&r==v)),s||a||l||e.removeAttr("tabindex")},_updateSplitBars:function(){var t=this;this.element.children(".k-splitbar").each(function(){var i=e(this),n=i.prevAll(y).first().data(z),r=i.nextAll(y).first().data(z);r&&t._updateSplitBar(i,n,r)})},_removeSplitBars:function(){this.element.children(".k-splitbar").remove()},_panes:function(){return this.element?this.element.children(y):e()},_resize:function(){var t=this.element,i=t.children(y),n=this.orientation==v,a=t.children(".k-splitbar"),o=a.length,p=n?"width":"height",h=t[p]();this.wrapper.addClass("k-splitter-resizing"),0===o?(o=i.length-1,i.slice(0,o).after("<div tabindex='0' class='k-splitbar' data-marker='"+this._marker+"' />"),this._updateSplitBars(),a=t.children(".k-splitbar")):this._updateSplitBars(),a.each(function(){h-=this[n?"offsetWidth":"offsetHeight"]});var d=0,c=e();i.css({position:"absolute",top:0})[p](function(){var t,i=e(this),n=i.data(z)||{};if(i.removeClass("k-state-collapsed"),n.collapsed)t=n.collapsedSize?s(n.collapsedSize,h):0,i.css("overflow","hidden").addClass("k-state-collapsed");else{if(r(n.size))return void(c=c.add(this));t=s(n.size,h)}return d+=t,t}),h-=d;var u=c.length,f=Math.floor(h/u);c.slice(0,u-1).css(p,f).end().eq(u-1).css(p,h-(u-1)*f);var g=0,k=n?"height":"width",m=n?"left":"top",_=n?"offsetWidth":"offsetHeight";if(0===u){var x=i.filter(function(){return!(e(this).data(z)||{}).collapsed}).last();x[p](h+x[0][_])}t.children().css(k,t[k]()).each(function(e,t){"script"!=t.tagName.toLowerCase()&&(t.style[m]=Math.floor(g)+"px",g+=t[_])}),this._detachEvents(),this._attachEvents(),this.wrapper.removeClass("k-splitter-resizing"),l.resize(i),this.trigger("layoutChange")},toggle:function(e,t){var i;i=(e=this.element.find(e)).data(z),(t||i.collapsible)&&(1==arguments.length&&(t=void 0!==i.collapsed&&i.collapsed),i.collapsed=!t,i.collapsed?e.css("overflow","hidden"):e.css("overflow",""),this.resize(!0))},collapse:function(e){this.toggle(e,!1)},expand:function(e){this.toggle(e,!0)},_addPane:function(e,t,i){return i.length&&(this.options.panes.splice(t,0,e),this._initPane(i,e),this._removeSplitBars(),this.resize(!0)),i},append:function(t){t=t||{};var i=e("<div />").appendTo(this.element);return this._addPane(t,this.options.panes.length,i)},insertBefore:function(t,i){i=e(i),t=t||{};var n=this.wrapper.children(".k-pane").index(i),r=e("<div />").insertBefore(e(i));return this._addPane(t,n,r)},insertAfter:function(t,i){i=e(i),t=t||{};var n=this.wrapper.children(".k-pane").index(i),r=e("<div />").insertAfter(e(i));return this._addPane(t,n+1,r)},remove:function(t){var i=this;return(t=e(t)).length&&(l.destroy(t),t.each(function(t,n){i.options.panes.splice(i.wrapper.children(".k-pane").index(n),1),e(n).remove()}),i._removeSplitBars(),i.options.panes.length&&i.resize(!0)),i},size:a("size",!0),min:a("min"),max:a("max")});p.plugin(w);var b={sizingProperty:"height",sizingDomProperty:"offsetHeight",alternateSizingProperty:"width",positioningProperty:"top",mousePositioningProperty:"pageY"},P={sizingProperty:"width",sizingDomProperty:"offsetWidth",alternateSizingProperty:"height",positioningProperty:"left",mousePositioningProperty:"pageX"};o.prototype={press:function(e){this._resizable.press(e)},move:function(e,t){this.pressed||(this.press(t),this.pressed=!0),this._resizable.target||this._resizable.press(t),this._resizable.move(e)},end:function(){this._resizable.end(),this.pressed=!1},destroy:function(){this._resizable.destroy(),this._resizable=this._element=this.owner=null},isResizing:function(){return this._resizable.resizing},_createHint:function(t){return e("<div class='k-ghost-splitbar k-ghost-splitbar-"+this.orientation+" k-state-default' />").css(this.alternateSizingProperty,t[this.alternateSizingProperty]())},_start:function(t){var i=e(t.currentTarget),r=i.prev(),s=i.next(),a=r.data(z),o=s.data(z),l=parseInt(r[0].style[this.positioningProperty],10),p=parseInt(s[0].style[this.positioningProperty],10)+s[0][this.sizingDomProperty]-i[0][this.sizingDomProperty],h=parseInt(this._element.css(this.sizingProperty),10),d=function(e){var t=parseInt(e,10);return(n(e)?t:h*t/100)||0},c=d(a.min),u=d(a.max)||p-l,f=d(o.min),g=d(o.max)||p-l;this.previousPane=r,this.nextPane=s,this._maxPosition=Math.min(p-f,l+u),this._minPosition=Math.max(l+c,p-g)},_max:function(){return this._maxPosition},_min:function(){return this._minPosition},_stop:function(t){var i=e(t.currentTarget),n=this.owner;if(n._panes().children(".k-splitter-overlay").remove(),t.keyCode!==l.keys.ESC){var s=t.position,a=i.prev(),o=i.next(),p=a.data(z),h=o.data(z),d=s-parseInt(a[0].style[this.positioningProperty],10),c=parseInt(o[0].style[this.positioningProperty],10)+o[0][this.sizingDomProperty]-s-i[0][this.sizingDomProperty],u=this._element.children(y).filter(function(){return r(e(this).data(z).size)}).length;(!r(p.size)||u>1)&&(r(p.size)&&u--,p.size=d+"px"),(!r(h.size)||u>1)&&(h.size=c+"px"),n.resize(!0)}return!1}}}(window.kendo.jQuery),window.kendo});